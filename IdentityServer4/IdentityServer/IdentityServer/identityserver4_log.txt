2020-07-27 16:01:50.969 +03:00 [FTL] Application startup exception
System.InvalidOperationException: No service for type 'Microsoft.AspNetCore.Identity.UserManager`1[Microsoft.AspNetCore.Identity.IdentityUser]' has been registered.
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at IdentityServer.Startup.InitializeDbTestData(IApplicationBuilder app) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Startup.cs:line 191
   at IdentityServer.Startup.Configure(IApplicationBuilder app, IWebHostEnvironment env) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Startup.cs:line 127
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.AspNetCore.Hosting.ConfigureBuilder.Invoke(Object instance, IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.ConfigureBuilder.<>c__DisplayClass4_0.<Build>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.Mvc.Filters.MiddlewareFilterBuilderStartupFilter.<>c__DisplayClass0_0.<Configure>g__MiddlewareFilterBuilder|0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.WebHost.BuildApplication()
2020-07-27 16:03:10.162 +03:00 [FTL] Application startup exception
System.InvalidOperationException: No service for type 'Microsoft.AspNetCore.Identity.UserManager`1[Microsoft.AspNetCore.Identity.IdentityUser]' has been registered.
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at IdentityServer.Startup.InitializeDbTestData(IApplicationBuilder app) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Startup.cs:line 191
   at IdentityServer.Startup.Configure(IApplicationBuilder app, IWebHostEnvironment env) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Startup.cs:line 127
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.AspNetCore.Hosting.ConfigureBuilder.Invoke(Object instance, IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.ConfigureBuilder.<>c__DisplayClass4_0.<Build>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.Mvc.Filters.MiddlewareFilterBuilderStartupFilter.<>c__DisplayClass0_0.<Configure>g__MiddlewareFilterBuilder|0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Server.IIS.Core.IISServerSetupFilter.<>c__DisplayClass2_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.WebHost.BuildApplication()
2020-07-27 16:05:00.934 +03:00 [FTL] Application startup exception
System.InvalidOperationException: No service for type 'Microsoft.AspNetCore.Identity.UserManager`1[Microsoft.AspNetCore.Identity.IdentityUser]' has been registered.
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at IdentityServer.Startup.InitializeDbTestData(IApplicationBuilder app) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Startup.cs:line 191
   at IdentityServer.Startup.Configure(IApplicationBuilder app, IWebHostEnvironment env) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Startup.cs:line 127
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.AspNetCore.Hosting.ConfigureBuilder.Invoke(Object instance, IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.ConfigureBuilder.<>c__DisplayClass4_0.<Build>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.Mvc.Filters.MiddlewareFilterBuilderStartupFilter.<>c__DisplayClass0_0.<Configure>g__MiddlewareFilterBuilder|0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.WebHost.BuildApplication()
2020-07-27 16:12:11.517 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 16:12:11.547 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 16:12:11.548 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 16:12:11.548 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 16:12:11.548 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 16:12:11.549 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 16:12:11.549 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 16:12:12.651 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 16:12:12.653 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 16:12:12.653 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 16:12:12.653 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 16:12:12.654 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 16:12:12.654 +03:00 [DBG] Error Url: /home/error
2020-07-27 16:12:12.654 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 16:12:12.713 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:12:12.719 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:12:41.676 +03:00 [INF] Removing 0 grants
2020-07-27 16:12:41.688 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:13:11.696 +03:00 [INF] Removing 0 grants
2020-07-27 16:13:11.697 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:13:41.711 +03:00 [INF] Removing 0 grants
2020-07-27 16:13:41.714 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:13:55.037 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:13:55.038 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:26:06.212 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 16:26:06.241 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 16:26:06.242 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 16:26:06.242 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 16:26:06.242 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 16:26:06.243 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 16:26:06.243 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 16:26:07.230 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 16:26:07.232 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 16:26:07.233 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 16:26:07.233 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 16:26:07.233 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 16:26:07.233 +03:00 [DBG] Error Url: /home/error
2020-07-27 16:26:07.233 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 16:26:07.280 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:26:07.287 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:26:16.667 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:26:16.668 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:26:36.474 +03:00 [INF] Removing 0 grants
2020-07-27 16:26:36.483 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:27:06.495 +03:00 [INF] Removing 0 grants
2020-07-27 16:27:06.496 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:27:14.777 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:27:14.780 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:27:36.510 +03:00 [INF] Removing 0 grants
2020-07-27 16:27:36.513 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:28:06.525 +03:00 [INF] Removing 0 grants
2020-07-27 16:28:06.526 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:28:36.537 +03:00 [INF] Removing 0 grants
2020-07-27 16:28:36.539 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:28:49.500 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 16:28:49.529 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 16:28:49.529 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 16:28:49.530 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 16:28:49.530 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 16:28:49.530 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 16:28:49.530 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 16:28:50.707 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 16:28:50.708 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 16:28:50.708 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 16:28:50.708 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 16:28:50.709 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 16:28:50.709 +03:00 [DBG] Error Url: /home/error
2020-07-27 16:28:50.709 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 16:28:50.764 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:28:50.772 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:03.154 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:03.155 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:07.422 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:07.422 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:07.422 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:07.432 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:07.432 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:07.433 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:07.433 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:07.434 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:07.437 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:07.441 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:07.473 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:07.474 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:07.501 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:07.502 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:19.784 +03:00 [INF] Removing 0 grants
2020-07-27 16:29:19.793 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:29:31.349 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:31.351 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:32.628 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:32.630 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:38.827 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:38.829 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:39.921 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:39.927 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:29:49.808 +03:00 [INF] Removing 0 grants
2020-07-27 16:29:49.809 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:30:19.821 +03:00 [INF] Removing 0 grants
2020-07-27 16:30:19.824 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:30:49.833 +03:00 [INF] Removing 0 grants
2020-07-27 16:30:49.834 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:31:19.851 +03:00 [INF] Removing 0 grants
2020-07-27 16:31:19.852 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:31:49.864 +03:00 [INF] Removing 0 grants
2020-07-27 16:31:49.866 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:32:19.880 +03:00 [INF] Removing 0 grants
2020-07-27 16:32:19.882 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:32:49.894 +03:00 [INF] Removing 0 grants
2020-07-27 16:32:49.895 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:33:19.910 +03:00 [INF] Removing 0 grants
2020-07-27 16:33:19.912 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:33:49.930 +03:00 [INF] Removing 0 grants
2020-07-27 16:33:49.932 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:34:19.944 +03:00 [INF] Removing 0 grants
2020-07-27 16:34:19.945 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:34:49.958 +03:00 [INF] Removing 0 grants
2020-07-27 16:34:49.960 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:35:19.972 +03:00 [INF] Removing 0 grants
2020-07-27 16:35:19.974 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:35:49.986 +03:00 [INF] Removing 0 grants
2020-07-27 16:35:49.988 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:36:20.003 +03:00 [INF] Removing 0 grants
2020-07-27 16:36:20.005 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:36:50.007 +03:00 [INF] Removing 0 grants
2020-07-27 16:36:50.008 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:37:20.020 +03:00 [INF] Removing 0 grants
2020-07-27 16:37:20.021 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:37:50.023 +03:00 [INF] Removing 0 grants
2020-07-27 16:37:50.025 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:38:20.034 +03:00 [INF] Removing 0 grants
2020-07-27 16:38:20.035 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:38:50.049 +03:00 [INF] Removing 0 grants
2020-07-27 16:38:50.050 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:39:20.064 +03:00 [INF] Removing 0 grants
2020-07-27 16:39:20.065 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:39:50.080 +03:00 [INF] Removing 0 grants
2020-07-27 16:39:50.081 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:40:20.098 +03:00 [INF] Removing 0 grants
2020-07-27 16:40:20.102 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:40:50.111 +03:00 [INF] Removing 0 grants
2020-07-27 16:40:50.111 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:41:20.127 +03:00 [INF] Removing 0 grants
2020-07-27 16:41:20.128 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:41:50.142 +03:00 [INF] Removing 0 grants
2020-07-27 16:41:50.143 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:42:20.149 +03:00 [INF] Removing 0 grants
2020-07-27 16:42:20.154 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:42:50.176 +03:00 [INF] Removing 0 grants
2020-07-27 16:42:50.177 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:43:20.190 +03:00 [INF] Removing 0 grants
2020-07-27 16:43:20.191 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:43:50.195 +03:00 [INF] Removing 0 grants
2020-07-27 16:43:50.196 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:44:20.206 +03:00 [INF] Removing 0 grants
2020-07-27 16:44:20.206 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:44:50.220 +03:00 [INF] Removing 0 grants
2020-07-27 16:44:50.221 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:45:20.223 +03:00 [INF] Removing 0 grants
2020-07-27 16:45:20.225 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:45:50.236 +03:00 [INF] Removing 0 grants
2020-07-27 16:45:50.237 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:46:20.243 +03:00 [INF] Removing 0 grants
2020-07-27 16:46:20.245 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:46:50.254 +03:00 [INF] Removing 0 grants
2020-07-27 16:46:50.254 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:47:20.255 +03:00 [INF] Removing 0 grants
2020-07-27 16:47:20.256 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:47:50.269 +03:00 [INF] Removing 0 grants
2020-07-27 16:47:50.270 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:48:20.272 +03:00 [INF] Removing 0 grants
2020-07-27 16:48:20.273 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:48:50.284 +03:00 [INF] Removing 0 grants
2020-07-27 16:48:50.285 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:49:20.299 +03:00 [INF] Removing 0 grants
2020-07-27 16:49:20.300 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:49:50.301 +03:00 [INF] Removing 0 grants
2020-07-27 16:49:50.302 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:50:20.315 +03:00 [INF] Removing 0 grants
2020-07-27 16:50:20.315 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:50:50.317 +03:00 [INF] Removing 0 grants
2020-07-27 16:50:50.317 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:51:20.319 +03:00 [INF] Removing 0 grants
2020-07-27 16:51:20.320 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:51:50.331 +03:00 [INF] Removing 0 grants
2020-07-27 16:51:50.332 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:52:20.336 +03:00 [INF] Removing 0 grants
2020-07-27 16:52:20.337 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:52:50.353 +03:00 [INF] Removing 0 grants
2020-07-27 16:52:50.357 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:53:20.360 +03:00 [INF] Removing 0 grants
2020-07-27 16:53:20.361 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:53:50.376 +03:00 [INF] Removing 0 grants
2020-07-27 16:53:50.377 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:53:58.108 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:53:58.111 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:53:58.156 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:53:58.179 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:53:58.195 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:53:58.205 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:53:58.209 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:53:58.220 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:53:58.220 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:53:58.250 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:53:58.254 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:53:58.256 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:53:58.310 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:53:58.312 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:00.270 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:00.270 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:00.333 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:00.356 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:00.371 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:00.371 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:00.371 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:00.371 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:00.372 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:00.373 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:00.374 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:00.377 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:00.408 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:00.409 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:00.440 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:00.456 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:20.392 +03:00 [INF] Removing 0 grants
2020-07-27 16:54:20.393 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:54:30.542 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 16:54:30.575 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 16:54:30.575 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 16:54:30.576 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 16:54:30.576 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 16:54:30.576 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 16:54:30.577 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 16:54:31.797 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 16:54:31.799 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 16:54:31.799 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 16:54:31.799 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 16:54:31.799 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 16:54:31.799 +03:00 [DBG] Error Url: /home/error
2020-07-27 16:54:31.799 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 16:54:31.847 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:31.854 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:40.191 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:40.196 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:49.009 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:49.012 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:49.085 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:49.101 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:49.115 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:49.115 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:49.115 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:49.115 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:49.122 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:49.122 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:49.123 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:49.124 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:49.156 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:49.157 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:49.184 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:54:49.186 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:55:00.840 +03:00 [INF] Removing 0 grants
2020-07-27 16:55:00.851 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:55:30.871 +03:00 [INF] Removing 0 grants
2020-07-27 16:55:30.872 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:56:00.888 +03:00 [INF] Removing 0 grants
2020-07-27 16:56:00.891 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:56:30.915 +03:00 [INF] Removing 0 grants
2020-07-27 16:56:30.917 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:57:00.926 +03:00 [INF] Removing 0 grants
2020-07-27 16:57:00.928 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:57:02.097 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:02.099 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:02.149 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:02.152 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:02.192 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:02.201 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:02.212 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:02.212 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:02.223 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:02.233 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:02.233 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:02.237 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:02.270 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:02.272 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:02.301 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:02.303 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:08.073 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:08.075 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:08.150 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:08.168 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:08.182 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:08.182 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:08.182 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:08.182 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:08.183 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:08.187 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:08.194 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:08.197 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:08.227 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:08.228 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 16:57:30.932 +03:00 [INF] Removing 0 grants
2020-07-27 16:57:30.934 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:58:00.938 +03:00 [INF] Removing 0 grants
2020-07-27 16:58:00.940 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:58:30.950 +03:00 [INF] Removing 0 grants
2020-07-27 16:58:30.951 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:59:00.962 +03:00 [INF] Removing 0 grants
2020-07-27 16:59:00.965 +03:00 [INF] Removing 0 device flow codes
2020-07-27 16:59:30.971 +03:00 [INF] Removing 0 grants
2020-07-27 16:59:30.973 +03:00 [INF] Removing 0 device flow codes
2020-07-27 17:00:00.996 +03:00 [INF] Removing 0 grants
2020-07-27 17:00:00.998 +03:00 [INF] Removing 0 device flow codes
2020-07-27 17:00:31.016 +03:00 [INF] Removing 0 grants
2020-07-27 17:00:31.019 +03:00 [INF] Removing 0 device flow codes
2020-07-27 17:01:01.026 +03:00 [INF] Removing 0 grants
2020-07-27 17:01:01.028 +03:00 [INF] Removing 0 device flow codes
2020-07-27 17:01:31.038 +03:00 [INF] Removing 0 grants
2020-07-27 17:01:31.039 +03:00 [INF] Removing 0 device flow codes
2020-07-27 17:02:01.050 +03:00 [INF] Removing 0 grants
2020-07-27 17:02:01.052 +03:00 [INF] Removing 0 device flow codes
2020-07-27 17:02:23.967 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 17:02:24.001 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 17:02:24.001 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 17:02:24.002 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 17:02:24.002 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 17:02:24.002 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 17:02:24.002 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 17:02:25.005 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 17:02:25.007 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 17:02:25.007 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 17:02:25.007 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 17:02:25.008 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 17:02:25.008 +03:00 [DBG] Error Url: /home/error
2020-07-27 17:02:25.008 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 17:02:25.110 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:02:25.116 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:02:42.608 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:02:42.611 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:02:42.848 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:02:42.873 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:02:42.873 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:02:42.873 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:02:42.883 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:02:42.884 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:02:42.884 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:02:42.884 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:02:42.888 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:02:42.889 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:02:54.268 +03:00 [INF] Removing 0 grants
2020-07-27 17:02:54.279 +03:00 [INF] Removing 0 device flow codes
2020-07-27 17:03:24.291 +03:00 [INF] Removing 0 grants
2020-07-27 17:03:24.293 +03:00 [INF] Removing 0 device flow codes
2020-07-27 17:03:49.038 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:03:49.040 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:03:50.505 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:03:50.507 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:03:54.312 +03:00 [INF] Removing 0 grants
2020-07-27 17:03:54.314 +03:00 [INF] Removing 0 device flow codes
2020-07-27 17:04:24.327 +03:00 [INF] Removing 0 grants
2020-07-27 17:04:24.330 +03:00 [INF] Removing 0 device flow codes
2020-07-27 17:04:30.925 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:04:30.927 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:05:08.149 +03:00 [INF] Removing 0 grants
2020-07-27 17:05:08.176 +03:00 [INF] Removing 0 device flow codes
2020-07-27 17:05:11.162 +03:00 [INF] {"Username":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HM1I6MO3Q8HK:00000013","TimeStamp":"2020-07-27T14:05:11.0000000Z","ProcessId":1376,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2020-07-27 17:05:19.446 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:05:19.468 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:05:19.477 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:05:19.490 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:05:19.490 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:05:19.491 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:05:19.498 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:05:19.498 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:05:19.500 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:05:19.531 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:05:19.598 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:05:19.599 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:05:19.673 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:05:19.680 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:05:38.192 +03:00 [INF] Removing 0 grants
2020-07-27 17:05:38.193 +03:00 [INF] Removing 0 device flow codes
2020-07-27 17:06:08.207 +03:00 [INF] Removing 0 grants
2020-07-27 17:06:08.211 +03:00 [INF] Removing 0 device flow codes
2020-07-27 17:06:38.224 +03:00 [INF] Removing 0 grants
2020-07-27 17:06:38.227 +03:00 [INF] Removing 0 device flow codes
2020-07-27 17:07:08.237 +03:00 [INF] Removing 0 grants
2020-07-27 17:07:08.239 +03:00 [INF] Removing 0 device flow codes
2020-07-27 17:07:38.253 +03:00 [INF] Removing 0 grants
2020-07-27 17:07:38.255 +03:00 [INF] Removing 0 device flow codes
2020-07-27 17:07:45.720 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:07:45.722 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:07:57.300 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:07:57.301 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:08:08.273 +03:00 [INF] Removing 0 grants
2020-07-27 17:08:08.274 +03:00 [INF] Removing 0 device flow codes
2020-07-27 17:08:38.285 +03:00 [INF] Removing 0 grants
2020-07-27 17:08:38.287 +03:00 [INF] Removing 0 device flow codes
2020-07-27 17:09:08.300 +03:00 [INF] Removing 0 grants
2020-07-27 17:09:08.302 +03:00 [INF] Removing 0 device flow codes
2020-07-27 17:09:38.320 +03:00 [INF] Removing 0 grants
2020-07-27 17:09:38.323 +03:00 [INF] Removing 0 device flow codes
2020-07-27 17:57:23.507 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 17:57:23.537 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 17:57:23.537 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 17:57:23.537 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 17:57:23.538 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 17:57:23.538 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 17:57:23.538 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 17:57:24.605 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 17:57:24.606 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 17:57:24.607 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 17:57:24.607 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 17:57:24.607 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 17:57:24.607 +03:00 [DBG] Error Url: /home/error
2020-07-27 17:57:24.607 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 17:57:24.660 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:57:24.665 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:57:36.872 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:57:36.874 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:57:37.118 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:57:37.136 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:57:37.136 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:57:37.136 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:57:37.145 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:57:37.145 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:57:37.145 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:57:37.145 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:57:37.146 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:57:37.146 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:57:37.193 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:57:37.193 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:57:53.797 +03:00 [INF] Removing 0 grants
2020-07-27 17:57:53.807 +03:00 [INF] Removing 0 device flow codes
2020-07-27 17:58:10.430 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:58:10.432 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:58:48.705 +03:00 [INF] Removing 0 grants
2020-07-27 17:59:04.303 +03:00 [INF] Removing 0 device flow codes
2020-07-27 17:59:29.732 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:59:29.741 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:59:29.741 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:59:29.741 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:59:29.750 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:59:29.750 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:59:29.757 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:59:29.757 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:59:29.766 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:59:29.774 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:59:29.830 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:59:29.836 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:59:29.885 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:59:29.891 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 17:59:34.333 +03:00 [INF] Removing 0 grants
2020-07-27 17:59:34.336 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:00:04.347 +03:00 [INF] Removing 0 grants
2020-07-27 18:00:04.349 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:00:34.353 +03:00 [INF] Removing 0 grants
2020-07-27 18:00:34.355 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:00:43.927 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:00:43.927 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:01:17.289 +03:00 [INF] Removing 0 grants
2020-07-27 18:01:17.314 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:01:33.233 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1I7LFEJ9PL:00000021","TimeStamp":"2020-07-27T15:01:33.0000000Z","ProcessId":23888,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-27 18:01:48.938 +03:00 [INF] Removing 0 grants
2020-07-27 18:01:53.154 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:01:53.247 +03:00 [DBG] Augmenting SignInContext
2020-07-27 18:01:53.248 +03:00 [DBG] Adding idp claim with value: local
2020-07-27 18:01:53.248 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-27 18:01:53.249 +03:00 [DBG] Adding auth_time claim with value: 1595862113
2020-07-27 18:01:53.250 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:01:53.259 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-27 18:02:23.174 +03:00 [INF] Removing 0 grants
2020-07-27 18:02:23.177 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:02:54.716 +03:00 [INF] Removing 0 grants
2020-07-27 18:02:54.718 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:03:24.727 +03:00 [INF] Removing 0 grants
2020-07-27 18:03:24.728 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:03:54.737 +03:00 [INF] Removing 0 grants
2020-07-27 18:03:54.738 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:04:24.754 +03:00 [INF] Removing 0 grants
2020-07-27 18:04:24.755 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:04:54.770 +03:00 [INF] Removing 0 grants
2020-07-27 18:04:54.771 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:05:24.786 +03:00 [INF] Removing 0 grants
2020-07-27 18:05:24.788 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:05:54.792 +03:00 [INF] Removing 0 grants
2020-07-27 18:05:54.794 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:06:24.811 +03:00 [INF] Removing 0 grants
2020-07-27 18:06:24.812 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:06:54.824 +03:00 [INF] Removing 0 grants
2020-07-27 18:06:54.825 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:07:24.834 +03:00 [INF] Removing 0 grants
2020-07-27 18:07:24.835 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:07:54.847 +03:00 [INF] Removing 0 grants
2020-07-27 18:07:54.848 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:08:07.195 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 18:08:07.224 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 18:08:07.225 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 18:08:07.225 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 18:08:07.225 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 18:08:07.225 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 18:08:07.226 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 18:08:08.417 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 18:08:08.419 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 18:08:08.419 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 18:08:08.419 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 18:08:08.419 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 18:08:08.420 +03:00 [DBG] Error Url: /home/error
2020-07-27 18:08:08.420 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 18:08:37.480 +03:00 [INF] Removing 0 grants
2020-07-27 18:08:37.490 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:08:51.772 +03:00 [WRN] Invalid password for user 65886359-073C-434B-AD2D-A3932222DABE.
2020-07-27 18:08:51.782 +03:00 [INF] {"Username":"alice@email.com","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HM1I7RFAFLO9:00000013","TimeStamp":"2020-07-27T15:08:51.0000000Z","ProcessId":30932,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2020-07-27 18:09:02.112 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1I7RFAFLO9:0000001F","TimeStamp":"2020-07-27T15:09:02.0000000Z","ProcessId":30932,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-27 18:09:02.124 +03:00 [DBG] Augmenting SignInContext
2020-07-27 18:09:02.125 +03:00 [DBG] Adding idp claim with value: local
2020-07-27 18:09:02.127 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-27 18:09:02.128 +03:00 [DBG] Adding auth_time claim with value: 1595862542
2020-07-27 18:09:02.135 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-27 18:09:07.504 +03:00 [INF] Removing 0 grants
2020-07-27 18:09:07.505 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:09:37.512 +03:00 [INF] Removing 0 grants
2020-07-27 18:09:37.515 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:10:07.526 +03:00 [INF] Removing 0 grants
2020-07-27 18:10:07.528 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:10:37.535 +03:00 [INF] Removing 0 grants
2020-07-27 18:10:37.536 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:11:07.549 +03:00 [INF] Removing 0 grants
2020-07-27 18:11:07.551 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:11:37.566 +03:00 [INF] Removing 0 grants
2020-07-27 18:11:37.568 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:12:07.578 +03:00 [INF] Removing 0 grants
2020-07-27 18:12:07.586 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:12:37.597 +03:00 [INF] Removing 0 grants
2020-07-27 18:12:37.598 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:13:07.600 +03:00 [INF] Removing 0 grants
2020-07-27 18:13:07.601 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:13:37.612 +03:00 [INF] Removing 0 grants
2020-07-27 18:13:37.614 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:14:07.619 +03:00 [INF] Removing 0 grants
2020-07-27 18:14:07.620 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:15:23.482 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 18:15:23.515 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 18:15:23.516 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 18:15:23.516 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 18:15:23.516 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 18:15:23.516 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 18:15:23.517 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 18:15:24.751 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 18:15:24.754 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 18:15:24.754 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 18:15:24.754 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 18:15:24.754 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 18:15:24.755 +03:00 [DBG] Error Url: /home/error
2020-07-27 18:15:24.755 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 18:15:24.808 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:15:24.814 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:15:53.763 +03:00 [INF] Removing 0 grants
2020-07-27 18:15:53.773 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:16:23.788 +03:00 [INF] Removing 0 grants
2020-07-27 18:16:23.790 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:16:53.806 +03:00 [INF] Removing 0 grants
2020-07-27 18:16:53.809 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:17:23.824 +03:00 [INF] Removing 0 grants
2020-07-27 18:17:23.825 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:17:53.835 +03:00 [INF] Removing 0 grants
2020-07-27 18:17:53.837 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:18:21.639 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 18:18:21.668 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 18:18:21.669 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 18:18:21.669 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 18:18:21.669 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 18:18:21.670 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 18:18:21.670 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 18:18:22.842 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 18:18:22.843 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 18:18:22.844 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 18:18:22.844 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 18:18:22.844 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 18:18:22.844 +03:00 [DBG] Error Url: /home/error
2020-07-27 18:18:22.844 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 18:18:22.897 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:22.902 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:23.174 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:23.174 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:23.181 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:23.186 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:23.281 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:23.281 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:23.291 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:23.291 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:23.294 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:23.294 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:23.294 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:23.294 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:23.321 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:23.322 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:23.348 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:23.349 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:33.509 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:33.510 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:33.572 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:33.572 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:33.574 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:33.607 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:33.616 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:33.616 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:33.617 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:33.637 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:33.637 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:33.640 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:33.660 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:33.661 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:33.681 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:33.681 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:33.707 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:33.707 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:38.686 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:38.687 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:38.800 +03:00 [INF] {"Username":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HM1I816E5GOH:00000025","TimeStamp":"2020-07-27T15:18:38.0000000Z","ProcessId":22220,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2020-07-27 18:18:38.864 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:38.876 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:38.876 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:38.889 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:38.911 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:38.932 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:38.943 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:38.943 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:38.943 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:38.953 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:38.962 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:38.962 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:38.986 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:38.986 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:18:51.893 +03:00 [INF] Removing 0 grants
2020-07-27 18:18:51.902 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:19:04.962 +03:00 [INF] {"Username":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HM1I816E5GOH:00000035","TimeStamp":"2020-07-27T15:19:04.0000000Z","ProcessId":22220,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2020-07-27 18:19:21.921 +03:00 [INF] Removing 0 grants
2020-07-27 18:19:21.922 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:19:21.957 +03:00 [WRN] Invalid password for user 65886359-073C-434B-AD2D-A3932222DABE.
2020-07-27 18:19:21.958 +03:00 [INF] {"Username":"alice@email.com","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HM1I816E5GOH:00000043","TimeStamp":"2020-07-27T15:19:21.0000000Z","ProcessId":22220,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2020-07-27 18:19:33.659 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1I816E5GOH:00000051","TimeStamp":"2020-07-27T15:19:33.0000000Z","ProcessId":22220,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-27 18:19:33.672 +03:00 [DBG] Augmenting SignInContext
2020-07-27 18:19:33.674 +03:00 [DBG] Adding idp claim with value: local
2020-07-27 18:19:33.677 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-27 18:19:33.678 +03:00 [DBG] Adding auth_time claim with value: 1595863173
2020-07-27 18:19:33.686 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-27 18:19:51.947 +03:00 [INF] Removing 0 grants
2020-07-27 18:19:51.950 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:20:21.957 +03:00 [INF] Removing 0 grants
2020-07-27 18:20:21.958 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:20:51.972 +03:00 [INF] Removing 0 grants
2020-07-27 18:20:51.974 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:21:21.989 +03:00 [INF] Removing 0 grants
2020-07-27 18:21:21.991 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:21:39.651 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-27 18:21:39.653 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-27 18:21:39.653 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-27 18:21:39.986 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Value cannot be null or empty. (Parameter 'url')
   at Microsoft.AspNetCore.Mvc.ControllerBase.Redirect(String url)
   at IdentityServer.Controllers.AccountController.Logout(String logoutId) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 215
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-27 18:21:40.023 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-27 18:21:52.003 +03:00 [INF] Removing 0 grants
2020-07-27 18:21:52.005 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:22:22.010 +03:00 [INF] Removing 0 grants
2020-07-27 18:22:22.011 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:22:52.021 +03:00 [INF] Removing 0 grants
2020-07-27 18:22:52.023 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:23:22.037 +03:00 [INF] Removing 0 grants
2020-07-27 18:23:22.038 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:23:52.051 +03:00 [INF] Removing 0 grants
2020-07-27 18:23:52.053 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:23:58.607 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 18:23:58.636 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 18:23:58.637 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 18:23:58.637 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 18:23:58.637 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 18:23:58.638 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 18:23:58.638 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 18:23:59.849 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 18:23:59.851 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 18:23:59.851 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 18:23:59.852 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 18:23:59.852 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 18:23:59.852 +03:00 [DBG] Error Url: /home/error
2020-07-27 18:23:59.852 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 18:24:28.906 +03:00 [INF] Removing 0 grants
2020-07-27 18:24:28.916 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:24:58.928 +03:00 [INF] Removing 0 grants
2020-07-27 18:24:58.929 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:25:28.956 +03:00 [INF] Removing 0 grants
2020-07-27 18:25:28.960 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:25:58.975 +03:00 [INF] Removing 0 grants
2020-07-27 18:25:58.977 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:26:28.989 +03:00 [INF] Removing 0 grants
2020-07-27 18:26:28.991 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:26:59.004 +03:00 [INF] Removing 0 grants
2020-07-27 18:26:59.006 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:27:29.019 +03:00 [INF] Removing 0 grants
2020-07-27 18:27:29.021 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:27:59.023 +03:00 [INF] Removing 0 grants
2020-07-27 18:27:59.025 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:32:06.997 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 18:32:07.031 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 18:32:07.032 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 18:32:07.032 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 18:32:07.032 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 18:32:07.033 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 18:32:07.033 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 18:32:08.360 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 18:32:08.362 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 18:32:08.362 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 18:32:08.362 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 18:32:08.362 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 18:32:08.363 +03:00 [DBG] Error Url: /home/error
2020-07-27 18:32:08.363 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 18:32:08.415 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:32:08.422 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:32:08.701 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:32:08.701 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:32:08.718 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:32:08.718 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:32:08.718 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:32:08.724 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:32:08.724 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:32:08.725 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:32:08.764 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:32:08.764 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:32:08.795 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:32:08.796 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:42:46.296 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 18:42:46.325 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 18:42:46.326 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 18:42:46.326 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 18:42:46.327 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 18:42:46.327 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 18:42:46.327 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 18:42:47.529 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 18:42:47.531 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 18:42:47.531 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 18:42:47.531 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 18:42:47.532 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 18:42:47.532 +03:00 [DBG] Error Url: /home/error
2020-07-27 18:42:47.532 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 18:42:47.588 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:42:47.594 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:42:47.870 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:42:47.870 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:42:47.870 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:42:47.870 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:42:47.871 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:42:47.874 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:42:47.874 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:42:47.874 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:42:47.909 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:42:47.910 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:42:47.938 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:42:47.939 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:42:51.753 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:42:51.754 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 18:43:16.601 +03:00 [INF] Removing 0 grants
2020-07-27 18:43:16.611 +03:00 [INF] Removing 0 device flow codes
2020-07-27 18:43:46.618 +03:00 [INF] Removing 0 grants
2020-07-27 18:43:46.619 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:00:19.571 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 19:00:19.601 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 19:00:19.601 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 19:00:19.601 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 19:00:19.602 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 19:00:19.602 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 19:00:19.602 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 19:00:20.624 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 19:00:20.626 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 19:00:20.626 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 19:00:20.626 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 19:00:20.627 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 19:00:20.627 +03:00 [DBG] Error Url: /home/error
2020-07-27 19:00:20.627 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 19:00:20.679 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:00:20.685 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:00:20.968 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:00:20.978 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:00:20.978 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:00:20.984 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:00:21.007 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:00:21.007 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:00:21.007 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:00:21.008 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:00:21.049 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:00:21.050 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:03:34.700 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 19:03:34.729 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 19:03:34.729 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 19:03:34.730 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 19:03:34.730 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 19:03:34.730 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 19:03:34.731 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 19:03:36.275 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 19:03:36.277 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 19:03:36.277 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 19:03:36.278 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 19:03:36.278 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 19:03:36.278 +03:00 [DBG] Error Url: /home/error
2020-07-27 19:03:36.278 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 19:03:36.334 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:03:36.341 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:03:36.646 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:03:36.656 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:03:36.656 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:03:36.656 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:03:36.662 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:03:36.664 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:03:36.664 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:03:36.664 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:03:36.698 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:03:36.699 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:03:36.730 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:03:36.731 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:29.758 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 19:09:29.791 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 19:09:29.791 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 19:09:29.791 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 19:09:29.792 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 19:09:29.792 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 19:09:29.792 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 19:09:31.221 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 19:09:31.224 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 19:09:31.224 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 19:09:31.225 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 19:09:31.225 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 19:09:31.225 +03:00 [DBG] Error Url: /home/error
2020-07-27 19:09:31.225 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 19:09:31.279 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:31.286 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:31.589 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:31.589 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:31.589 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:31.589 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:31.596 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:31.603 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:31.603 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:31.603 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:31.638 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:31.639 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:31.667 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:31.668 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:34.758 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:34.759 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:34.869 +03:00 [INF] {"Username":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HM1I8TORNNJH:00000011","TimeStamp":"2020-07-27T16:09:34.0000000Z","ProcessId":14912,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2020-07-27 19:09:34.959 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:34.959 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:34.961 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:34.963 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:34.999 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:34.999 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:35.000 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:09:35.001 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:17:46.925 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 19:17:46.955 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 19:17:46.955 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 19:17:46.956 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 19:17:46.956 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 19:17:46.956 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 19:17:46.956 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 19:17:48.141 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 19:17:48.143 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 19:17:48.143 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 19:17:48.143 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 19:17:48.143 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 19:17:48.144 +03:00 [DBG] Error Url: /home/error
2020-07-27 19:17:48.144 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 19:17:48.203 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:17:48.212 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:17:48.542 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:17:48.542 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:17:48.542 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:17:48.552 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:17:48.553 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:17:48.557 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:17:48.557 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:17:48.557 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:17:48.657 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:17:48.658 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:17:53.774 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:17:53.776 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:17:53.799 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:17:53.800 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:18:17.232 +03:00 [INF] Removing 0 grants
2020-07-27 19:18:17.242 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:18:47.255 +03:00 [INF] Removing 0 grants
2020-07-27 19:18:47.257 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:19:17.274 +03:00 [INF] Removing 0 grants
2020-07-27 19:19:17.277 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:19:47.291 +03:00 [INF] Removing 0 grants
2020-07-27 19:19:47.293 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:20:17.301 +03:00 [INF] Removing 0 grants
2020-07-27 19:20:17.303 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:20:47.316 +03:00 [INF] Removing 0 grants
2020-07-27 19:20:47.319 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:21:17.331 +03:00 [INF] Removing 0 grants
2020-07-27 19:21:17.333 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:21:47.348 +03:00 [INF] Removing 0 grants
2020-07-27 19:21:47.349 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:22:17.363 +03:00 [INF] Removing 0 grants
2020-07-27 19:22:17.365 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:22:47.377 +03:00 [INF] Removing 0 grants
2020-07-27 19:22:47.378 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:22:52.651 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:22:52.652 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:22:52.758 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:22:52.757 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:22:52.758 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:22:52.767 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:22:52.767 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:22:52.767 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:22:52.769 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:22:52.770 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:22:52.828 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:22:52.855 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:22:52.854 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:22:52.856 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:22:52.879 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:22:52.880 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:23:17.393 +03:00 [INF] Removing 0 grants
2020-07-27 19:23:17.395 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:23:47.416 +03:00 [INF] Removing 0 grants
2020-07-27 19:23:47.427 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:24:47.394 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 19:24:47.425 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 19:24:47.425 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 19:24:47.425 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 19:24:47.426 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 19:24:47.426 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 19:24:47.427 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 19:24:48.755 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 19:24:48.758 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 19:24:48.758 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 19:24:48.759 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 19:24:48.759 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 19:24:48.759 +03:00 [DBG] Error Url: /home/error
2020-07-27 19:24:48.759 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 19:24:48.828 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:24:48.836 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:24:49.089 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:24:49.100 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:24:49.101 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:24:49.104 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:25:17.734 +03:00 [INF] Removing 0 grants
2020-07-27 19:25:17.746 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:25:47.762 +03:00 [INF] Removing 0 grants
2020-07-27 19:25:47.763 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:26:17.783 +03:00 [INF] Removing 0 grants
2020-07-27 19:26:17.789 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:26:28.340 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 19:26:28.371 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 19:26:28.371 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 19:26:28.372 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 19:26:28.372 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 19:26:28.372 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 19:26:28.373 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 19:26:29.498 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 19:26:29.500 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 19:26:29.501 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 19:26:29.501 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 19:26:29.501 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 19:26:29.502 +03:00 [DBG] Error Url: /home/error
2020-07-27 19:26:29.502 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 19:26:29.557 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:26:29.563 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:26:29.820 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:26:29.820 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:26:29.821 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:26:29.823 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:26:29.866 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:26:29.867 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:26:58.640 +03:00 [INF] Removing 0 grants
2020-07-27 19:26:58.650 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:27:28.664 +03:00 [INF] Removing 0 grants
2020-07-27 19:27:28.665 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:27:58.679 +03:00 [INF] Removing 0 grants
2020-07-27 19:27:58.682 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:28:23.589 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:28:23.590 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:28:23.645 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:28:23.654 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:28:23.654 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:28:23.655 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:28:33.263 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 19:28:33.292 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 19:28:33.293 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 19:28:33.293 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 19:28:33.293 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 19:28:33.294 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 19:28:33.294 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 19:28:34.632 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 19:28:34.633 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 19:28:34.634 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 19:28:34.634 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 19:28:34.634 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 19:28:34.634 +03:00 [DBG] Error Url: /home/error
2020-07-27 19:28:34.634 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 19:28:34.687 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:28:34.694 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:28:34.970 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:28:34.970 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:28:34.975 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:28:34.977 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:29:02.416 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 19:29:02.447 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 19:29:02.448 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 19:29:02.448 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 19:29:02.448 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 19:29:02.448 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 19:29:02.449 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 19:29:03.911 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 19:29:03.913 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 19:29:03.913 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 19:29:03.914 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 19:29:03.914 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 19:29:03.914 +03:00 [DBG] Error Url: /home/error
2020-07-27 19:29:03.914 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 19:29:03.967 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:29:03.974 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:29:04.243 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:29:04.243 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:29:04.245 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:29:04.247 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:29:30.568 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:29:30.571 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:29:32.744 +03:00 [INF] Removing 0 grants
2020-07-27 19:29:32.753 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:29:33.979 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:29:33.981 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:30:02.759 +03:00 [INF] Removing 0 grants
2020-07-27 19:30:02.761 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:30:21.895 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 19:30:21.925 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 19:30:21.926 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 19:30:21.926 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 19:30:21.926 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 19:30:21.927 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 19:30:21.927 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 19:30:23.178 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 19:30:23.180 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 19:30:23.180 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 19:30:23.180 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 19:30:23.180 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 19:30:23.181 +03:00 [DBG] Error Url: /home/error
2020-07-27 19:30:23.181 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 19:30:23.234 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:30:23.241 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:30:23.482 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:30:23.493 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:30:23.493 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:30:23.496 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:30:49.839 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:30:49.840 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:30:49.967 +03:00 [INF] {"Username":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HM1I99DV455A:00000007","TimeStamp":"2020-07-27T16:30:49.0000000Z","ProcessId":42932,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2020-07-27 19:30:50.041 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:30:50.060 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:30:50.060 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:30:50.061 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:30:52.147 +03:00 [INF] Removing 0 grants
2020-07-27 19:30:52.156 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:31:22.166 +03:00 [INF] Removing 0 grants
2020-07-27 19:31:22.168 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:31:52.184 +03:00 [INF] Removing 0 grants
2020-07-27 19:31:52.188 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:32:11.956 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:32:11.957 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:32:12.018 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1I99DV455A:0000000D","TimeStamp":"2020-07-27T16:32:12.0000000Z","ProcessId":42932,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-27 19:32:12.029 +03:00 [DBG] Augmenting SignInContext
2020-07-27 19:32:12.030 +03:00 [DBG] Adding idp claim with value: local
2020-07-27 19:32:12.030 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-27 19:32:12.030 +03:00 [DBG] Adding auth_time claim with value: 1595867532
2020-07-27 19:32:12.032 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 19:32:12.042 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-27 19:32:22.193 +03:00 [INF] Removing 0 grants
2020-07-27 19:32:22.194 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:32:33.455 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-27 19:32:33.457 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-27 19:32:33.458 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-27 19:32:33.798 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Value cannot be null or empty. (Parameter 'url')
   at Microsoft.AspNetCore.Mvc.ControllerBase.Redirect(String url)
   at IdentityServer.Controllers.AccountController.Logout(String logoutId) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 215
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-27 19:32:33.831 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-27 19:32:52.208 +03:00 [INF] Removing 0 grants
2020-07-27 19:32:52.211 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:33:37.628 +03:00 [INF] Removing 0 grants
2020-07-27 19:33:37.679 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:33:37.681 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-27 19:33:37.682 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-27 19:33:37.683 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-27 19:33:59.844 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Value cannot be null or empty. (Parameter 'url')
   at Microsoft.AspNetCore.Mvc.ControllerBase.Redirect(String url)
   at IdentityServer.Controllers.AccountController.Logout(String logoutId) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 215
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-27 19:33:59.852 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-27 19:34:07.692 +03:00 [INF] Removing 0 grants
2020-07-27 19:34:07.695 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:34:37.708 +03:00 [INF] Removing 0 grants
2020-07-27 19:34:37.710 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:35:07.720 +03:00 [INF] Removing 0 grants
2020-07-27 19:35:07.722 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:35:37.744 +03:00 [INF] Removing 0 grants
2020-07-27 19:35:37.746 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:36:07.755 +03:00 [INF] Removing 0 grants
2020-07-27 19:36:07.756 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:36:33.181 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-27 19:36:33.182 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-27 19:36:33.183 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-27 19:36:33.487 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Value cannot be null or empty. (Parameter 'url')
   at Microsoft.AspNetCore.Mvc.ControllerBase.Redirect(String url)
   at IdentityServer.Controllers.AccountController.Logout(String logoutId) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 215
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-27 19:36:33.491 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-27 19:36:37.774 +03:00 [INF] Removing 0 grants
2020-07-27 19:36:37.775 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:37:07.778 +03:00 [INF] Removing 0 grants
2020-07-27 19:37:07.779 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:37:37.783 +03:00 [INF] Removing 0 grants
2020-07-27 19:37:37.788 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:38:07.803 +03:00 [INF] Removing 0 grants
2020-07-27 19:38:07.805 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:38:37.816 +03:00 [INF] Removing 0 grants
2020-07-27 19:38:37.823 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:39:07.838 +03:00 [INF] Removing 0 grants
2020-07-27 19:39:07.841 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:39:37.847 +03:00 [INF] Removing 0 grants
2020-07-27 19:39:37.848 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:40:07.865 +03:00 [INF] Removing 0 grants
2020-07-27 19:40:07.866 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:40:37.879 +03:00 [INF] Removing 0 grants
2020-07-27 19:40:37.880 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:41:07.893 +03:00 [INF] Removing 0 grants
2020-07-27 19:41:07.894 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:41:37.897 +03:00 [INF] Removing 0 grants
2020-07-27 19:41:37.898 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:42:07.912 +03:00 [INF] Removing 0 grants
2020-07-27 19:42:07.930 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:42:37.942 +03:00 [INF] Removing 0 grants
2020-07-27 19:42:37.943 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:43:07.958 +03:00 [INF] Removing 0 grants
2020-07-27 19:43:07.964 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:43:37.986 +03:00 [INF] Removing 0 grants
2020-07-27 19:43:37.988 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:44:08.003 +03:00 [INF] Removing 0 grants
2020-07-27 19:44:08.004 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:44:38.012 +03:00 [INF] Removing 0 grants
2020-07-27 19:44:38.013 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:45:08.023 +03:00 [INF] Removing 0 grants
2020-07-27 19:45:08.024 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:45:38.035 +03:00 [INF] Removing 0 grants
2020-07-27 19:45:38.036 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:46:08.037 +03:00 [INF] Removing 0 grants
2020-07-27 19:46:08.038 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:46:38.048 +03:00 [INF] Removing 0 grants
2020-07-27 19:46:38.049 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:47:08.051 +03:00 [INF] Removing 0 grants
2020-07-27 19:47:08.052 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:47:38.064 +03:00 [INF] Removing 0 grants
2020-07-27 19:47:38.065 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:48:08.075 +03:00 [INF] Removing 0 grants
2020-07-27 19:48:08.079 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:48:18.027 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 19:48:18.056 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 19:48:18.056 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 19:48:18.057 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 19:48:18.057 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 19:48:18.057 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 19:48:18.058 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 19:48:19.266 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 19:48:19.269 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 19:48:19.269 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 19:48:19.269 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 19:48:19.270 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 19:48:19.270 +03:00 [DBG] Error Url: /home/error
2020-07-27 19:48:19.270 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 19:48:46.148 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1I9JEM8JML:00000009","TimeStamp":"2020-07-27T16:48:46.0000000Z","ProcessId":38264,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-27 19:48:46.170 +03:00 [DBG] Augmenting SignInContext
2020-07-27 19:48:46.171 +03:00 [DBG] Adding idp claim with value: local
2020-07-27 19:48:46.171 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-27 19:48:46.172 +03:00 [DBG] Adding auth_time claim with value: 1595868526
2020-07-27 19:48:46.183 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-27 19:48:48.263 +03:00 [INF] Removing 0 grants
2020-07-27 19:48:48.272 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:48:55.933 +03:00 [WRN] Invalid password for user 65886359-073C-434B-AD2D-A3932222DABE.
2020-07-27 19:48:55.935 +03:00 [INF] {"Username":"alice@email.com","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HM1I9JEM8JML:00000013","TimeStamp":"2020-07-27T16:48:55.0000000Z","ProcessId":38264,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2020-07-27 19:49:05.865 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1I9JEM8JML:0000001B","TimeStamp":"2020-07-27T16:49:05.0000000Z","ProcessId":38264,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-27 19:49:05.869 +03:00 [DBG] Augmenting SignInContext
2020-07-27 19:49:05.869 +03:00 [DBG] Adding idp claim with value: local
2020-07-27 19:49:05.870 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-27 19:49:05.871 +03:00 [DBG] Adding auth_time claim with value: 1595868545
2020-07-27 19:49:05.871 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-27 19:49:18.287 +03:00 [INF] Removing 0 grants
2020-07-27 19:49:18.289 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:49:31.653 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1I9JEM8JML:0000002B","TimeStamp":"2020-07-27T16:49:31.0000000Z","ProcessId":38264,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-27 19:49:31.656 +03:00 [DBG] Augmenting SignInContext
2020-07-27 19:49:31.656 +03:00 [DBG] Adding idp claim with value: local
2020-07-27 19:49:31.660 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-27 19:49:31.660 +03:00 [DBG] Adding auth_time claim with value: 1595868571
2020-07-27 19:49:31.661 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-27 19:49:48.300 +03:00 [INF] Removing 0 grants
2020-07-27 19:49:48.302 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:50:18.316 +03:00 [INF] Removing 0 grants
2020-07-27 19:50:18.318 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:50:51.537 +03:00 [INF] Removing 0 grants
2020-07-27 19:50:51.539 +03:00 [INF] {"Username":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HM1I9JEM8JML:00000033","TimeStamp":"2020-07-27T16:50:51.0000000Z","ProcessId":38264,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2020-07-27 19:50:51.542 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:51:22.747 +03:00 [INF] Removing 0 grants
2020-07-27 19:51:22.762 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:51:35.199 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1I9JEM8JML:00000039","TimeStamp":"2020-07-27T16:51:35.0000000Z","ProcessId":38264,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-27 19:51:42.917 +03:00 [DBG] Augmenting SignInContext
2020-07-27 19:51:42.918 +03:00 [DBG] Adding idp claim with value: local
2020-07-27 19:51:42.918 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-27 19:51:42.919 +03:00 [DBG] Adding auth_time claim with value: 1595868702
2020-07-27 19:51:42.919 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-27 19:51:53.053 +03:00 [INF] Removing 0 grants
2020-07-27 19:51:56.212 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:52:26.238 +03:00 [INF] Removing 0 grants
2020-07-27 19:52:26.240 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:52:34.004 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-27 19:52:34.005 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-27 19:52:34.006 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-27 19:52:35.140 +03:00 [INF] {"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1I9JEM8JML:00000043","TimeStamp":"2020-07-27T16:52:35.0000000Z","ProcessId":38264,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-27 19:52:59.071 +03:00 [INF] Removing 0 grants
2020-07-27 19:52:59.105 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:52:59.845 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Value cannot be null or empty. (Parameter 'url')
   at Microsoft.AspNetCore.Mvc.ControllerBase.Redirect(String url)
   at IdentityServer.Controllers.AccountController.Logout(String logoutId) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 226
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-27 19:52:59.883 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-27 19:53:29.128 +03:00 [INF] Removing 0 grants
2020-07-27 19:53:29.130 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:53:52.995 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 19:53:53.024 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 19:53:53.025 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 19:53:53.025 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 19:53:53.025 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 19:53:53.025 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 19:53:53.026 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 19:53:54.246 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 19:53:54.249 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 19:53:54.249 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 19:53:54.249 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 19:53:54.249 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 19:53:54.250 +03:00 [DBG] Error Url: /home/error
2020-07-27 19:53:54.250 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 19:54:18.153 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-27 19:54:18.155 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-27 19:54:18.155 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-27 19:54:18.928 +03:00 [INF] {"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1I9MIH2LUU:00000009","TimeStamp":"2020-07-27T16:54:18.0000000Z","ProcessId":39880,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-27 19:54:23.616 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type 'System.String', but this ViewDataDictionary instance requires a model item of type 'IdentityServer.Models.LoginViewModel'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-27 19:54:23.654 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-27 19:54:23.814 +03:00 [INF] Removing 0 grants
2020-07-27 19:54:23.824 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:54:53.841 +03:00 [INF] Removing 0 grants
2020-07-27 19:54:53.843 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:55:14.472 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 19:55:14.508 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 19:55:14.508 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 19:55:14.509 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 19:55:14.509 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 19:55:14.509 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 19:55:14.510 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 19:55:15.816 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 19:55:15.818 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 19:55:15.818 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 19:55:15.818 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 19:55:15.818 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 19:55:15.819 +03:00 [DBG] Error Url: /home/error
2020-07-27 19:55:15.819 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 19:55:28.988 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-27 19:55:28.989 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-27 19:55:28.990 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-27 19:55:28.998 +03:00 [INF] {"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1I9NAPJ4CR:00000009","TimeStamp":"2020-07-27T16:55:28.0000000Z","ProcessId":29088,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-27 19:56:15.727 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 19:56:15.757 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 19:56:15.757 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 19:56:15.757 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 19:56:15.758 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 19:56:15.758 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 19:56:15.758 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 19:56:17.045 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 19:56:17.047 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 19:56:17.047 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 19:56:17.048 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 19:56:17.048 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 19:56:17.048 +03:00 [DBG] Error Url: /home/error
2020-07-27 19:56:17.049 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 19:56:25.761 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-27 19:56:25.762 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-27 19:56:25.763 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-27 19:56:25.773 +03:00 [INF] {"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1I9NT2LHUF:00000009","TimeStamp":"2020-07-27T16:56:25.0000000Z","ProcessId":33812,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-27 19:56:26.242 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type 'System.String', but this ViewDataDictionary instance requires a model item of type 'IdentityServer.Models.LoginViewModel'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-27 19:56:26.276 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-27 19:56:40.738 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-27 19:56:40.740 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-27 19:56:40.741 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-27 19:56:40.741 +03:00 [INF] {"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1I9NT2LHUF:0000000B","TimeStamp":"2020-07-27T16:56:40.0000000Z","ProcessId":33812,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-27 19:56:41.149 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type 'System.String', but this ViewDataDictionary instance requires a model item of type 'IdentityServer.Models.LoginViewModel'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-27 19:56:41.155 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-27 19:56:46.032 +03:00 [INF] Removing 0 grants
2020-07-27 19:56:46.041 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:57:16.057 +03:00 [INF] Removing 0 grants
2020-07-27 19:57:16.058 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:57:46.075 +03:00 [INF] Removing 0 grants
2020-07-27 19:57:46.079 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:58:16.082 +03:00 [INF] Removing 0 grants
2020-07-27 19:58:16.084 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:58:46.103 +03:00 [INF] Removing 0 grants
2020-07-27 19:58:46.105 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:59:16.119 +03:00 [INF] Removing 0 grants
2020-07-27 19:59:16.122 +03:00 [INF] Removing 0 device flow codes
2020-07-27 19:59:46.136 +03:00 [INF] Removing 0 grants
2020-07-27 19:59:46.138 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:00:16.144 +03:00 [INF] Removing 0 grants
2020-07-27 20:00:16.146 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:00:45.353 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 20:00:45.388 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 20:00:45.388 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 20:00:45.389 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 20:00:45.389 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 20:00:45.389 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 20:00:45.389 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 20:00:46.526 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 20:00:46.528 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 20:00:46.528 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 20:00:46.528 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 20:00:46.528 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 20:00:46.529 +03:00 [DBG] Error Url: /home/error
2020-07-27 20:00:46.529 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 20:00:46.583 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 20:00:46.589 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 20:00:53.620 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 20:00:53.621 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 20:00:54.797 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 20:00:54.806 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 20:00:54.808 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 20:00:54.808 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 20:00:54.851 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 20:00:54.851 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 20:01:15.658 +03:00 [INF] Removing 0 grants
2020-07-27 20:01:15.669 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:01:24.807 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 20:01:24.808 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 20:01:27.312 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1I9QDCHCQR:0000000B","TimeStamp":"2020-07-27T17:01:27.0000000Z","ProcessId":39260,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-27 20:01:27.332 +03:00 [DBG] Augmenting SignInContext
2020-07-27 20:01:27.333 +03:00 [DBG] Adding idp claim with value: local
2020-07-27 20:01:27.334 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-27 20:01:27.335 +03:00 [DBG] Adding auth_time claim with value: 1595869287
2020-07-27 20:01:27.337 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-27 20:01:27.342 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-27 20:01:47.450 +03:00 [INF] Removing 0 grants
2020-07-27 20:01:47.452 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:02:17.460 +03:00 [INF] Removing 0 grants
2020-07-27 20:02:17.465 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:02:56.950 +03:00 [INF] Removing 0 grants
2020-07-27 20:02:56.951 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:03:26.957 +03:00 [INF] Removing 0 grants
2020-07-27 20:03:26.960 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:03:56.973 +03:00 [INF] Removing 0 grants
2020-07-27 20:03:56.976 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:04:26.989 +03:00 [INF] Removing 0 grants
2020-07-27 20:04:26.992 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:04:57.005 +03:00 [INF] Removing 0 grants
2020-07-27 20:04:57.007 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:05:27.020 +03:00 [INF] Removing 0 grants
2020-07-27 20:05:27.022 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:05:47.277 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 20:05:47.305 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 20:05:47.306 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 20:05:47.306 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 20:05:47.306 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 20:05:47.307 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 20:05:47.307 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 20:05:48.459 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 20:05:48.461 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 20:05:48.461 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 20:05:48.462 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 20:05:48.462 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 20:05:48.462 +03:00 [DBG] Error Url: /home/error
2020-07-27 20:05:48.462 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 20:06:17.577 +03:00 [INF] Removing 0 grants
2020-07-27 20:06:17.586 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:06:47.603 +03:00 [INF] Removing 0 grants
2020-07-27 20:06:47.605 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:06:56.423 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 20:06:56.451 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 20:06:56.452 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 20:06:56.452 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 20:06:56.452 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 20:06:56.453 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 20:06:56.453 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 20:06:57.585 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 20:06:57.644 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 20:06:57.645 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 20:06:57.645 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 20:06:57.645 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 20:06:57.646 +03:00 [DBG] Error Url: /home/error
2020-07-27 20:06:57.646 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 20:07:26.785 +03:00 [INF] Removing 0 grants
2020-07-27 20:07:26.795 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:07:56.804 +03:00 [INF] Removing 0 grants
2020-07-27 20:07:56.806 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:08:11.962 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 20:08:11.991 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 20:08:11.991 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 20:08:11.991 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 20:08:11.992 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 20:08:11.993 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 20:08:11.993 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 20:08:13.168 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 20:08:13.170 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 20:08:13.170 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 20:08:13.170 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 20:08:13.170 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 20:08:13.171 +03:00 [DBG] Error Url: /home/error
2020-07-27 20:08:13.171 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 20:08:20.914 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-27 20:08:20.916 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-27 20:08:20.916 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-27 20:08:21.185 +03:00 [INF] {"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1I9UIGB4QJ:00000009","TimeStamp":"2020-07-27T17:08:21.0000000Z","ProcessId":41884,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-27 20:08:30.714 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-27 20:08:42.327 +03:00 [INF] Removing 0 grants
2020-07-27 20:08:42.339 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:09:01.055 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type 'IdentityServer.Models.LoginViewModel', but this ViewDataDictionary instance requires a model item of type 'IdentityServer.Models.RegisterViewModel'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-27 20:09:12.354 +03:00 [INF] Removing 0 grants
2020-07-27 20:09:12.356 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:09:42.374 +03:00 [INF] Removing 0 grants
2020-07-27 20:09:42.378 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:10:12.384 +03:00 [INF] Removing 0 grants
2020-07-27 20:10:12.387 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:10:42.406 +03:00 [INF] Removing 0 grants
2020-07-27 20:10:42.412 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:11:12.429 +03:00 [INF] Removing 0 grants
2020-07-27 20:11:12.431 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:11:42.450 +03:00 [INF] Removing 0 grants
2020-07-27 20:11:42.458 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:12:12.467 +03:00 [INF] Removing 0 grants
2020-07-27 20:12:12.469 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:12:42.480 +03:00 [INF] Removing 0 grants
2020-07-27 20:12:42.482 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:13:12.488 +03:00 [INF] Removing 0 grants
2020-07-27 20:13:12.490 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:13:42.491 +03:00 [INF] Removing 0 grants
2020-07-27 20:13:42.493 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:14:12.504 +03:00 [INF] Removing 0 grants
2020-07-27 20:14:12.507 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:14:42.519 +03:00 [INF] Removing 0 grants
2020-07-27 20:14:42.522 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:15:12.526 +03:00 [INF] Removing 0 grants
2020-07-27 20:15:12.528 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:15:42.541 +03:00 [INF] Removing 0 grants
2020-07-27 20:15:42.544 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:16:12.552 +03:00 [INF] Removing 0 grants
2020-07-27 20:16:12.553 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:16:42.570 +03:00 [INF] Removing 0 grants
2020-07-27 20:16:42.572 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:17:12.581 +03:00 [INF] Removing 0 grants
2020-07-27 20:17:12.582 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:17:42.587 +03:00 [INF] Removing 0 grants
2020-07-27 20:17:42.588 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:18:12.603 +03:00 [INF] Removing 0 grants
2020-07-27 20:18:12.608 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:18:42.618 +03:00 [INF] Removing 0 grants
2020-07-27 20:18:42.620 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:19:12.632 +03:00 [INF] Removing 0 grants
2020-07-27 20:19:12.636 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:19:42.649 +03:00 [INF] Removing 0 grants
2020-07-27 20:19:42.651 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:20:12.658 +03:00 [INF] Removing 0 grants
2020-07-27 20:20:12.661 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:20:42.676 +03:00 [INF] Removing 0 grants
2020-07-27 20:20:42.678 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:21:12.682 +03:00 [INF] Removing 0 grants
2020-07-27 20:21:12.683 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:21:42.700 +03:00 [INF] Removing 0 grants
2020-07-27 20:21:42.701 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:22:12.709 +03:00 [INF] Removing 0 grants
2020-07-27 20:22:12.711 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:22:42.723 +03:00 [INF] Removing 0 grants
2020-07-27 20:22:42.724 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:23:12.730 +03:00 [INF] Removing 0 grants
2020-07-27 20:23:12.731 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:23:42.738 +03:00 [INF] Removing 0 grants
2020-07-27 20:23:42.739 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:24:12.751 +03:00 [INF] Removing 0 grants
2020-07-27 20:24:12.753 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:24:42.767 +03:00 [INF] Removing 0 grants
2020-07-27 20:24:42.767 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:25:12.786 +03:00 [INF] Removing 0 grants
2020-07-27 20:25:12.787 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:25:42.798 +03:00 [INF] Removing 0 grants
2020-07-27 20:25:42.800 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:26:12.803 +03:00 [INF] Removing 0 grants
2020-07-27 20:26:12.805 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:26:42.815 +03:00 [INF] Removing 0 grants
2020-07-27 20:26:42.817 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:27:12.830 +03:00 [INF] Removing 0 grants
2020-07-27 20:27:12.832 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:27:42.837 +03:00 [INF] Removing 0 grants
2020-07-27 20:27:42.838 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:28:12.845 +03:00 [INF] Removing 0 grants
2020-07-27 20:28:12.846 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:28:42.853 +03:00 [INF] Removing 0 grants
2020-07-27 20:28:42.855 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:43:51.230 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 20:43:51.259 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 20:43:51.260 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 20:43:51.260 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 20:43:51.260 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 20:43:51.261 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 20:43:51.261 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 20:43:52.672 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 20:43:52.674 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 20:43:52.674 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 20:43:52.674 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 20:43:52.674 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 20:43:52.675 +03:00 [DBG] Error Url: /home/error
2020-07-27 20:43:52.675 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 20:44:21.522 +03:00 [INF] Removing 0 grants
2020-07-27 20:44:21.532 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:44:51.542 +03:00 [INF] Removing 0 grants
2020-07-27 20:44:51.544 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:45:21.561 +03:00 [INF] Removing 0 grants
2020-07-27 20:45:21.564 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:45:51.570 +03:00 [INF] Removing 0 grants
2020-07-27 20:45:51.571 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:46:21.581 +03:00 [INF] Removing 0 grants
2020-07-27 20:46:21.583 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:46:51.600 +03:00 [INF] Removing 0 grants
2020-07-27 20:46:51.601 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:47:21.615 +03:00 [INF] Removing 0 grants
2020-07-27 20:47:21.617 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:47:51.638 +03:00 [INF] Removing 0 grants
2020-07-27 20:47:51.641 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:48:20.208 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 20:48:20.242 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 20:48:20.242 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 20:48:20.242 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 20:48:20.242 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 20:48:20.243 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 20:48:20.243 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 20:48:21.684 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 20:48:21.685 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 20:48:21.686 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 20:48:21.686 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 20:48:21.686 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 20:48:21.686 +03:00 [DBG] Error Url: /home/error
2020-07-27 20:48:21.687 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 20:48:50.540 +03:00 [INF] Removing 0 grants
2020-07-27 20:48:50.550 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:49:20.569 +03:00 [INF] Removing 0 grants
2020-07-27 20:49:20.570 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:49:50.589 +03:00 [INF] Removing 0 grants
2020-07-27 20:49:50.592 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:50:20.618 +03:00 [INF] Removing 0 grants
2020-07-27 20:50:20.625 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:50:50.629 +03:00 [INF] Removing 0 grants
2020-07-27 20:50:50.630 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:51:20.647 +03:00 [INF] Removing 0 grants
2020-07-27 20:51:20.649 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:51:50.659 +03:00 [INF] Removing 0 grants
2020-07-27 20:51:50.661 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:52:20.675 +03:00 [INF] Removing 0 grants
2020-07-27 20:52:20.677 +03:00 [INF] Removing 0 device flow codes
2020-07-27 20:52:50.693 +03:00 [INF] Removing 0 grants
2020-07-27 20:52:50.695 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:38:46.222 +03:00 [INF] Removing 0 grants
2020-07-27 22:38:46.223 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:39:16.230 +03:00 [INF] Removing 0 grants
2020-07-27 22:39:16.234 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:39:46.240 +03:00 [INF] Removing 0 grants
2020-07-27 22:39:46.242 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:40:16.246 +03:00 [INF] Removing 0 grants
2020-07-27 22:40:16.248 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:40:46.264 +03:00 [INF] Removing 0 grants
2020-07-27 22:40:46.265 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:41:16.272 +03:00 [INF] Removing 0 grants
2020-07-27 22:41:16.274 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:41:46.277 +03:00 [INF] Removing 0 grants
2020-07-27 22:41:46.279 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:42:16.285 +03:00 [INF] Removing 0 grants
2020-07-27 22:42:16.286 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:42:46.292 +03:00 [INF] Removing 0 grants
2020-07-27 22:42:46.294 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:43:16.307 +03:00 [INF] Removing 0 grants
2020-07-27 22:43:16.308 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:43:46.316 +03:00 [INF] Removing 0 grants
2020-07-27 22:43:46.316 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:44:16.323 +03:00 [INF] Removing 0 grants
2020-07-27 22:44:16.324 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:44:46.340 +03:00 [INF] Removing 0 grants
2020-07-27 22:44:46.341 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:45:16.346 +03:00 [INF] Removing 0 grants
2020-07-27 22:45:16.348 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:45:46.363 +03:00 [INF] Removing 0 grants
2020-07-27 22:45:46.366 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:46:16.372 +03:00 [INF] Removing 0 grants
2020-07-27 22:46:16.373 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:46:46.384 +03:00 [INF] Removing 0 grants
2020-07-27 22:46:46.420 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:47:16.422 +03:00 [INF] Removing 0 grants
2020-07-27 22:47:16.423 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:47:46.433 +03:00 [INF] Removing 0 grants
2020-07-27 22:47:46.434 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:48:16.444 +03:00 [INF] Removing 0 grants
2020-07-27 22:48:16.445 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:48:46.448 +03:00 [INF] Removing 0 grants
2020-07-27 22:48:46.449 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:49:16.461 +03:00 [INF] Removing 0 grants
2020-07-27 22:49:16.462 +03:00 [INF] Removing 0 device flow codes
2020-07-27 22:49:46.463 +03:00 [INF] Removing 0 grants
2020-07-27 22:49:46.464 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:01:10.857 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 23:01:10.887 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 23:01:10.887 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 23:01:10.888 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 23:01:10.888 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 23:01:10.889 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 23:01:10.889 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 23:01:12.041 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 23:01:12.042 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 23:01:12.043 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 23:01:12.043 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 23:01:12.043 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 23:01:12.043 +03:00 [DBG] Error Url: /home/error
2020-07-27 23:01:12.043 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 23:01:41.156 +03:00 [INF] Removing 0 grants
2020-07-27 23:01:41.166 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:01:48.458 +03:00 [ERR] The view 'alice@email.com' was not found. Searched locations: ["/Views/Account/alice@email.com.cshtml","/Views/Shared/alice@email.com.cshtml","/Pages/Shared/alice@email.com.cshtml"]
2020-07-27 23:01:48.784 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'alice@email.com' was not found. The following locations were searched:
/Views/Account/alice@email.com.cshtml
/Views/Shared/alice@email.com.cshtml
/Pages/Shared/alice@email.com.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-27 23:01:48.856 +03:00 [ERR] An exception was thrown attempting to execute the error handler.
System.InvalidOperationException: Invalid non-ASCII or control character in header: 0x000D
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowInvalidHeaderCharacter(Char ch)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ValidateHeaderValueCharacters(StringValues headerValues)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.AddValueFast(String key, StringValues value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.System.Collections.Generic.IDictionary<System.String,Microsoft.Extensions.Primitives.StringValues>.Add(String key, StringValues value)
   at IdentityServer.Extensions.HttpResponseExtensions.AddApplicationError(HttpResponse response, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Extensions\HttpResponseExtensions.cs:line 13
   at IdentityServer.Startup.<>c.<<Configure>b__4_3>d.MoveNext() in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Startup.cs:line 123
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)
2020-07-27 23:01:48.902 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'alice@email.com' was not found. The following locations were searched:
/Views/Account/alice@email.com.cshtml
/Views/Shared/alice@email.com.cshtml
/Pages/Shared/alice@email.com.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-07-27 23:02:11.181 +03:00 [INF] Removing 0 grants
2020-07-27 23:02:11.182 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:02:41.194 +03:00 [INF] Removing 0 grants
2020-07-27 23:02:41.197 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:02:59.466 +03:00 [ERR] The view 'alice@email.com' was not found. Searched locations: ["/Views/Account/alice@email.com.cshtml","/Views/Shared/alice@email.com.cshtml","/Pages/Shared/alice@email.com.cshtml"]
2020-07-27 23:02:59.964 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'alice@email.com' was not found. The following locations were searched:
/Views/Account/alice@email.com.cshtml
/Views/Shared/alice@email.com.cshtml
/Pages/Shared/alice@email.com.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-27 23:03:00.010 +03:00 [ERR] An exception was thrown attempting to execute the error handler.
System.InvalidOperationException: Invalid non-ASCII or control character in header: 0x000D
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowInvalidHeaderCharacter(Char ch)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ValidateHeaderValueCharacters(StringValues headerValues)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.AddValueFast(String key, StringValues value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.System.Collections.Generic.IDictionary<System.String,Microsoft.Extensions.Primitives.StringValues>.Add(String key, StringValues value)
   at IdentityServer.Extensions.HttpResponseExtensions.AddApplicationError(HttpResponse response, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Extensions\HttpResponseExtensions.cs:line 13
   at IdentityServer.Startup.<>c.<<Configure>b__4_3>d.MoveNext() in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Startup.cs:line 123
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)
2020-07-27 23:03:00.069 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'alice@email.com' was not found. The following locations were searched:
/Views/Account/alice@email.com.cshtml
/Views/Shared/alice@email.com.cshtml
/Pages/Shared/alice@email.com.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-07-27 23:03:11.213 +03:00 [INF] Removing 0 grants
2020-07-27 23:03:11.214 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:04:03.063 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 23:04:03.095 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 23:04:03.095 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 23:04:03.096 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 23:04:03.096 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 23:04:03.096 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 23:04:03.096 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 23:04:04.487 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 23:04:04.489 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 23:04:04.489 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 23:04:04.489 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 23:04:04.489 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 23:04:04.490 +03:00 [DBG] Error Url: /home/error
2020-07-27 23:04:04.490 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 23:04:33.372 +03:00 [INF] Removing 0 grants
2020-07-27 23:04:33.382 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:04:50.128 +03:00 [ERR] The view 'alice@email.com' was not found. Searched locations: ["/Views/Account/alice@email.com.cshtml","/Views/Shared/alice@email.com.cshtml","/Pages/Shared/alice@email.com.cshtml"]
2020-07-27 23:04:50.694 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'alice@email.com' was not found. The following locations were searched:
/Views/Account/alice@email.com.cshtml
/Views/Shared/alice@email.com.cshtml
/Pages/Shared/alice@email.com.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-27 23:04:50.767 +03:00 [ERR] An exception was thrown attempting to execute the error handler.
System.InvalidOperationException: Invalid non-ASCII or control character in header: 0x000D
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowInvalidHeaderCharacter(Char ch)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ValidateHeaderValueCharacters(StringValues headerValues)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.AddValueFast(String key, StringValues value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.System.Collections.Generic.IDictionary<System.String,Microsoft.Extensions.Primitives.StringValues>.Add(String key, StringValues value)
   at IdentityServer.Extensions.HttpResponseExtensions.AddApplicationError(HttpResponse response, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Extensions\HttpResponseExtensions.cs:line 13
   at IdentityServer.Startup.<>c.<<Configure>b__4_3>d.MoveNext() in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Startup.cs:line 123
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)
2020-07-27 23:04:50.828 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'alice@email.com' was not found. The following locations were searched:
/Views/Account/alice@email.com.cshtml
/Views/Shared/alice@email.com.cshtml
/Pages/Shared/alice@email.com.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-07-27 23:05:03.389 +03:00 [INF] Removing 0 grants
2020-07-27 23:05:03.391 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:05:33.399 +03:00 [INF] Removing 0 grants
2020-07-27 23:05:33.402 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:09:10.032 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 23:09:10.067 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 23:09:10.067 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 23:09:10.068 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 23:09:10.068 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 23:09:10.068 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 23:09:10.068 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 23:09:11.170 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 23:09:11.171 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 23:09:11.172 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 23:09:11.172 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 23:09:11.172 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 23:09:11.173 +03:00 [DBG] Error Url: /home/error
2020-07-27 23:09:11.173 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 23:09:27.893 +03:00 [ERR] The view 'alice@email.com' was not found. Searched locations: ["/Views/Account/alice@email.com.cshtml","/Views/Shared/alice@email.com.cshtml","/Pages/Shared/alice@email.com.cshtml"]
2020-07-27 23:09:28.196 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'alice@email.com' was not found. The following locations were searched:
/Views/Account/alice@email.com.cshtml
/Views/Shared/alice@email.com.cshtml
/Pages/Shared/alice@email.com.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-27 23:09:28.271 +03:00 [ERR] An exception was thrown attempting to execute the error handler.
System.InvalidOperationException: Invalid non-ASCII or control character in header: 0x000D
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowInvalidHeaderCharacter(Char ch)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ValidateHeaderValueCharacters(StringValues headerValues)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.AddValueFast(String key, StringValues value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.System.Collections.Generic.IDictionary<System.String,Microsoft.Extensions.Primitives.StringValues>.Add(String key, StringValues value)
   at IdentityServer.Extensions.HttpResponseExtensions.AddApplicationError(HttpResponse response, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Extensions\HttpResponseExtensions.cs:line 13
   at IdentityServer.Startup.<>c.<<Configure>b__4_3>d.MoveNext() in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Startup.cs:line 123
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)
2020-07-27 23:09:28.319 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'alice@email.com' was not found. The following locations were searched:
/Views/Account/alice@email.com.cshtml
/Views/Shared/alice@email.com.cshtml
/Pages/Shared/alice@email.com.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-07-27 23:09:40.305 +03:00 [INF] Removing 0 grants
2020-07-27 23:09:40.314 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:10:10.323 +03:00 [INF] Removing 0 grants
2020-07-27 23:10:10.325 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:10:40.333 +03:00 [INF] Removing 0 grants
2020-07-27 23:10:40.337 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:11:10.349 +03:00 [INF] Removing 0 grants
2020-07-27 23:11:10.350 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:11:40.355 +03:00 [INF] Removing 0 grants
2020-07-27 23:11:40.357 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:12:10.380 +03:00 [INF] Removing 0 grants
2020-07-27 23:12:10.383 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:12:40.393 +03:00 [INF] Removing 0 grants
2020-07-27 23:12:40.395 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:13:10.409 +03:00 [INF] Removing 0 grants
2020-07-27 23:13:10.412 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:13:40.419 +03:00 [INF] Removing 0 grants
2020-07-27 23:13:40.421 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:14:10.425 +03:00 [INF] Removing 0 grants
2020-07-27 23:14:10.426 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:14:40.441 +03:00 [INF] Removing 0 grants
2020-07-27 23:14:40.443 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:15:10.455 +03:00 [INF] Removing 0 grants
2020-07-27 23:15:10.457 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:15:40.472 +03:00 [INF] Removing 0 grants
2020-07-27 23:15:40.474 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:16:10.477 +03:00 [INF] Removing 0 grants
2020-07-27 23:16:10.479 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:17:11.792 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 23:17:11.825 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 23:17:11.825 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 23:17:11.825 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 23:17:11.826 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 23:17:11.826 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 23:17:11.826 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 23:17:12.936 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 23:17:12.939 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 23:17:12.939 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 23:17:12.939 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 23:17:12.940 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 23:17:12.940 +03:00 [DBG] Error Url: /home/error
2020-07-27 23:17:12.940 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 23:17:42.128 +03:00 [INF] Removing 0 grants
2020-07-27 23:17:42.138 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:18:12.166 +03:00 [INF] Removing 0 grants
2020-07-27 23:18:12.168 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:18:42.185 +03:00 [INF] Removing 0 grants
2020-07-27 23:18:42.189 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:19:06.668 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The model item passed into the ViewDataDictionary is of type 'IdentityServer.Models.LoginViewModel', but this ViewDataDictionary instance requires a model item of type 'IdentityServer.Models.RegisterViewModel'.
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary.EnsureCompatible(Object value)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary..ctor(ViewDataDictionary source, Object model, Type declaredModelType)
   at lambda_method(Closure , ViewDataDictionary )
   at Microsoft.AspNetCore.Mvc.Razor.RazorPagePropertyActivator.CreateViewDataDictionary(ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ActionContext actionContext, IView view, ViewDataDictionary viewData, ITempDataDictionary tempData, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-27 23:19:12.203 +03:00 [INF] Removing 0 grants
2020-07-27 23:19:12.209 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:19:42.221 +03:00 [INF] Removing 0 grants
2020-07-27 23:19:42.223 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:20:12.240 +03:00 [INF] Removing 0 grants
2020-07-27 23:20:12.243 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:20:42.254 +03:00 [INF] Removing 0 grants
2020-07-27 23:20:42.256 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:21:12.268 +03:00 [INF] Removing 0 grants
2020-07-27 23:21:12.270 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:21:42.284 +03:00 [INF] Removing 0 grants
2020-07-27 23:21:42.286 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:22:12.299 +03:00 [INF] Removing 0 grants
2020-07-27 23:22:12.301 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:22:42.316 +03:00 [INF] Removing 0 grants
2020-07-27 23:22:42.318 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:23:12.337 +03:00 [INF] Removing 0 grants
2020-07-27 23:23:12.343 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:23:42.348 +03:00 [INF] Removing 0 grants
2020-07-27 23:23:42.350 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:24:12.352 +03:00 [INF] Removing 0 grants
2020-07-27 23:24:12.355 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:24:42.368 +03:00 [INF] Removing 0 grants
2020-07-27 23:24:42.369 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:25:12.385 +03:00 [INF] Removing 0 grants
2020-07-27 23:25:12.387 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:25:42.402 +03:00 [INF] Removing 0 grants
2020-07-27 23:25:42.403 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:26:12.419 +03:00 [INF] Removing 0 grants
2020-07-27 23:26:12.420 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:26:42.423 +03:00 [INF] Removing 0 grants
2020-07-27 23:26:42.425 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:27:12.439 +03:00 [INF] Removing 0 grants
2020-07-27 23:27:12.441 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:27:42.455 +03:00 [INF] Removing 0 grants
2020-07-27 23:27:42.456 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:28:12.458 +03:00 [INF] Removing 0 grants
2020-07-27 23:28:12.459 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:28:42.470 +03:00 [INF] Removing 0 grants
2020-07-27 23:28:42.472 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:29:12.473 +03:00 [INF] Removing 0 grants
2020-07-27 23:29:12.474 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:29:42.488 +03:00 [INF] Removing 0 grants
2020-07-27 23:29:42.489 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:30:12.503 +03:00 [INF] Removing 0 grants
2020-07-27 23:30:12.504 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:30:42.508 +03:00 [INF] Removing 0 grants
2020-07-27 23:30:42.509 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:31:12.519 +03:00 [INF] Removing 0 grants
2020-07-27 23:31:12.520 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:31:42.532 +03:00 [INF] Removing 0 grants
2020-07-27 23:31:42.534 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:32:12.539 +03:00 [INF] Removing 0 grants
2020-07-27 23:32:12.540 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:32:42.549 +03:00 [INF] Removing 0 grants
2020-07-27 23:32:42.550 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:33:12.569 +03:00 [INF] Removing 0 grants
2020-07-27 23:33:12.573 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:33:42.584 +03:00 [INF] Removing 0 grants
2020-07-27 23:33:42.585 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:34:12.595 +03:00 [INF] Removing 0 grants
2020-07-27 23:34:12.597 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:34:42.611 +03:00 [INF] Removing 0 grants
2020-07-27 23:34:42.612 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:34:59.180 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 23:34:59.211 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 23:34:59.211 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 23:34:59.212 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 23:34:59.212 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 23:34:59.212 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 23:34:59.212 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 23:35:00.626 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 23:35:00.628 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 23:35:00.629 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 23:35:00.629 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 23:35:00.629 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 23:35:00.629 +03:00 [DBG] Error Url: /home/error
2020-07-27 23:35:00.629 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 23:35:29.479 +03:00 [INF] Removing 0 grants
2020-07-27 23:35:29.488 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:35:59.495 +03:00 [INF] Removing 0 grants
2020-07-27 23:35:59.498 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:36:29.517 +03:00 [INF] Removing 0 grants
2020-07-27 23:36:29.521 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:36:59.536 +03:00 [INF] Removing 0 grants
2020-07-27 23:36:59.538 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:37:29.550 +03:00 [INF] Removing 0 grants
2020-07-27 23:37:29.552 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:37:59.566 +03:00 [INF] Removing 0 grants
2020-07-27 23:37:59.568 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:38:29.580 +03:00 [INF] Removing 0 grants
2020-07-27 23:38:29.583 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:38:59.598 +03:00 [INF] Removing 0 grants
2020-07-27 23:38:59.599 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:39:29.615 +03:00 [INF] Removing 0 grants
2020-07-27 23:39:29.618 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:39:59.628 +03:00 [INF] Removing 0 grants
2020-07-27 23:39:59.629 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:54:29.120 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 23:54:29.151 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 23:54:29.151 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 23:54:29.152 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 23:54:29.152 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 23:54:29.152 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 23:54:29.153 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 23:54:30.460 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 23:54:30.462 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 23:54:30.462 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 23:54:30.462 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 23:54:30.462 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 23:54:30.462 +03:00 [DBG] Error Url: /home/error
2020-07-27 23:54:30.463 +03:00 [DBG] Error Id Parameter: errorId
2020-07-27 23:54:59.412 +03:00 [INF] Removing 0 grants
2020-07-27 23:54:59.422 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:55:29.431 +03:00 [INF] Removing 0 grants
2020-07-27 23:55:29.432 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:55:59.447 +03:00 [INF] Removing 0 grants
2020-07-27 23:55:59.450 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:56:29.464 +03:00 [INF] Removing 0 grants
2020-07-27 23:56:29.465 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:56:59.478 +03:00 [INF] Removing 0 grants
2020-07-27 23:56:59.480 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:57:29.494 +03:00 [INF] Removing 0 grants
2020-07-27 23:57:29.495 +03:00 [INF] Removing 0 device flow codes
2020-07-27 23:57:43.095 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-27 23:57:43.135 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-27 23:57:43.135 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-27 23:57:43.136 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-27 23:57:43.136 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-27 23:57:43.136 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-27 23:57:43.136 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-27 23:57:44.564 +03:00 [DBG] Login Url: /Account/Login
2020-07-27 23:57:44.566 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-27 23:57:44.566 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-27 23:57:44.567 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-27 23:57:44.567 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-27 23:57:44.567 +03:00 [DBG] Error Url: /home/error
2020-07-27 23:57:44.567 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 13:52:05.958 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 13:52:05.991 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 13:52:05.991 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 13:52:05.991 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 13:52:05.991 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 13:52:05.992 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 13:52:05.992 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 13:52:06.782 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 13:52:06.784 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 13:52:06.784 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 13:52:06.784 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 13:52:06.784 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 13:52:06.784 +03:00 [DBG] Error Url: /home/error
2020-07-28 13:52:06.785 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 13:52:36.295 +03:00 [INF] Removing 0 grants
2020-07-28 13:52:36.305 +03:00 [INF] Removing 0 device flow codes
2020-07-28 13:53:06.326 +03:00 [INF] Removing 0 grants
2020-07-28 13:53:06.328 +03:00 [INF] Removing 0 device flow codes
2020-07-28 13:53:36.338 +03:00 [INF] Removing 0 grants
2020-07-28 13:53:36.342 +03:00 [INF] Removing 0 device flow codes
2020-07-28 13:54:06.358 +03:00 [INF] Removing 0 grants
2020-07-28 13:54:06.360 +03:00 [INF] Removing 0 device flow codes
2020-07-28 13:54:36.374 +03:00 [INF] Removing 0 grants
2020-07-28 13:54:36.376 +03:00 [INF] Removing 0 device flow codes
2020-07-28 13:55:06.390 +03:00 [INF] Removing 0 grants
2020-07-28 13:55:06.391 +03:00 [INF] Removing 0 device flow codes
2020-07-28 13:55:36.401 +03:00 [INF] Removing 0 grants
2020-07-28 13:55:36.404 +03:00 [INF] Removing 0 device flow codes
2020-07-28 13:56:06.412 +03:00 [INF] Removing 0 grants
2020-07-28 13:56:06.414 +03:00 [INF] Removing 0 device flow codes
2020-07-28 13:56:36.425 +03:00 [INF] Removing 0 grants
2020-07-28 13:56:36.427 +03:00 [INF] Removing 0 device flow codes
2020-07-28 13:57:06.430 +03:00 [INF] Removing 0 grants
2020-07-28 13:57:06.431 +03:00 [INF] Removing 0 device flow codes
2020-07-28 13:57:36.444 +03:00 [INF] Removing 0 grants
2020-07-28 13:57:36.448 +03:00 [INF] Removing 0 device flow codes
2020-07-28 13:58:06.465 +03:00 [INF] Removing 0 grants
2020-07-28 13:58:06.470 +03:00 [INF] Removing 0 device flow codes
2020-07-28 13:58:36.495 +03:00 [INF] Removing 0 grants
2020-07-28 13:58:36.500 +03:00 [INF] Removing 0 device flow codes
2020-07-28 13:59:06.508 +03:00 [INF] Removing 0 grants
2020-07-28 13:59:06.512 +03:00 [INF] Removing 0 device flow codes
2020-07-28 13:59:36.522 +03:00 [INF] Removing 0 grants
2020-07-28 13:59:36.524 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:00:06.535 +03:00 [INF] Removing 0 grants
2020-07-28 14:00:06.537 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:00:36.543 +03:00 [INF] Removing 0 grants
2020-07-28 14:00:36.544 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:01:06.559 +03:00 [INF] Removing 0 grants
2020-07-28 14:01:06.561 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:01:36.577 +03:00 [INF] Removing 0 grants
2020-07-28 14:01:36.582 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:02:06.588 +03:00 [INF] Removing 0 grants
2020-07-28 14:02:06.589 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:12:28.682 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 14:12:28.711 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 14:12:28.711 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 14:12:28.712 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 14:12:28.712 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 14:12:28.712 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 14:12:28.713 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 14:12:29.660 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 14:12:29.662 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 14:12:29.662 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 14:12:29.663 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 14:12:29.663 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 14:12:29.663 +03:00 [DBG] Error Url: /home/error
2020-07-28 14:12:29.663 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 14:12:58.963 +03:00 [INF] Removing 0 grants
2020-07-28 14:12:58.973 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:13:28.983 +03:00 [INF] Removing 0 grants
2020-07-28 14:13:28.985 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:14:05.951 +03:00 [INF] Removing 0 grants
2020-07-28 14:14:05.976 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:14:06.058 +03:00 [WRN] User 4398e3bc-5c66-4055-afd8-462c0b0f4695 password validation failed: PasswordRequiresNonAlphanumeric.
2020-07-28 14:14:35.995 +03:00 [INF] Removing 0 grants
2020-07-28 14:14:35.998 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:15:06.019 +03:00 [INF] Removing 0 grants
2020-07-28 14:15:06.020 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:15:36.040 +03:00 [INF] Removing 0 grants
2020-07-28 14:15:36.042 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:16:06.055 +03:00 [INF] Removing 0 grants
2020-07-28 14:16:06.056 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:16:36.068 +03:00 [INF] Removing 0 grants
2020-07-28 14:16:36.070 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:17:06.089 +03:00 [INF] Removing 0 grants
2020-07-28 14:17:06.091 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:17:36.105 +03:00 [INF] Removing 0 grants
2020-07-28 14:17:36.106 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:18:06.119 +03:00 [INF] Removing 0 grants
2020-07-28 14:18:06.121 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:18:36.136 +03:00 [INF] Removing 0 grants
2020-07-28 14:18:36.138 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:19:06.144 +03:00 [INF] Removing 0 grants
2020-07-28 14:19:06.146 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:19:36.165 +03:00 [INF] Removing 0 grants
2020-07-28 14:19:36.172 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:24:06.649 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 14:24:06.678 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 14:24:06.678 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 14:24:06.678 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 14:24:06.679 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 14:24:06.679 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 14:24:06.679 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 14:24:07.629 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 14:24:07.631 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 14:24:07.631 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 14:24:07.631 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 14:24:07.631 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 14:24:07.632 +03:00 [DBG] Error Url: /home/error
2020-07-28 14:24:07.632 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 14:24:36.955 +03:00 [INF] Removing 0 grants
2020-07-28 14:24:36.965 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:24:41.279 +03:00 [WRN] User 5f69d579-5f38-4d9e-9924-924a415f1e38 password validation failed: PasswordRequiresNonAlphanumeric;PasswordRequiresLower;PasswordRequiresUpper.
2020-07-28 14:25:06.978 +03:00 [INF] Removing 0 grants
2020-07-28 14:25:06.980 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:25:36.995 +03:00 [INF] Removing 0 grants
2020-07-28 14:25:36.998 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:25:51.566 +03:00 [WRN] User d87f4e8a-1f3a-4a42-9745-7a853a83fcd1 validation failed: InvalidUserName.
2020-07-28 14:26:07.018 +03:00 [INF] Removing 0 grants
2020-07-28 14:26:07.019 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:26:37.035 +03:00 [INF] Removing 0 grants
2020-07-28 14:26:37.038 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:27:00.493 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 14:27:00.523 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 14:27:00.524 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 14:27:00.524 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 14:27:00.524 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 14:27:00.524 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 14:27:00.525 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 14:27:01.377 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 14:27:01.379 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 14:27:01.379 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 14:27:01.380 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 14:27:01.380 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 14:27:01.380 +03:00 [DBG] Error Url: /home/error
2020-07-28 14:27:01.380 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 14:27:21.900 +03:00 [WRN] User 11b2ead7-5791-48d6-a7c1-e13760668b6f password validation failed: PasswordRequiresNonAlphanumeric;PasswordRequiresLower;PasswordRequiresUpper.
2020-07-28 14:27:30.806 +03:00 [INF] Removing 0 grants
2020-07-28 14:27:30.816 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:27:46.499 +03:00 [WRN] User d1d3169e-92e2-41a5-bc2d-056b96606b6c validation failed: InvalidUserName.
2020-07-28 14:43:08.335 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 14:43:08.364 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 14:43:08.365 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 14:43:08.365 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 14:43:08.365 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 14:43:08.366 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 14:43:08.366 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 14:43:09.219 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 14:43:09.221 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 14:43:09.221 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 14:43:09.221 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 14:43:09.221 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 14:43:09.222 +03:00 [DBG] Error Url: /home/error
2020-07-28 14:43:09.222 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 14:43:38.628 +03:00 [INF] Removing 0 grants
2020-07-28 14:43:38.639 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:44:13.869 +03:00 [INF] Removing 0 grants
2020-07-28 14:44:13.871 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:44:43.885 +03:00 [INF] Removing 0 grants
2020-07-28 14:44:43.888 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:45:05.637 +03:00 [WRN] Invalid password for user ff440b8e-06b8-4042-b182-b0f608f73bf4.
2020-07-28 14:45:05.650 +03:00 [INF] {"Username":"den4ik@mail.ru","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HM1ITDJ5269G:00000023","TimeStamp":"2020-07-28T11:45:05.0000000Z","ProcessId":26944,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2020-07-28 14:45:13.911 +03:00 [INF] Removing 0 grants
2020-07-28 14:45:13.917 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:45:43.937 +03:00 [INF] Removing 0 grants
2020-07-28 14:45:43.939 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:46:09.633 +03:00 [WRN] Invalid password for user ff440b8e-06b8-4042-b182-b0f608f73bf4.
2020-07-28 14:46:20.978 +03:00 [INF] {"Username":"den4ik@mail.ru","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HM1ITDJ5269G:0000002B","TimeStamp":"2020-07-28T11:46:20.0000000Z","ProcessId":26944,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2020-07-28 14:46:20.986 +03:00 [INF] Removing 0 grants
2020-07-28 14:46:20.989 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:46:33.622 +03:00 [WRN] Invalid password for user ff440b8e-06b8-4042-b182-b0f608f73bf4.
2020-07-28 14:46:33.624 +03:00 [INF] {"Username":"den4ik@mail.ru","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HM1ITDJ5269G:00000033","TimeStamp":"2020-07-28T11:46:33.0000000Z","ProcessId":26944,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2020-07-28 14:46:43.548 +03:00 [WRN] Invalid password for user ff440b8e-06b8-4042-b182-b0f608f73bf4.
2020-07-28 14:46:43.550 +03:00 [INF] {"Username":"den4ik@mail.ru","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HM1ITDJ5269G:0000003B","TimeStamp":"2020-07-28T11:46:43.0000000Z","ProcessId":26944,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2020-07-28 14:46:51.002 +03:00 [INF] Removing 0 grants
2020-07-28 14:46:51.004 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:47:21.019 +03:00 [INF] Removing 0 grants
2020-07-28 14:47:21.020 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:47:51.026 +03:00 [INF] Removing 0 grants
2020-07-28 14:47:51.028 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:48:28.903 +03:00 [INF] Removing 0 grants
2020-07-28 14:48:30.207 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:49:01.043 +03:00 [INF] Removing 0 grants
2020-07-28 14:49:01.172 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:49:23.746 +03:00 [INF] {"Username":"DzianisShch","Provider":null,"ProviderUserId":null,"SubjectId":"21ef7c6c-b0af-4b4b-a488-8c62ace9a10a","DisplayName":"DzianisShch","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1ITDJ5269G:00000061","TimeStamp":"2020-07-28T11:49:23.0000000Z","ProcessId":26944,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-28 14:49:27.788 +03:00 [DBG] Augmenting SignInContext
2020-07-28 14:49:27.790 +03:00 [DBG] Adding idp claim with value: local
2020-07-28 14:49:27.791 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-28 14:49:27.791 +03:00 [DBG] Adding auth_time claim with value: 1595936967
2020-07-28 14:49:27.820 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-28 14:49:32.533 +03:00 [INF] Removing 0 grants
2020-07-28 14:49:32.536 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:50:02.552 +03:00 [INF] Removing 0 grants
2020-07-28 14:50:02.554 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:50:32.571 +03:00 [INF] Removing 0 grants
2020-07-28 14:50:32.574 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:51:02.593 +03:00 [INF] Removing 0 grants
2020-07-28 14:51:02.595 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:51:32.604 +03:00 [INF] Removing 0 grants
2020-07-28 14:51:32.605 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:52:02.622 +03:00 [INF] Removing 0 grants
2020-07-28 14:52:02.627 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:52:32.643 +03:00 [INF] Removing 0 grants
2020-07-28 14:52:32.646 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:53:02.663 +03:00 [INF] Removing 0 grants
2020-07-28 14:53:02.664 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:53:32.679 +03:00 [INF] Removing 0 grants
2020-07-28 14:53:32.683 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:54:02.701 +03:00 [INF] Removing 0 grants
2020-07-28 14:54:02.702 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:54:32.710 +03:00 [INF] Removing 0 grants
2020-07-28 14:54:32.716 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:55:02.725 +03:00 [INF] Removing 0 grants
2020-07-28 14:55:02.726 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:55:32.738 +03:00 [INF] Removing 0 grants
2020-07-28 14:55:32.739 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:56:02.755 +03:00 [INF] Removing 0 grants
2020-07-28 14:56:02.759 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:56:32.771 +03:00 [INF] Removing 0 grants
2020-07-28 14:56:32.771 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:56:51.538 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 14:56:51.567 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 14:56:51.567 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 14:56:51.567 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 14:56:51.568 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 14:56:51.568 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 14:56:51.568 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 14:56:52.408 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 14:56:52.410 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 14:56:52.411 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 14:56:52.411 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 14:56:52.411 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 14:56:52.411 +03:00 [DBG] Error Url: /home/error
2020-07-28 14:56:52.411 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 14:57:03.944 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-28 14:57:03.946 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-28 14:57:03.948 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-28 14:57:03.959 +03:00 [INF] {"SubjectId":"21ef7c6c-b0af-4b4b-a488-8c62ace9a10a","DisplayName":"DzianisShch","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1ITL8F2C22:00000009","TimeStamp":"2020-07-28T11:57:03.0000000Z","ProcessId":26764,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-28 14:57:03.990 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-28 14:57:21.830 +03:00 [INF] Removing 0 grants
2020-07-28 14:57:21.838 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:57:51.860 +03:00 [INF] Removing 0 grants
2020-07-28 14:57:51.862 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:58:16.456 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 14:58:16.485 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 14:58:16.485 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 14:58:16.486 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 14:58:16.486 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 14:58:16.486 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 14:58:16.486 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 14:58:17.372 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 14:58:17.374 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 14:58:17.374 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 14:58:17.375 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 14:58:17.375 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 14:58:17.375 +03:00 [DBG] Error Url: /home/error
2020-07-28 14:58:17.375 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 14:58:46.767 +03:00 [INF] Removing 0 grants
2020-07-28 14:58:46.777 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:59:16.796 +03:00 [INF] Removing 0 grants
2020-07-28 14:59:16.797 +03:00 [INF] Removing 0 device flow codes
2020-07-28 14:59:36.777 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 14:59:36.806 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 14:59:36.807 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 14:59:36.807 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 14:59:36.807 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 14:59:36.808 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 14:59:36.808 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 14:59:37.697 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 14:59:37.699 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 14:59:37.699 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 14:59:37.699 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 14:59:37.699 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 14:59:37.699 +03:00 [DBG] Error Url: /home/error
2020-07-28 14:59:37.700 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 15:00:07.068 +03:00 [INF] Removing 0 grants
2020-07-28 15:00:07.078 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:00:37.101 +03:00 [INF] Removing 0 grants
2020-07-28 15:00:37.104 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:01:07.124 +03:00 [INF] Removing 0 grants
2020-07-28 15:01:07.127 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:01:37.133 +03:00 [INF] Removing 0 grants
2020-07-28 15:01:37.135 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:02:07.146 +03:00 [INF] Removing 0 grants
2020-07-28 15:02:07.148 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:02:37.163 +03:00 [INF] Removing 0 grants
2020-07-28 15:02:37.164 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:03:07.179 +03:00 [INF] Removing 0 grants
2020-07-28 15:03:07.181 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:03:37.194 +03:00 [INF] Removing 0 grants
2020-07-28 15:03:37.197 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:04:07.209 +03:00 [INF] Removing 0 grants
2020-07-28 15:04:07.211 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:04:37.227 +03:00 [INF] Removing 0 grants
2020-07-28 15:04:37.229 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:05:07.244 +03:00 [INF] Removing 0 grants
2020-07-28 15:05:07.246 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:05:37.256 +03:00 [INF] Removing 0 grants
2020-07-28 15:05:37.259 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:06:07.272 +03:00 [INF] Removing 0 grants
2020-07-28 15:06:07.277 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:06:37.288 +03:00 [INF] Removing 0 grants
2020-07-28 15:06:37.291 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:07:07.293 +03:00 [INF] Removing 0 grants
2020-07-28 15:07:07.297 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:07:37.309 +03:00 [INF] Removing 0 grants
2020-07-28 15:07:37.311 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:34:39.594 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 15:34:39.632 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 15:34:39.633 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 15:34:39.633 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 15:34:39.633 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 15:34:39.633 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 15:34:39.634 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 15:34:40.974 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 15:34:40.976 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 15:34:40.976 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 15:34:40.976 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 15:34:40.977 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 15:34:40.977 +03:00 [DBG] Error Url: /home/error
2020-07-28 15:34:40.977 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 15:34:54.147 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2020-07-28 15:35:06.407 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2020-07-28 15:35:07.812 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2020-07-28 15:35:10.059 +03:00 [INF] Removing 0 grants
2020-07-28 15:35:10.069 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:35:57.878 +03:00 [INF] Removing 0 grants
2020-07-28 15:35:57.938 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:36:08.708 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2020-07-28 15:36:28.434 +03:00 [INF] Removing 0 grants
2020-07-28 15:36:39.662 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:36:39.761 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2020-07-28 15:37:09.704 +03:00 [INF] Removing 0 grants
2020-07-28 15:37:09.706 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:37:39.723 +03:00 [INF] Removing 0 grants
2020-07-28 15:37:39.726 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:38:09.738 +03:00 [INF] Removing 0 grants
2020-07-28 15:38:09.740 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:38:39.754 +03:00 [INF] Removing 0 grants
2020-07-28 15:38:39.758 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:39:09.770 +03:00 [INF] Removing 0 grants
2020-07-28 15:39:09.775 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:39:39.787 +03:00 [INF] Removing 0 grants
2020-07-28 15:39:39.802 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:40:09.816 +03:00 [INF] Removing 0 grants
2020-07-28 15:40:09.820 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:40:39.831 +03:00 [INF] Removing 0 grants
2020-07-28 15:40:39.833 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:41:09.848 +03:00 [INF] Removing 0 grants
2020-07-28 15:41:09.850 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:41:39.865 +03:00 [INF] Removing 0 grants
2020-07-28 15:41:39.868 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:42:09.882 +03:00 [INF] Removing 0 grants
2020-07-28 15:42:09.885 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:42:39.897 +03:00 [INF] Removing 0 grants
2020-07-28 15:42:39.901 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:43:09.915 +03:00 [INF] Removing 0 grants
2020-07-28 15:43:09.918 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:43:39.933 +03:00 [INF] Removing 0 grants
2020-07-28 15:43:39.934 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:44:09.947 +03:00 [INF] Removing 0 grants
2020-07-28 15:44:09.950 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:44:39.964 +03:00 [INF] Removing 0 grants
2020-07-28 15:44:39.965 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:45:09.977 +03:00 [INF] Removing 0 grants
2020-07-28 15:45:09.979 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:45:39.992 +03:00 [INF] Removing 0 grants
2020-07-28 15:45:39.994 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:46:10.004 +03:00 [INF] Removing 0 grants
2020-07-28 15:46:10.007 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:46:40.022 +03:00 [INF] Removing 0 grants
2020-07-28 15:46:40.024 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:47:10.038 +03:00 [INF] Removing 0 grants
2020-07-28 15:47:10.040 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:47:40.053 +03:00 [INF] Removing 0 grants
2020-07-28 15:47:40.055 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:48:10.069 +03:00 [INF] Removing 0 grants
2020-07-28 15:48:10.071 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:48:40.083 +03:00 [INF] Removing 0 grants
2020-07-28 15:48:40.086 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:49:10.099 +03:00 [INF] Removing 0 grants
2020-07-28 15:49:10.102 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:49:40.115 +03:00 [INF] Removing 0 grants
2020-07-28 15:49:40.118 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:50:10.128 +03:00 [INF] Removing 0 grants
2020-07-28 15:50:10.131 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:50:40.144 +03:00 [INF] Removing 0 grants
2020-07-28 15:50:40.146 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:51:10.147 +03:00 [INF] Removing 0 grants
2020-07-28 15:51:10.149 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:51:40.161 +03:00 [INF] Removing 0 grants
2020-07-28 15:51:40.162 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:52:10.176 +03:00 [INF] Removing 0 grants
2020-07-28 15:52:10.178 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:52:40.189 +03:00 [INF] Removing 0 grants
2020-07-28 15:52:40.192 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:53:10.194 +03:00 [INF] Removing 0 grants
2020-07-28 15:53:10.196 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:53:40.209 +03:00 [INF] Removing 0 grants
2020-07-28 15:53:40.212 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:54:10.226 +03:00 [INF] Removing 0 grants
2020-07-28 15:54:10.229 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:54:40.239 +03:00 [INF] Removing 0 grants
2020-07-28 15:54:40.241 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:55:10.252 +03:00 [INF] Removing 0 grants
2020-07-28 15:55:10.253 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:55:40.255 +03:00 [INF] Removing 0 grants
2020-07-28 15:55:40.257 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:56:10.268 +03:00 [INF] Removing 0 grants
2020-07-28 15:56:10.271 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:56:40.284 +03:00 [INF] Removing 0 grants
2020-07-28 15:56:40.287 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:57:10.301 +03:00 [INF] Removing 0 grants
2020-07-28 15:57:10.303 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:57:40.316 +03:00 [INF] Removing 0 grants
2020-07-28 15:57:40.319 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:58:10.331 +03:00 [INF] Removing 0 grants
2020-07-28 15:58:10.334 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:58:40.350 +03:00 [INF] Removing 0 grants
2020-07-28 15:58:40.354 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:59:10.364 +03:00 [INF] Removing 0 grants
2020-07-28 15:59:10.366 +03:00 [INF] Removing 0 device flow codes
2020-07-28 15:59:40.378 +03:00 [INF] Removing 0 grants
2020-07-28 15:59:40.381 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:00:10.393 +03:00 [INF] Removing 0 grants
2020-07-28 16:00:10.395 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:00:40.412 +03:00 [INF] Removing 0 grants
2020-07-28 16:00:40.413 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:01:10.427 +03:00 [INF] Removing 0 grants
2020-07-28 16:01:10.428 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:01:40.440 +03:00 [INF] Removing 0 grants
2020-07-28 16:01:40.442 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:02:10.443 +03:00 [INF] Removing 0 grants
2020-07-28 16:02:10.445 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:02:40.456 +03:00 [INF] Removing 0 grants
2020-07-28 16:02:40.457 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:03:10.459 +03:00 [INF] Removing 0 grants
2020-07-28 16:03:10.461 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:03:40.477 +03:00 [INF] Removing 0 grants
2020-07-28 16:03:40.478 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:04:10.489 +03:00 [INF] Removing 0 grants
2020-07-28 16:04:10.491 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:04:40.502 +03:00 [INF] Removing 0 grants
2020-07-28 16:04:40.504 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:05:10.518 +03:00 [INF] Removing 0 grants
2020-07-28 16:05:10.520 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:05:40.521 +03:00 [INF] Removing 0 grants
2020-07-28 16:05:40.524 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:06:10.534 +03:00 [INF] Removing 0 grants
2020-07-28 16:06:10.537 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:06:40.538 +03:00 [INF] Removing 0 grants
2020-07-28 16:06:40.540 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:07:10.550 +03:00 [INF] Removing 0 grants
2020-07-28 16:07:10.552 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:07:40.553 +03:00 [INF] Removing 0 grants
2020-07-28 16:07:40.557 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:08:10.568 +03:00 [INF] Removing 0 grants
2020-07-28 16:08:10.571 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:08:40.583 +03:00 [INF] Removing 0 grants
2020-07-28 16:08:40.585 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:09:10.599 +03:00 [INF] Removing 0 grants
2020-07-28 16:09:10.601 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:09:40.611 +03:00 [INF] Removing 0 grants
2020-07-28 16:09:40.614 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:10:10.617 +03:00 [INF] Removing 0 grants
2020-07-28 16:10:10.620 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:10:40.630 +03:00 [INF] Removing 0 grants
2020-07-28 16:10:40.632 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:11:10.644 +03:00 [INF] Removing 0 grants
2020-07-28 16:11:10.646 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:11:40.659 +03:00 [INF] Removing 0 grants
2020-07-28 16:11:40.662 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:12:10.673 +03:00 [INF] Removing 0 grants
2020-07-28 16:12:10.676 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:12:40.679 +03:00 [INF] Removing 0 grants
2020-07-28 16:12:40.682 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:13:10.692 +03:00 [INF] Removing 0 grants
2020-07-28 16:13:10.697 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:13:40.706 +03:00 [INF] Removing 0 grants
2020-07-28 16:13:40.707 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:14:10.714 +03:00 [INF] Removing 0 grants
2020-07-28 16:14:10.716 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:14:40.723 +03:00 [INF] Removing 0 grants
2020-07-28 16:14:40.726 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:15:10.744 +03:00 [INF] Removing 0 grants
2020-07-28 16:15:10.756 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:15:40.770 +03:00 [INF] Removing 0 grants
2020-07-28 16:15:40.772 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:16:10.784 +03:00 [INF] Removing 0 grants
2020-07-28 16:16:10.786 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:16:40.805 +03:00 [INF] Removing 0 grants
2020-07-28 16:16:40.807 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:17:10.816 +03:00 [INF] Removing 0 grants
2020-07-28 16:17:10.819 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:17:40.832 +03:00 [INF] Removing 0 grants
2020-07-28 16:17:40.834 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:18:10.846 +03:00 [INF] Removing 0 grants
2020-07-28 16:18:10.849 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:18:40.864 +03:00 [INF] Removing 0 grants
2020-07-28 16:18:40.866 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:19:10.878 +03:00 [INF] Removing 0 grants
2020-07-28 16:19:10.880 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:19:40.893 +03:00 [INF] Removing 0 grants
2020-07-28 16:19:40.895 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:20:10.897 +03:00 [INF] Removing 0 grants
2020-07-28 16:20:10.899 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:20:40.912 +03:00 [INF] Removing 0 grants
2020-07-28 16:20:40.914 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:21:10.929 +03:00 [INF] Removing 0 grants
2020-07-28 16:21:10.932 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:21:40.941 +03:00 [INF] Removing 0 grants
2020-07-28 16:21:40.943 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:22:10.955 +03:00 [INF] Removing 0 grants
2020-07-28 16:22:10.957 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:22:40.971 +03:00 [INF] Removing 0 grants
2020-07-28 16:22:40.974 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:23:10.987 +03:00 [INF] Removing 0 grants
2020-07-28 16:23:10.989 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:23:40.991 +03:00 [INF] Removing 0 grants
2020-07-28 16:23:40.994 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:24:11.004 +03:00 [INF] Removing 0 grants
2020-07-28 16:24:11.007 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:24:41.021 +03:00 [INF] Removing 0 grants
2020-07-28 16:24:41.022 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:26:47.997 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 16:26:48.027 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 16:26:48.027 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 16:26:48.027 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 16:26:48.027 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 16:26:48.028 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 16:26:48.028 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 16:26:49.003 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 16:26:49.004 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 16:26:49.005 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 16:26:49.005 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 16:26:49.005 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 16:26:49.006 +03:00 [DBG] Error Url: /home/error
2020-07-28 16:26:49.006 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 16:26:49.064 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:26:49.071 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:26:49.305 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:26:49.326 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:26:49.341 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:26:49.341 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:26:49.342 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:26:49.344 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:26:49.344 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:26:49.344 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:26:49.471 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:26:49.472 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:26:54.320 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:26:54.322 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:08.701 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2020-07-28 16:27:08.990 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:08.991 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:09.066 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:09.066 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:09.067 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:09.072 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:18.346 +03:00 [INF] Removing 0 grants
2020-07-28 16:27:18.357 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:27:31.911 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:31.913 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:32.002 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:32.002 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:32.004 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:32.008 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:32.048 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:32.051 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:33.789 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:33.798 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:42.952 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2020-07-28 16:27:42.979 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:42.981 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:43.047 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:43.047 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:43.048 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:43.053 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:43.088 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:43.089 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 16:27:48.366 +03:00 [INF] Removing 0 grants
2020-07-28 16:27:48.368 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:28:18.381 +03:00 [INF] Removing 0 grants
2020-07-28 16:28:18.386 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:28:48.393 +03:00 [INF] Removing 0 grants
2020-07-28 16:28:48.395 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:29:18.412 +03:00 [INF] Removing 0 grants
2020-07-28 16:29:18.415 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:29:48.426 +03:00 [INF] Removing 0 grants
2020-07-28 16:29:48.429 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:30:18.441 +03:00 [INF] Removing 0 grants
2020-07-28 16:30:18.446 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:30:48.457 +03:00 [INF] Removing 0 grants
2020-07-28 16:30:48.460 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:31:18.476 +03:00 [INF] Removing 0 grants
2020-07-28 16:31:18.485 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:31:48.500 +03:00 [INF] Removing 0 grants
2020-07-28 16:31:48.503 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:32:18.512 +03:00 [INF] Removing 0 grants
2020-07-28 16:32:18.515 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:32:50.755 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 16:32:50.786 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 16:32:50.787 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 16:32:50.787 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 16:32:50.787 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 16:32:50.788 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 16:32:50.788 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 16:32:51.635 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 16:32:51.637 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 16:32:51.638 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 16:32:51.638 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 16:32:51.638 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 16:32:51.638 +03:00 [DBG] Error Url: /home/error
2020-07-28 16:32:51.639 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 16:33:12.640 +03:00 [INF] AuthenticationScheme: Google was challenged.
2020-07-28 16:33:17.669 +03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2020-07-28 16:33:24.495 +03:00 [DBG] External claims: ["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier: 109033595621368281653","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:  ","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname: ","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname: ","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress: whitechapel5991@gmail.com"]
2020-07-28 16:33:24.713 +03:00 [INF] Removing 0 grants
2020-07-28 16:33:24.726 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:33:25.261 +03:00 [DBG] Augmenting SignInContext
2020-07-28 16:33:25.263 +03:00 [DBG] Adding amr claim with value: external
2020-07-28 16:33:25.263 +03:00 [DBG] Adding auth_time claim with value: 1595943205
2020-07-28 16:33:25.274 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-28 16:33:25.280 +03:00 [INF] AuthenticationScheme: idsrv.external signed out.
2020-07-28 16:33:25.296 +03:00 [INF] {"Username":null,"Provider":"Google","ProviderUserId":"109033595621368281653","SubjectId":"1c7eed7c-bb7e-4aaf-88a2-6e0dba35b0de","DisplayName":" ","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1IVASQU95H:00000003","TimeStamp":"2020-07-28T13:33:25.0000000Z","ProcessId":656,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-28 16:33:33.831 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-28 16:33:33.833 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-28 16:33:33.836 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-28 16:33:33.838 +03:00 [INF] {"SubjectId":"1c7eed7c-bb7e-4aaf-88a2-6e0dba35b0de","DisplayName":" ","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1IVASQU95H:00000017","TimeStamp":"2020-07-28T13:33:33.0000000Z","ProcessId":656,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-28 16:33:33.845 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-28 16:33:54.788 +03:00 [INF] AuthenticationScheme: Google was challenged.
2020-07-28 16:33:54.792 +03:00 [INF] Removing 0 grants
2020-07-28 16:33:54.802 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:33:55.275 +03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2020-07-28 16:33:56.808 +03:00 [DBG] External claims: ["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier: 109033595621368281653","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:  ","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname: ","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname: ","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress: whitechapel5991@gmail.com"]
2020-07-28 16:33:56.834 +03:00 [DBG] Augmenting SignInContext
2020-07-28 16:33:56.834 +03:00 [DBG] Adding amr claim with value: external
2020-07-28 16:33:56.835 +03:00 [DBG] Adding auth_time claim with value: 1595943236
2020-07-28 16:33:56.839 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-28 16:33:56.840 +03:00 [INF] AuthenticationScheme: idsrv.external signed out.
2020-07-28 16:33:56.841 +03:00 [INF] {"Username":null,"Provider":"Google","ProviderUserId":"109033595621368281653","SubjectId":"1c7eed7c-bb7e-4aaf-88a2-6e0dba35b0de","DisplayName":" ","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1IVASQU95J:00000003","TimeStamp":"2020-07-28T13:33:56.0000000Z","ProcessId":656,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-28 16:34:08.396 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-28 16:34:08.398 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-28 16:34:08.402 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-28 16:34:08.404 +03:00 [INF] {"SubjectId":"1c7eed7c-bb7e-4aaf-88a2-6e0dba35b0de","DisplayName":" ","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1IVASQU95J:00000017","TimeStamp":"2020-07-28T13:34:08.0000000Z","ProcessId":656,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-28 16:34:08.409 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-28 16:34:14.128 +03:00 [INF] AuthenticationScheme: Google was challenged.
2020-07-28 16:34:14.596 +03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2020-07-28 16:34:15.599 +03:00 [DBG] External claims: ["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier: 109033595621368281653","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:  ","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname: ","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname: ","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress: whitechapel5991@gmail.com"]
2020-07-28 16:34:15.619 +03:00 [DBG] Augmenting SignInContext
2020-07-28 16:34:15.619 +03:00 [DBG] Adding amr claim with value: external
2020-07-28 16:34:15.620 +03:00 [DBG] Adding auth_time claim with value: 1595943255
2020-07-28 16:34:15.623 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-28 16:34:15.623 +03:00 [INF] AuthenticationScheme: idsrv.external signed out.
2020-07-28 16:34:15.624 +03:00 [INF] {"Username":null,"Provider":"Google","ProviderUserId":"109033595621368281653","SubjectId":"1c7eed7c-bb7e-4aaf-88a2-6e0dba35b0de","DisplayName":" ","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1IVASQU95J:00000041","TimeStamp":"2020-07-28T13:34:15.0000000Z","ProcessId":656,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-28 16:34:30.243 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-28 16:34:30.245 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-28 16:34:30.247 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-28 16:34:30.249 +03:00 [INF] Removing 0 grants
2020-07-28 16:34:30.250 +03:00 [INF] {"SubjectId":"1c7eed7c-bb7e-4aaf-88a2-6e0dba35b0de","DisplayName":" ","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1IVASQU95J:00000055","TimeStamp":"2020-07-28T13:34:30.0000000Z","ProcessId":656,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-28 16:34:30.254 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-28 16:34:30.257 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:35:00.273 +03:00 [INF] Removing 0 grants
2020-07-28 16:35:00.278 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:35:30.290 +03:00 [INF] Removing 0 grants
2020-07-28 16:35:30.294 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:36:00.305 +03:00 [INF] Removing 0 grants
2020-07-28 16:36:00.307 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:36:30.319 +03:00 [INF] Removing 0 grants
2020-07-28 16:36:30.324 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:37:00.338 +03:00 [INF] Removing 0 grants
2020-07-28 16:37:00.340 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:37:30.356 +03:00 [INF] Removing 0 grants
2020-07-28 16:37:30.360 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:38:00.368 +03:00 [INF] Removing 0 grants
2020-07-28 16:38:00.371 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:38:13.103 +03:00 [INF] AuthenticationScheme: Google was challenged.
2020-07-28 16:38:13.685 +03:00 [INF] AuthenticationScheme: idsrv.external signed in.
2020-07-28 16:38:19.195 +03:00 [DBG] External claims: ["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier: 109033595621368281653","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:  ","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname: ","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname: ","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress: whitechapel5991@gmail.com"]
2020-07-28 16:38:19.214 +03:00 [DBG] Augmenting SignInContext
2020-07-28 16:38:19.214 +03:00 [DBG] Adding amr claim with value: external
2020-07-28 16:38:19.215 +03:00 [DBG] Adding auth_time claim with value: 1595943499
2020-07-28 16:38:19.217 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-28 16:38:19.219 +03:00 [INF] AuthenticationScheme: idsrv.external signed out.
2020-07-28 16:38:19.221 +03:00 [INF] {"Username":null,"Provider":"Google","ProviderUserId":"109033595621368281653","SubjectId":"1c7eed7c-bb7e-4aaf-88a2-6e0dba35b0de","DisplayName":" ","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1IVASQU95M:00000017","TimeStamp":"2020-07-28T13:38:19.0000000Z","ProcessId":656,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-28 16:38:24.721 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-28 16:38:24.725 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-28 16:38:24.728 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-28 16:38:24.729 +03:00 [INF] {"SubjectId":"1c7eed7c-bb7e-4aaf-88a2-6e0dba35b0de","DisplayName":" ","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1IVASQU95N:00000001","TimeStamp":"2020-07-28T13:38:24.0000000Z","ProcessId":656,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-28 16:38:24.731 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-28 16:38:30.379 +03:00 [INF] Removing 0 grants
2020-07-28 16:38:30.381 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:39:00.396 +03:00 [INF] Removing 0 grants
2020-07-28 16:39:00.398 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:39:30.411 +03:00 [INF] Removing 0 grants
2020-07-28 16:39:30.413 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:40:00.424 +03:00 [INF] Removing 0 grants
2020-07-28 16:40:00.427 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:40:30.441 +03:00 [INF] Removing 0 grants
2020-07-28 16:40:30.444 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:41:00.456 +03:00 [INF] Removing 0 grants
2020-07-28 16:41:00.459 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:41:30.480 +03:00 [INF] Removing 0 grants
2020-07-28 16:41:30.483 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:42:00.492 +03:00 [INF] Removing 0 grants
2020-07-28 16:42:00.494 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:42:30.502 +03:00 [INF] Removing 0 grants
2020-07-28 16:42:30.505 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:43:00.518 +03:00 [INF] Removing 0 grants
2020-07-28 16:43:00.520 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:43:30.534 +03:00 [INF] Removing 0 grants
2020-07-28 16:43:30.536 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:44:00.550 +03:00 [INF] Removing 0 grants
2020-07-28 16:44:00.552 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:44:30.566 +03:00 [INF] Removing 0 grants
2020-07-28 16:44:30.567 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:45:00.580 +03:00 [INF] Removing 0 grants
2020-07-28 16:45:00.581 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:45:30.597 +03:00 [INF] Removing 0 grants
2020-07-28 16:45:30.599 +03:00 [INF] Removing 0 device flow codes
2020-07-28 16:46:00.611 +03:00 [INF] Removing 0 grants
2020-07-28 16:46:00.614 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:00:32.246 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 17:00:32.275 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 17:00:32.276 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 17:00:32.276 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 17:00:32.276 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 17:00:32.276 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 17:00:32.277 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 17:00:33.441 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 17:00:33.443 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 17:00:33.444 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 17:00:33.444 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 17:00:33.579 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 17:00:33.580 +03:00 [DBG] Error Url: /home/error
2020-07-28 17:00:33.580 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 17:01:02.598 +03:00 [INF] Removing 0 grants
2020-07-28 17:01:02.609 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:01:36.348 +03:00 [INF] Removing 0 grants
2020-07-28 17:01:36.351 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:01:37.944 +03:00 [ERR] An unhandled exception has occurred while executing the request.
MailKit.Security.AuthenticationException: 535: 5.7.8 Error: authentication failed: Invalid user or password!
 ---> MailKit.Net.Smtp.SmtpCommandException: 5.7.8 Error: authentication failed: Invalid user or password!
   --- End of inner exception stack trace ---
   at MailKit.Net.Smtp.SmtpClient.AuthenticateAsync(Encoding encoding, ICredentials credentials, Boolean doAsync, CancellationToken cancellationToken)
   at IdentityServer.Services.EmailService.SendEmailAsync(String email, String subject, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Services\EmailService.cs:line 27
   at IdentityServer.Controllers.AccountController.Register(RegisterViewModel model) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 286
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-28 17:02:06.366 +03:00 [INF] Removing 0 grants
2020-07-28 17:02:06.368 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:02:36.381 +03:00 [INF] Removing 0 grants
2020-07-28 17:02:36.385 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:02:53.287 +03:00 [WRN] User 94d726db-2956-4afa-858e-c7053e75474f validation failed: DuplicateUserName.
2020-07-28 17:03:17.062 +03:00 [INF] Removing 0 grants
2020-07-28 17:03:17.064 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:03:47.076 +03:00 [INF] Removing 0 grants
2020-07-28 17:03:47.077 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:04:08.023 +03:00 [WRN] User f3922274-73ca-49fe-bda2-daf327b2b8a5 validation failed: DuplicateUserName.
2020-07-28 17:04:20.887 +03:00 [INF] Removing 0 grants
2020-07-28 17:04:20.889 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:04:52.040 +03:00 [INF] Removing 0 grants
2020-07-28 17:04:52.073 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:05:11.245 +03:00 [ERR] An unhandled exception has occurred while executing the request.
MailKit.Security.AuthenticationException: 535: 5.7.8 Error: authentication failed: Invalid user or password!
 ---> MailKit.Net.Smtp.SmtpCommandException: 5.7.8 Error: authentication failed: Invalid user or password!
   --- End of inner exception stack trace ---
   at MailKit.Net.Smtp.SmtpClient.AuthenticateAsync(Encoding encoding, ICredentials credentials, Boolean doAsync, CancellationToken cancellationToken)
   at IdentityServer.Services.EmailService.SendEmailAsync(String email, String subject, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Services\EmailService.cs:line 27
   at IdentityServer.Controllers.AccountController.Register(RegisterViewModel model) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 286
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-28 17:05:23.302 +03:00 [INF] Removing 0 grants
2020-07-28 17:05:23.305 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:05:53.317 +03:00 [INF] Removing 0 grants
2020-07-28 17:05:53.320 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:06:23.324 +03:00 [INF] Removing 0 grants
2020-07-28 17:06:23.326 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:06:53.345 +03:00 [INF] Removing 0 grants
2020-07-28 17:06:53.348 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:07:23.365 +03:00 [INF] Removing 0 grants
2020-07-28 17:07:23.368 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:07:53.378 +03:00 [INF] Removing 0 grants
2020-07-28 17:07:53.381 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:08:23.396 +03:00 [INF] Removing 0 grants
2020-07-28 17:08:23.399 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:08:46.704 +03:00 [WRN] User a366e577-e58f-43d5-8eb9-c504ab54e36b validation failed: DuplicateUserName.
2020-07-28 17:08:53.404 +03:00 [INF] Removing 0 grants
2020-07-28 17:08:53.406 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:09:04.158 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 17:09:04.203 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 17:09:04.203 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 17:09:04.203 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 17:09:04.204 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 17:09:04.204 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 17:09:04.204 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 17:09:05.202 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 17:09:05.204 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 17:09:05.204 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 17:09:05.205 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 17:09:05.205 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 17:09:05.205 +03:00 [DBG] Error Url: /home/error
2020-07-28 17:09:05.205 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 17:09:36.584 +03:00 [INF] Removing 0 grants
2020-07-28 17:09:36.601 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:09:49.447 +03:00 [ERR] An unhandled exception has occurred while executing the request.
MailKit.Net.Smtp.SmtpCommandException: 5.7.1 Sender address rejected: not owned by auth user.
   at MailKit.Net.Smtp.SmtpClient.OnSenderNotAccepted(MimeMessage message, MailboxAddress mailbox, SmtpResponse response)
   at MailKit.Net.Smtp.SmtpClient.ProcessMailFromResponse(MimeMessage message, MailboxAddress mailbox, SmtpResponse response)
   at MailKit.Net.Smtp.SmtpClient.FlushCommandQueueAsync(MimeMessage message, MailboxAddress sender, IList`1 recipients, Boolean doAsync, CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, Boolean doAsync, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, Boolean doAsync, CancellationToken cancellationToken, ITransferProgress progress)
   at IdentityServer.Services.EmailService.SendEmailAsync(String email, String subject, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Services\EmailService.cs:line 28
   at IdentityServer.Controllers.AccountController.Register(RegisterViewModel model) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 286
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-28 17:10:06.615 +03:00 [INF] Removing 0 grants
2020-07-28 17:10:06.617 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:10:36.638 +03:00 [INF] Removing 0 grants
2020-07-28 17:10:36.645 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:11:06.654 +03:00 [INF] Removing 0 grants
2020-07-28 17:11:06.659 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:11:36.666 +03:00 [INF] Removing 0 grants
2020-07-28 17:11:36.669 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:12:06.675 +03:00 [INF] Removing 0 grants
2020-07-28 17:12:06.678 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:12:36.693 +03:00 [INF] Removing 0 grants
2020-07-28 17:12:36.697 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:13:06.712 +03:00 [INF] Removing 0 grants
2020-07-28 17:13:06.714 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:13:36.731 +03:00 [INF] Removing 0 grants
2020-07-28 17:13:36.739 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:14:06.754 +03:00 [INF] Removing 0 grants
2020-07-28 17:14:06.759 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:14:36.771 +03:00 [INF] Removing 0 grants
2020-07-28 17:14:36.773 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:15:06.792 +03:00 [INF] Removing 0 grants
2020-07-28 17:15:06.798 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:15:36.804 +03:00 [INF] Removing 0 grants
2020-07-28 17:15:36.807 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:15:48.752 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 17:15:48.782 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 17:15:48.783 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 17:15:48.783 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 17:15:48.783 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 17:15:48.784 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 17:15:48.784 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 17:15:50.136 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 17:15:50.140 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 17:15:50.141 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 17:15:50.141 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 17:15:50.141 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 17:15:50.142 +03:00 [DBG] Error Url: /home/error
2020-07-28 17:15:50.142 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 17:16:19.122 +03:00 [INF] Removing 0 grants
2020-07-28 17:16:19.135 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:17:15.743 +03:00 [INF] Removing 0 grants
2020-07-28 17:17:16.176 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:17:20.208 +03:00 [ERR] An unhandled exception has occurred while executing the request.
MailKit.Net.Smtp.SmtpCommandException: 5.7.1 [1] Message rejected under suspicion of SPAM; https://ya.cc/1IrBc 1595945812-98bNPmad8E-GqEei2r8
   at MailKit.Net.Smtp.SmtpClient.DataAsync(FormatOptions options, MimeMessage message, Int64 size, Boolean doAsync, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, Boolean doAsync, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, Boolean doAsync, CancellationToken cancellationToken, ITransferProgress progress)
   at IdentityServer.Services.EmailService.SendEmailAsync(String email, String subject, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Services\EmailService.cs:line 28
   at IdentityServer.Controllers.AccountController.Register(RegisterViewModel model) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 286
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-28 17:17:46.245 +03:00 [INF] Removing 0 grants
2020-07-28 17:17:46.251 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:18:16.259 +03:00 [INF] Removing 0 grants
2020-07-28 17:18:16.264 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:18:46.271 +03:00 [INF] Removing 0 grants
2020-07-28 17:18:46.274 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:19:16.286 +03:00 [INF] Removing 0 grants
2020-07-28 17:19:16.291 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:19:46.305 +03:00 [INF] Removing 0 grants
2020-07-28 17:19:46.309 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:20:16.320 +03:00 [INF] Removing 0 grants
2020-07-28 17:20:16.323 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:20:23.240 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 17:20:23.272 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 17:20:23.273 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 17:20:23.273 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 17:20:23.273 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 17:20:23.273 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 17:20:23.274 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 17:20:24.541 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 17:20:24.542 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 17:20:24.543 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 17:20:24.543 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 17:20:24.543 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 17:20:24.543 +03:00 [DBG] Error Url: /home/error
2020-07-28 17:20:24.543 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 17:20:55.735 +03:00 [INF] Removing 0 grants
2020-07-28 17:20:55.749 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:21:25.760 +03:00 [INF] Removing 0 grants
2020-07-28 17:21:25.762 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:21:55.790 +03:00 [INF] Removing 0 grants
2020-07-28 17:21:55.794 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:21:59.242 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Sequence contains more than one element
   at System.Linq.ThrowHelper.ThrowMoreThanOneElementException()
   at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.SingleOrDefault[TSource](IQueryable`1 source)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.FindByEmailAsync(String normalizedEmail, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByEmailAsync(String email)
   at IdentityServer.Controllers.AccountController.Login(LoginViewModel model, String button) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 110
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-28 17:22:25.799 +03:00 [INF] Removing 0 grants
2020-07-28 17:22:25.801 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:22:54.085 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Sequence contains more than one element
   at System.Linq.ThrowHelper.ThrowMoreThanOneElementException()
   at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.SingleOrDefault[TSource](IQueryable`1 source)
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.FindByEmailAsync(String normalizedEmail, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByEmailAsync(String email)
   at IdentityServer.Controllers.AccountController.Login(LoginViewModel model, String button) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 110
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-28 17:22:55.811 +03:00 [INF] Removing 0 grants
2020-07-28 17:22:55.817 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:23:25.832 +03:00 [INF] Removing 0 grants
2020-07-28 17:23:25.835 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:23:55.850 +03:00 [INF] Removing 0 grants
2020-07-28 17:23:55.856 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:29:34.685 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 17:29:34.722 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 17:29:34.722 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 17:29:34.722 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 17:29:34.722 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 17:29:34.723 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 17:29:34.723 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 17:29:36.020 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 17:29:36.022 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 17:29:36.023 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 17:29:36.023 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 17:29:36.023 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 17:29:36.024 +03:00 [DBG] Error Url: /home/error
2020-07-28 17:29:36.024 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 17:30:05.012 +03:00 [INF] Removing 0 grants
2020-07-28 17:30:05.022 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:30:29.135 +03:00 [ERR] An unhandled exception has occurred while executing the request.
MailKit.Net.Smtp.SmtpCommandException: 5.7.1 [1] Message rejected under suspicion of SPAM; https://ya.cc/1IrBc 1595946601-iJoGHrdrzR-U1Eqg9wG
   at MailKit.Net.Smtp.SmtpClient.DataAsync(FormatOptions options, MimeMessage message, Int64 size, Boolean doAsync, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, Boolean doAsync, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, Boolean doAsync, CancellationToken cancellationToken, ITransferProgress progress)
   at IdentityServer.Services.EmailService.SendEmailAsync(String email, String subject, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Services\EmailService.cs:line 28
   at IdentityServer.Controllers.AccountController.Register(RegisterViewModel model) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 293
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-28 17:30:35.038 +03:00 [INF] Removing 0 grants
2020-07-28 17:30:35.041 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:31:05.055 +03:00 [INF] Removing 0 grants
2020-07-28 17:31:05.060 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:31:35.068 +03:00 [INF] Removing 0 grants
2020-07-28 17:31:35.071 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:32:05.093 +03:00 [INF] Removing 0 grants
2020-07-28 17:32:05.097 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:32:35.116 +03:00 [INF] Removing 0 grants
2020-07-28 17:32:35.121 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:33:05.137 +03:00 [INF] Removing 0 grants
2020-07-28 17:33:05.146 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:33:35.154 +03:00 [INF] Removing 0 grants
2020-07-28 17:33:35.158 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:34:05.160 +03:00 [INF] Removing 0 grants
2020-07-28 17:34:05.163 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:34:35.176 +03:00 [INF] Removing 0 grants
2020-07-28 17:34:35.181 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:35:05.194 +03:00 [INF] Removing 0 grants
2020-07-28 17:35:05.197 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:35:35.207 +03:00 [INF] Removing 0 grants
2020-07-28 17:35:35.216 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:36:05.224 +03:00 [INF] Removing 0 grants
2020-07-28 17:36:05.227 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:36:35.242 +03:00 [INF] Removing 0 grants
2020-07-28 17:36:35.245 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:37:05.256 +03:00 [INF] Removing 0 grants
2020-07-28 17:37:05.259 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:37:35.269 +03:00 [INF] Removing 0 grants
2020-07-28 17:37:35.271 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:38:05.287 +03:00 [INF] Removing 0 grants
2020-07-28 17:38:05.298 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:38:35.302 +03:00 [INF] Removing 0 grants
2020-07-28 17:38:35.304 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:39:05.318 +03:00 [INF] Removing 0 grants
2020-07-28 17:39:05.321 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:39:35.332 +03:00 [INF] Removing 0 grants
2020-07-28 17:39:35.334 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:40:05.340 +03:00 [INF] Removing 0 grants
2020-07-28 17:40:05.341 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:40:35.356 +03:00 [INF] Removing 0 grants
2020-07-28 17:40:35.358 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:41:05.365 +03:00 [INF] Removing 0 grants
2020-07-28 17:41:05.367 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:41:35.379 +03:00 [INF] Removing 0 grants
2020-07-28 17:41:35.382 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:42:05.393 +03:00 [INF] Removing 0 grants
2020-07-28 17:42:05.395 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:42:35.401 +03:00 [INF] Removing 0 grants
2020-07-28 17:42:35.403 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:43:05.410 +03:00 [INF] Removing 0 grants
2020-07-28 17:43:05.412 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:43:35.427 +03:00 [INF] Removing 0 grants
2020-07-28 17:43:35.437 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:44:05.440 +03:00 [INF] Removing 0 grants
2020-07-28 17:44:05.441 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:44:35.445 +03:00 [INF] Removing 0 grants
2020-07-28 17:44:35.447 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:45:05.457 +03:00 [INF] Removing 0 grants
2020-07-28 17:45:05.459 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:45:35.466 +03:00 [INF] Removing 0 grants
2020-07-28 17:45:35.467 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:46:05.470 +03:00 [INF] Removing 0 grants
2020-07-28 17:46:05.472 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:46:35.474 +03:00 [INF] Removing 0 grants
2020-07-28 17:46:35.476 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:47:05.489 +03:00 [INF] Removing 0 grants
2020-07-28 17:47:05.491 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:47:35.503 +03:00 [INF] Removing 0 grants
2020-07-28 17:47:35.506 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:48:05.519 +03:00 [INF] Removing 0 grants
2020-07-28 17:48:05.521 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:48:35.528 +03:00 [INF] Removing 0 grants
2020-07-28 17:48:35.529 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:49:05.544 +03:00 [INF] Removing 0 grants
2020-07-28 17:49:05.545 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:49:35.550 +03:00 [INF] Removing 0 grants
2020-07-28 17:49:35.552 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:50:05.568 +03:00 [INF] Removing 0 grants
2020-07-28 17:50:05.570 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:50:35.573 +03:00 [INF] Removing 0 grants
2020-07-28 17:50:35.575 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:51:05.587 +03:00 [INF] Removing 0 grants
2020-07-28 17:51:05.588 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:51:35.597 +03:00 [INF] Removing 0 grants
2020-07-28 17:51:35.599 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:52:05.607 +03:00 [INF] Removing 0 grants
2020-07-28 17:52:05.609 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:52:35.620 +03:00 [INF] Removing 0 grants
2020-07-28 17:52:35.622 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:53:05.637 +03:00 [INF] Removing 0 grants
2020-07-28 17:53:05.639 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:53:35.657 +03:00 [INF] Removing 0 grants
2020-07-28 17:53:35.659 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:54:05.679 +03:00 [INF] Removing 0 grants
2020-07-28 17:54:05.685 +03:00 [INF] Removing 0 device flow codes
2020-07-28 17:54:35.689 +03:00 [INF] Removing 0 grants
2020-07-28 17:54:35.691 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:01:07.235 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 18:01:07.265 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 18:01:07.265 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 18:01:07.265 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 18:01:07.266 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 18:01:07.266 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 18:01:07.266 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 18:01:08.485 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 18:01:08.487 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 18:01:08.487 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 18:01:08.487 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 18:01:08.488 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 18:01:08.488 +03:00 [DBG] Error Url: /home/error
2020-07-28 18:01:08.488 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 18:01:08.809 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'IdentityServer.Services.EmailService' while attempting to activate 'IdentityServer.Controllers.AccountController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass4_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass5_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-28 18:01:37.591 +03:00 [INF] Removing 0 grants
2020-07-28 18:01:37.604 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:02:07.619 +03:00 [INF] Removing 0 grants
2020-07-28 18:02:07.621 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:03:21.272 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 18:03:21.307 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 18:03:21.307 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 18:03:21.308 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 18:03:21.308 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 18:03:21.308 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 18:03:21.309 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 18:03:22.363 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 18:03:22.364 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 18:03:22.365 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 18:03:22.365 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 18:03:22.365 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 18:03:22.365 +03:00 [DBG] Error Url: /home/error
2020-07-28 18:03:22.366 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 18:03:51.670 +03:00 [INF] Removing 0 grants
2020-07-28 18:03:51.682 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:04:21.703 +03:00 [INF] Removing 0 grants
2020-07-28 18:04:21.706 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:04:52.888 +03:00 [INF] Removing 0 grants
2020-07-28 18:04:54.576 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:05:06.527 +03:00 [ERR] An unhandled exception has occurred while executing the request.
MailKit.Security.SslHandshakeException: An error occurred while attempting to establish an SSL or TLS connection.

This usually means that the SSL certificate presented by the server is not trusted by the system for one or more of
the following reasons:

1. The server is using a self-signed certificate which cannot be verified.
2. The local system is missing a Root or Intermediate certificate needed to verify the server's certificate.
3. A Certificate Authority CRL server for one or more of the certificates in the chain is temporarily unavailable.
4. The certificate presented by the server is expired or invalid.

Another possibility is that you are trying to connect to a port which does not support SSL/TLS.

It is also possible that the set of SSL/TLS protocols supported by the client and server do not match.

See https://github.com/jstedfast/MailKit/blob/master/FAQ.md#SslHandshakeException for possible solutions.

 ---> System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslStream.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsClient(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsClientAsync>b__64_2(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at MailKit.Net.Smtp.SmtpClient.ConnectAsync(String host, Int32 port, SecureSocketOptions options, Boolean doAsync, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MailKit.Net.Smtp.SmtpClient.ConnectAsync(String host, Int32 port, SecureSocketOptions options, Boolean doAsync, CancellationToken cancellationToken)
   at IdentityServer.Services.EmailService.SendEmailAsync(String email, String subject, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Services\EmailService.cs:line 36
   at IdentityServer.Controllers.AccountController.Register(RegisterViewModel model) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 296
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-28 18:05:06.799 +03:00 [ERR] An exception was thrown attempting to execute the error handler.
System.InvalidOperationException: Invalid non-ASCII or control character in header: 0x000D
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowInvalidHeaderCharacter(Char ch)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ValidateHeaderValueCharacters(StringValues headerValues)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.AddValueFast(String key, StringValues value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.System.Collections.Generic.IDictionary<System.String,Microsoft.Extensions.Primitives.StringValues>.Add(String key, StringValues value)
   at IdentityServer.Extensions.HttpResponseExtensions.AddApplicationError(HttpResponse response, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Extensions\HttpResponseExtensions.cs:line 13
   at IdentityServer.Startup.<>c.<<Configure>b__4_3>d.MoveNext() in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Startup.cs:line 125
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)
2020-07-28 18:05:07.046 +03:00 [ERR] An unhandled exception has occurred while executing the request.
MailKit.Security.SslHandshakeException: An error occurred while attempting to establish an SSL or TLS connection.

This usually means that the SSL certificate presented by the server is not trusted by the system for one or more of
the following reasons:

1. The server is using a self-signed certificate which cannot be verified.
2. The local system is missing a Root or Intermediate certificate needed to verify the server's certificate.
3. A Certificate Authority CRL server for one or more of the certificates in the chain is temporarily unavailable.
4. The certificate presented by the server is expired or invalid.

Another possibility is that you are trying to connect to a port which does not support SSL/TLS.

It is also possible that the set of SSL/TLS protocols supported by the client and server do not match.

See https://github.com/jstedfast/MailKit/blob/master/FAQ.md#SslHandshakeException for possible solutions.

 ---> System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslStream.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsClient(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsClientAsync>b__64_2(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at MailKit.Net.Smtp.SmtpClient.ConnectAsync(String host, Int32 port, SecureSocketOptions options, Boolean doAsync, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MailKit.Net.Smtp.SmtpClient.ConnectAsync(String host, Int32 port, SecureSocketOptions options, Boolean doAsync, CancellationToken cancellationToken)
   at IdentityServer.Services.EmailService.SendEmailAsync(String email, String subject, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Services\EmailService.cs:line 36
   at IdentityServer.Controllers.AccountController.Register(RegisterViewModel model) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 296
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-07-28 18:05:24.587 +03:00 [INF] Removing 0 grants
2020-07-28 18:05:24.592 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:05:54.600 +03:00 [INF] Removing 0 grants
2020-07-28 18:05:54.603 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:06:24.619 +03:00 [INF] Removing 0 grants
2020-07-28 18:06:24.622 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:06:54.638 +03:00 [INF] Removing 0 grants
2020-07-28 18:06:54.642 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:07:24.651 +03:00 [INF] Removing 0 grants
2020-07-28 18:07:24.654 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:07:54.671 +03:00 [INF] Removing 0 grants
2020-07-28 18:07:54.674 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:08:24.680 +03:00 [INF] Removing 0 grants
2020-07-28 18:08:24.683 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:08:56.269 +03:00 [INF] Removing 0 grants
2020-07-28 18:08:56.271 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:08:58.124 +03:00 [ERR] An unhandled exception has occurred while executing the request.
MailKit.Security.SslHandshakeException: An error occurred while attempting to establish an SSL or TLS connection.

This usually means that the SSL certificate presented by the server is not trusted by the system for one or more of
the following reasons:

1. The server is using a self-signed certificate which cannot be verified.
2. The local system is missing a Root or Intermediate certificate needed to verify the server's certificate.
3. A Certificate Authority CRL server for one or more of the certificates in the chain is temporarily unavailable.
4. The certificate presented by the server is expired or invalid.

Another possibility is that you are trying to connect to a port which does not support SSL/TLS.

It is also possible that the set of SSL/TLS protocols supported by the client and server do not match.

See https://github.com/jstedfast/MailKit/blob/master/FAQ.md#SslHandshakeException for possible solutions.

 ---> System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslStream.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsClient(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsClientAsync>b__64_2(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at MailKit.Net.Smtp.SmtpClient.ConnectAsync(String host, Int32 port, SecureSocketOptions options, Boolean doAsync, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MailKit.Net.Smtp.SmtpClient.ConnectAsync(String host, Int32 port, SecureSocketOptions options, Boolean doAsync, CancellationToken cancellationToken)
   at IdentityServer.Services.EmailService.SendEmailAsync(String email, String subject, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Services\EmailService.cs:line 36
   at IdentityServer.Controllers.AccountController.Register(RegisterViewModel model) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 296
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-28 18:08:58.329 +03:00 [ERR] An exception was thrown attempting to execute the error handler.
System.InvalidOperationException: Invalid non-ASCII or control character in header: 0x000D
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowInvalidHeaderCharacter(Char ch)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ValidateHeaderValueCharacters(StringValues headerValues)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.AddValueFast(String key, StringValues value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.System.Collections.Generic.IDictionary<System.String,Microsoft.Extensions.Primitives.StringValues>.Add(String key, StringValues value)
   at IdentityServer.Extensions.HttpResponseExtensions.AddApplicationError(HttpResponse response, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Extensions\HttpResponseExtensions.cs:line 13
   at IdentityServer.Startup.<>c.<<Configure>b__4_3>d.MoveNext() in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Startup.cs:line 125
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)
2020-07-28 18:08:58.523 +03:00 [ERR] An unhandled exception has occurred while executing the request.
MailKit.Security.SslHandshakeException: An error occurred while attempting to establish an SSL or TLS connection.

This usually means that the SSL certificate presented by the server is not trusted by the system for one or more of
the following reasons:

1. The server is using a self-signed certificate which cannot be verified.
2. The local system is missing a Root or Intermediate certificate needed to verify the server's certificate.
3. A Certificate Authority CRL server for one or more of the certificates in the chain is temporarily unavailable.
4. The certificate presented by the server is expired or invalid.

Another possibility is that you are trying to connect to a port which does not support SSL/TLS.

It is also possible that the set of SSL/TLS protocols supported by the client and server do not match.

See https://github.com/jstedfast/MailKit/blob/master/FAQ.md#SslHandshakeException for possible solutions.

 ---> System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslStream.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsClient(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsClientAsync>b__64_2(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at MailKit.Net.Smtp.SmtpClient.ConnectAsync(String host, Int32 port, SecureSocketOptions options, Boolean doAsync, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MailKit.Net.Smtp.SmtpClient.ConnectAsync(String host, Int32 port, SecureSocketOptions options, Boolean doAsync, CancellationToken cancellationToken)
   at IdentityServer.Services.EmailService.SendEmailAsync(String email, String subject, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Services\EmailService.cs:line 36
   at IdentityServer.Controllers.AccountController.Register(RegisterViewModel model) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 296
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-07-28 18:09:26.287 +03:00 [INF] Removing 0 grants
2020-07-28 18:09:26.291 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:09:56.303 +03:00 [INF] Removing 0 grants
2020-07-28 18:09:56.305 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:10:26.318 +03:00 [INF] Removing 0 grants
2020-07-28 18:10:26.320 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:10:56.332 +03:00 [INF] Removing 0 grants
2020-07-28 18:10:56.334 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:11:26.347 +03:00 [INF] Removing 0 grants
2020-07-28 18:11:26.349 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:11:56.362 +03:00 [INF] Removing 0 grants
2020-07-28 18:11:56.365 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:12:26.377 +03:00 [INF] Removing 0 grants
2020-07-28 18:12:26.379 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:12:56.398 +03:00 [INF] Removing 0 grants
2020-07-28 18:12:56.400 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:13:21.672 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 18:13:21.718 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 18:13:21.719 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 18:13:21.719 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 18:13:21.719 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 18:13:21.719 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 18:13:21.720 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 18:13:23.102 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 18:13:23.104 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 18:13:23.104 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 18:13:23.105 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 18:13:23.105 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 18:13:23.105 +03:00 [DBG] Error Url: /home/error
2020-07-28 18:13:23.105 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 18:13:52.083 +03:00 [INF] Removing 0 grants
2020-07-28 18:13:52.094 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:14:22.113 +03:00 [INF] Removing 0 grants
2020-07-28 18:14:22.115 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:14:28.291 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Unknown initialization parameter: MimeKit.MailboxAddress
   at MimeKit.MimeMessage..ctor(Object[] args)
   at IdentityServer.Services.EmailService.SendEmailAsync(String email, String subject, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Services\EmailService.cs:line 23
   at IdentityServer.Controllers.AccountController.Register(RegisterViewModel model) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 296
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-28 18:14:52.143 +03:00 [INF] Removing 0 grants
2020-07-28 18:14:52.148 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:15:22.160 +03:00 [INF] Removing 0 grants
2020-07-28 18:15:22.162 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:15:52.171 +03:00 [INF] Removing 0 grants
2020-07-28 18:15:52.177 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:16:15.104 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Unknown initialization parameter: MimeKit.MailboxAddress
   at MimeKit.MimeMessage..ctor(Object[] args)
   at IdentityServer.Services.EmailService.SendEmailAsync(String email, String subject, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Services\EmailService.cs:line 23
   at IdentityServer.Controllers.AccountController.Register(RegisterViewModel model) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 296
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-28 18:16:22.184 +03:00 [INF] Removing 0 grants
2020-07-28 18:16:22.187 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:16:52.207 +03:00 [INF] Removing 0 grants
2020-07-28 18:16:52.211 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:17:22.219 +03:00 [INF] Removing 0 grants
2020-07-28 18:17:22.227 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:19:09.652 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 18:19:09.682 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 18:19:09.682 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 18:19:09.682 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 18:19:09.683 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 18:19:09.683 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 18:19:09.683 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 18:19:10.588 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 18:19:10.590 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 18:19:10.591 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 18:19:10.591 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 18:19:10.591 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 18:19:10.591 +03:00 [DBG] Error Url: /home/error
2020-07-28 18:19:10.591 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 18:19:39.950 +03:00 [INF] Removing 0 grants
2020-07-28 18:19:39.961 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:20:13.154 +03:00 [INF] Removing 0 grants
2020-07-28 18:20:13.323 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:20:23.683 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Unknown initialization parameter: MimeKit.MailboxAddress
   at MimeKit.MimeMessage..ctor(Object[] args)
   at IdentityServer.Services.EmailService.SendEmailAsync(String email, String subject, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Services\EmailService.cs:line 23
   at IdentityServer.Controllers.AccountController.Register(RegisterViewModel model) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 296
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-28 18:20:43.335 +03:00 [INF] Removing 0 grants
2020-07-28 18:20:43.337 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:21:13.350 +03:00 [INF] Removing 0 grants
2020-07-28 18:21:13.353 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:21:43.369 +03:00 [INF] Removing 0 grants
2020-07-28 18:21:43.371 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:22:13.386 +03:00 [INF] Removing 0 grants
2020-07-28 18:22:13.390 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:22:43.406 +03:00 [INF] Removing 0 grants
2020-07-28 18:22:43.409 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:23:13.425 +03:00 [INF] Removing 0 grants
2020-07-28 18:23:13.427 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:23:19.392 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 18:23:19.425 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 18:23:19.426 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 18:23:19.426 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 18:23:19.426 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 18:23:19.426 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 18:23:19.426 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 18:23:20.512 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 18:23:20.514 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 18:23:20.514 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 18:23:20.515 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 18:23:20.515 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 18:23:20.515 +03:00 [DBG] Error Url: /home/error
2020-07-28 18:23:20.515 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 18:23:49.759 +03:00 [INF] Removing 0 grants
2020-07-28 18:23:49.770 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:24:19.787 +03:00 [INF] Removing 0 grants
2020-07-28 18:24:19.789 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:24:44.103 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Unknown initialization parameter: MimeKit.MailboxAddress
   at MimeKit.MimeMessage..ctor(Object[] args)
   at IdentityServer.Services.EmailService.SendEmailAsync(String email, String subject, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Services\EmailService.cs:line 23
   at IdentityServer.Controllers.AccountController.Register(RegisterViewModel model) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 296
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-28 18:24:49.849 +03:00 [INF] Removing 0 grants
2020-07-28 18:24:49.853 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:25:19.867 +03:00 [INF] Removing 0 grants
2020-07-28 18:25:19.871 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:25:49.888 +03:00 [INF] Removing 0 grants
2020-07-28 18:25:49.890 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:26:19.904 +03:00 [INF] Removing 0 grants
2020-07-28 18:26:19.908 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:26:49.926 +03:00 [INF] Removing 0 grants
2020-07-28 18:26:49.930 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:27:19.944 +03:00 [INF] Removing 0 grants
2020-07-28 18:27:19.946 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:27:49.957 +03:00 [INF] Removing 0 grants
2020-07-28 18:27:49.960 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:28:19.978 +03:00 [INF] Removing 0 grants
2020-07-28 18:28:19.982 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:28:50.000 +03:00 [INF] Removing 0 grants
2020-07-28 18:28:50.003 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:29:20.022 +03:00 [INF] Removing 0 grants
2020-07-28 18:29:20.024 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:29:50.035 +03:00 [INF] Removing 0 grants
2020-07-28 18:29:50.040 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:30:20.054 +03:00 [INF] Removing 0 grants
2020-07-28 18:30:20.057 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:30:50.069 +03:00 [INF] Removing 0 grants
2020-07-28 18:30:50.072 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:31:20.085 +03:00 [INF] Removing 0 grants
2020-07-28 18:31:20.087 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:31:37.854 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 18:31:37.893 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 18:31:37.893 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 18:31:37.894 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 18:31:37.894 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 18:31:37.894 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 18:31:37.894 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 18:31:38.902 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 18:31:38.904 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 18:31:38.904 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 18:31:38.904 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 18:31:38.904 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 18:31:38.904 +03:00 [DBG] Error Url: /home/error
2020-07-28 18:31:38.905 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 18:32:08.188 +03:00 [INF] Removing 0 grants
2020-07-28 18:32:08.199 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:32:38.587 +03:00 [INF] Removing 0 grants
2020-07-28 18:32:38.648 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:32:46.487 +03:00 [ERR] An unhandled exception has occurred while executing the request.
MailKit.Security.SslHandshakeException: An error occurred while attempting to establish an SSL or TLS connection.

This usually means that the SSL certificate presented by the server is not trusted by the system for one or more of
the following reasons:

1. The server is using a self-signed certificate which cannot be verified.
2. The local system is missing a Root or Intermediate certificate needed to verify the server's certificate.
3. A Certificate Authority CRL server for one or more of the certificates in the chain is temporarily unavailable.
4. The certificate presented by the server is expired or invalid.

Another possibility is that you are trying to connect to a port which does not support SSL/TLS.

It is also possible that the set of SSL/TLS protocols supported by the client and server do not match.

See https://github.com/jstedfast/MailKit/blob/master/FAQ.md#SslHandshakeException for possible solutions.

 ---> System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslStream.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsClient(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsClientAsync>b__64_2(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at MailKit.Net.Smtp.SmtpClient.ConnectAsync(String host, Int32 port, SecureSocketOptions options, Boolean doAsync, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MailKit.Net.Smtp.SmtpClient.ConnectAsync(String host, Int32 port, SecureSocketOptions options, Boolean doAsync, CancellationToken cancellationToken)
   at IdentityServer.Services.EmailService.SendEmailAsync(String email, String subject, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Services\EmailService.cs:line 41
   at IdentityServer.Controllers.AccountController.Register(RegisterViewModel model) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 296
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-28 18:32:46.740 +03:00 [ERR] An exception was thrown attempting to execute the error handler.
System.InvalidOperationException: Invalid non-ASCII or control character in header: 0x000D
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowInvalidHeaderCharacter(Char ch)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ValidateHeaderValueCharacters(StringValues headerValues)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.AddValueFast(String key, StringValues value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.System.Collections.Generic.IDictionary<System.String,Microsoft.Extensions.Primitives.StringValues>.Add(String key, StringValues value)
   at IdentityServer.Extensions.HttpResponseExtensions.AddApplicationError(HttpResponse response, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Extensions\HttpResponseExtensions.cs:line 13
   at IdentityServer.Startup.<>c.<<Configure>b__4_3>d.MoveNext() in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Startup.cs:line 125
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)
2020-07-28 18:32:46.959 +03:00 [ERR] An unhandled exception has occurred while executing the request.
MailKit.Security.SslHandshakeException: An error occurred while attempting to establish an SSL or TLS connection.

This usually means that the SSL certificate presented by the server is not trusted by the system for one or more of
the following reasons:

1. The server is using a self-signed certificate which cannot be verified.
2. The local system is missing a Root or Intermediate certificate needed to verify the server's certificate.
3. A Certificate Authority CRL server for one or more of the certificates in the chain is temporarily unavailable.
4. The certificate presented by the server is expired or invalid.

Another possibility is that you are trying to connect to a port which does not support SSL/TLS.

It is also possible that the set of SSL/TLS protocols supported by the client and server do not match.

See https://github.com/jstedfast/MailKit/blob/master/FAQ.md#SslHandshakeException for possible solutions.

 ---> System.IO.IOException: The handshake failed due to an unexpected packet format.
   at System.Net.Security.SslStream.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslStream.PartialFrameCallback(AsyncProtocolRequest asyncRequest)
--- End of stack trace from previous location where exception was thrown ---
   at System.Net.Security.SslStream.InternalEndProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Net.Security.SslStream.EndProcessAuthentication(IAsyncResult result)
   at System.Net.Security.SslStream.EndAuthenticateAsClient(IAsyncResult asyncResult)
   at System.Net.Security.SslStream.<>c.<AuthenticateAsClientAsync>b__64_2(IAsyncResult iar)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
--- End of stack trace from previous location where exception was thrown ---
   at MailKit.Net.Smtp.SmtpClient.ConnectAsync(String host, Int32 port, SecureSocketOptions options, Boolean doAsync, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MailKit.Net.Smtp.SmtpClient.ConnectAsync(String host, Int32 port, SecureSocketOptions options, Boolean doAsync, CancellationToken cancellationToken)
   at IdentityServer.Services.EmailService.SendEmailAsync(String email, String subject, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Services\EmailService.cs:line 41
   at IdentityServer.Controllers.AccountController.Register(RegisterViewModel model) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 296
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-07-28 18:33:08.684 +03:00 [INF] Removing 0 grants
2020-07-28 18:33:08.689 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:33:38.696 +03:00 [INF] Removing 0 grants
2020-07-28 18:33:38.699 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:34:08.713 +03:00 [INF] Removing 0 grants
2020-07-28 18:34:08.716 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:34:38.735 +03:00 [INF] Removing 0 grants
2020-07-28 18:34:38.737 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:35:08.768 +03:00 [INF] Removing 0 grants
2020-07-28 18:35:08.773 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:35:38.788 +03:00 [INF] Removing 0 grants
2020-07-28 18:35:38.792 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:36:06.369 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 18:36:06.407 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 18:36:06.407 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 18:36:06.408 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 18:36:06.408 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 18:36:06.408 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 18:36:06.409 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 18:36:07.823 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 18:36:07.825 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 18:36:07.825 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 18:36:07.826 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 18:36:07.826 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 18:36:07.826 +03:00 [DBG] Error Url: /home/error
2020-07-28 18:36:07.826 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 18:36:36.706 +03:00 [INF] Removing 0 grants
2020-07-28 18:36:36.716 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:36:59.215 +03:00 [ERR] An unhandled exception has occurred while executing the request.
MailKit.Security.AuthenticationException: 534: 5.7.9 Application-specific password required. Learn more at
5.7.9  https://support.google.com/mail/?p=InvalidSecondFactor p14sm18853598wrx.90 - gsmtp
 ---> MailKit.Net.Smtp.SmtpCommandException: 5.7.9 Application-specific password required. Learn more at
5.7.9  https://support.google.com/mail/?p=InvalidSecondFactor p14sm18853598wrx.90 - gsmtp
   --- End of inner exception stack trace ---
   at MailKit.Net.Smtp.SmtpClient.AuthenticateAsync(Encoding encoding, ICredentials credentials, Boolean doAsync, CancellationToken cancellationToken)
   at IdentityServer.Services.EmailService.SendEmailAsync(String email, String subject, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Services\EmailService.cs:line 43
   at IdentityServer.Controllers.AccountController.Register(RegisterViewModel model) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 296
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-28 18:36:59.429 +03:00 [ERR] An exception was thrown attempting to execute the error handler.
System.InvalidOperationException: Invalid non-ASCII or control character in header: 0x000A
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowInvalidHeaderCharacter(Char ch)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ValidateHeaderValueCharacters(StringValues headerValues)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.AddValueFast(String key, StringValues value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.System.Collections.Generic.IDictionary<System.String,Microsoft.Extensions.Primitives.StringValues>.Add(String key, StringValues value)
   at IdentityServer.Extensions.HttpResponseExtensions.AddApplicationError(HttpResponse response, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Extensions\HttpResponseExtensions.cs:line 13
   at IdentityServer.Startup.<>c.<<Configure>b__4_3>d.MoveNext() in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Startup.cs:line 125
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)
2020-07-28 18:36:59.633 +03:00 [ERR] An unhandled exception has occurred while executing the request.
MailKit.Security.AuthenticationException: 534: 5.7.9 Application-specific password required. Learn more at
5.7.9  https://support.google.com/mail/?p=InvalidSecondFactor p14sm18853598wrx.90 - gsmtp
 ---> MailKit.Net.Smtp.SmtpCommandException: 5.7.9 Application-specific password required. Learn more at
5.7.9  https://support.google.com/mail/?p=InvalidSecondFactor p14sm18853598wrx.90 - gsmtp
   --- End of inner exception stack trace ---
   at MailKit.Net.Smtp.SmtpClient.AuthenticateAsync(Encoding encoding, ICredentials credentials, Boolean doAsync, CancellationToken cancellationToken)
   at IdentityServer.Services.EmailService.SendEmailAsync(String email, String subject, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Services\EmailService.cs:line 43
   at IdentityServer.Controllers.AccountController.Register(RegisterViewModel model) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 296
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-07-28 18:37:06.744 +03:00 [INF] Removing 0 grants
2020-07-28 18:37:06.752 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:37:36.760 +03:00 [INF] Removing 0 grants
2020-07-28 18:37:36.766 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:38:06.774 +03:00 [INF] Removing 0 grants
2020-07-28 18:38:06.777 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:38:36.790 +03:00 [INF] Removing 0 grants
2020-07-28 18:38:36.793 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:39:06.807 +03:00 [INF] Removing 0 grants
2020-07-28 18:39:06.809 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:39:36.817 +03:00 [INF] Removing 0 grants
2020-07-28 18:39:36.820 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:40:06.837 +03:00 [INF] Removing 0 grants
2020-07-28 18:40:06.839 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:40:36.856 +03:00 [INF] Removing 0 grants
2020-07-28 18:40:36.858 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:41:06.863 +03:00 [INF] Removing 0 grants
2020-07-28 18:41:06.865 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:41:36.877 +03:00 [INF] Removing 0 grants
2020-07-28 18:41:36.880 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:42:06.896 +03:00 [INF] Removing 0 grants
2020-07-28 18:42:06.898 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:42:36.918 +03:00 [INF] Removing 0 grants
2020-07-28 18:42:36.920 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:43:06.940 +03:00 [INF] Removing 0 grants
2020-07-28 18:43:06.942 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:43:36.956 +03:00 [INF] Removing 0 grants
2020-07-28 18:43:36.958 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:44:06.976 +03:00 [INF] Removing 0 grants
2020-07-28 18:44:06.978 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:44:36.990 +03:00 [INF] Removing 0 grants
2020-07-28 18:44:36.992 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:45:07.006 +03:00 [INF] Removing 0 grants
2020-07-28 18:45:07.008 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:45:37.022 +03:00 [INF] Removing 0 grants
2020-07-28 18:45:37.024 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:46:07.033 +03:00 [INF] Removing 0 grants
2020-07-28 18:46:07.035 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:46:37.049 +03:00 [INF] Removing 0 grants
2020-07-28 18:46:37.051 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:47:07.066 +03:00 [INF] Removing 0 grants
2020-07-28 18:47:07.069 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:47:37.086 +03:00 [INF] Removing 0 grants
2020-07-28 18:47:37.088 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:48:07.102 +03:00 [INF] Removing 0 grants
2020-07-28 18:48:07.104 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:48:37.111 +03:00 [INF] Removing 0 grants
2020-07-28 18:48:37.113 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:49:07.127 +03:00 [INF] Removing 0 grants
2020-07-28 18:49:07.129 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:49:37.145 +03:00 [INF] Removing 0 grants
2020-07-28 18:49:37.146 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:50:07.159 +03:00 [INF] Removing 0 grants
2020-07-28 18:50:07.161 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:50:37.174 +03:00 [INF] Removing 0 grants
2020-07-28 18:50:37.176 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:51:07.190 +03:00 [INF] Removing 0 grants
2020-07-28 18:51:07.192 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:51:37.207 +03:00 [INF] Removing 0 grants
2020-07-28 18:51:37.209 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:52:07.227 +03:00 [INF] Removing 0 grants
2020-07-28 18:52:07.233 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:52:37.237 +03:00 [INF] Removing 0 grants
2020-07-28 18:52:37.239 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:53:07.253 +03:00 [INF] Removing 0 grants
2020-07-28 18:53:07.254 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:53:37.258 +03:00 [INF] Removing 0 grants
2020-07-28 18:53:37.259 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:54:07.272 +03:00 [INF] Removing 0 grants
2020-07-28 18:54:07.279 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:54:37.296 +03:00 [INF] Removing 0 grants
2020-07-28 18:54:37.304 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:55:07.319 +03:00 [INF] Removing 0 grants
2020-07-28 18:55:07.321 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:55:37.333 +03:00 [INF] Removing 0 grants
2020-07-28 18:55:37.335 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:56:07.351 +03:00 [INF] Removing 0 grants
2020-07-28 18:56:07.353 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:56:37.364 +03:00 [INF] Removing 0 grants
2020-07-28 18:56:37.366 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:57:07.378 +03:00 [INF] Removing 0 grants
2020-07-28 18:57:07.380 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:57:37.389 +03:00 [INF] Removing 0 grants
2020-07-28 18:57:37.391 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:58:07.400 +03:00 [INF] Removing 0 grants
2020-07-28 18:58:07.402 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:58:37.414 +03:00 [INF] Removing 0 grants
2020-07-28 18:58:37.416 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:59:07.430 +03:00 [INF] Removing 0 grants
2020-07-28 18:59:07.433 +03:00 [INF] Removing 0 device flow codes
2020-07-28 18:59:37.445 +03:00 [INF] Removing 0 grants
2020-07-28 18:59:37.446 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:00:07.459 +03:00 [INF] Removing 0 grants
2020-07-28 19:00:07.461 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:00:37.473 +03:00 [INF] Removing 0 grants
2020-07-28 19:00:37.477 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:01:07.487 +03:00 [INF] Removing 0 grants
2020-07-28 19:01:07.489 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:01:37.492 +03:00 [INF] Removing 0 grants
2020-07-28 19:01:37.493 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:02:07.511 +03:00 [INF] Removing 0 grants
2020-07-28 19:02:07.514 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:02:37.529 +03:00 [INF] Removing 0 grants
2020-07-28 19:02:37.530 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:03:07.534 +03:00 [INF] Removing 0 grants
2020-07-28 19:03:07.536 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:03:37.549 +03:00 [INF] Removing 0 grants
2020-07-28 19:03:37.551 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:04:07.565 +03:00 [INF] Removing 0 grants
2020-07-28 19:04:07.568 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:04:37.581 +03:00 [INF] Removing 0 grants
2020-07-28 19:04:37.583 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:05:07.597 +03:00 [INF] Removing 0 grants
2020-07-28 19:05:07.598 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:05:37.611 +03:00 [INF] Removing 0 grants
2020-07-28 19:05:37.613 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:06:07.614 +03:00 [INF] Removing 0 grants
2020-07-28 19:06:07.616 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:06:37.627 +03:00 [INF] Removing 0 grants
2020-07-28 19:06:37.629 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:07:07.645 +03:00 [INF] Removing 0 grants
2020-07-28 19:07:07.646 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:07:37.662 +03:00 [INF] Removing 0 grants
2020-07-28 19:07:37.664 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:08:07.681 +03:00 [INF] Removing 0 grants
2020-07-28 19:08:07.683 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:08:37.691 +03:00 [INF] Removing 0 grants
2020-07-28 19:08:37.692 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:09:07.707 +03:00 [INF] Removing 0 grants
2020-07-28 19:09:07.709 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:09:37.716 +03:00 [INF] Removing 0 grants
2020-07-28 19:09:37.718 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:10:07.721 +03:00 [INF] Removing 0 grants
2020-07-28 19:10:07.723 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:10:37.737 +03:00 [INF] Removing 0 grants
2020-07-28 19:10:37.739 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:11:07.754 +03:00 [INF] Removing 0 grants
2020-07-28 19:11:07.756 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:11:27.229 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 19:11:27.259 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 19:11:27.259 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 19:11:27.259 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 19:11:27.260 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 19:11:27.260 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 19:11:27.260 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 19:11:28.123 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 19:11:28.125 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 19:11:28.125 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 19:11:28.126 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 19:11:28.126 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 19:11:28.126 +03:00 [DBG] Error Url: /home/error
2020-07-28 19:11:28.126 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 19:11:57.537 +03:00 [INF] Removing 0 grants
2020-07-28 19:11:57.548 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:12:25.771 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 19:12:25.804 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 19:12:25.804 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 19:12:25.805 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 19:12:25.805 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 19:12:25.805 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 19:12:25.805 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 19:12:26.876 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 19:12:26.878 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 19:12:26.878 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 19:12:26.879 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 19:12:26.879 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 19:12:26.879 +03:00 [DBG] Error Url: /home/error
2020-07-28 19:12:26.879 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 19:12:56.088 +03:00 [INF] Removing 0 grants
2020-07-28 19:12:56.098 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:13:14.573 +03:00 [ERR] An unhandled exception has occurred while executing the request.
MailKit.Net.Smtp.SmtpCommandException: 5.7.1 [1] Message rejected under suspicion of SPAM; https://ya.cc/1IrBc 1595952767-hYqLGPs1r1-ClfW3bYR
   at MailKit.Net.Smtp.SmtpClient.DataAsync(FormatOptions options, MimeMessage message, Int64 size, Boolean doAsync, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, Boolean doAsync, CancellationToken cancellationToken, ITransferProgress progress)
   at MailKit.Net.Smtp.SmtpClient.SendAsync(FormatOptions options, MimeMessage message, MailboxAddress sender, IList`1 recipients, Boolean doAsync, CancellationToken cancellationToken, ITransferProgress progress)
   at IdentityServer.Services.EmailService.SendEmailAsync(String email, String subject, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Services\EmailService.cs:line 44
   at IdentityServer.Controllers.AccountController.Register(RegisterViewModel model) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Controllers\AccountController.cs:line 296
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-28 19:13:26.115 +03:00 [INF] Removing 0 grants
2020-07-28 19:13:26.117 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:13:56.135 +03:00 [INF] Removing 0 grants
2020-07-28 19:13:56.138 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:14:26.154 +03:00 [INF] Removing 0 grants
2020-07-28 19:14:26.157 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:14:56.161 +03:00 [INF] Removing 0 grants
2020-07-28 19:14:56.163 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:15:26.179 +03:00 [INF] Removing 0 grants
2020-07-28 19:15:26.187 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:15:56.199 +03:00 [INF] Removing 0 grants
2020-07-28 19:15:56.202 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:16:26.219 +03:00 [INF] Removing 0 grants
2020-07-28 19:16:26.221 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:16:56.238 +03:00 [INF] Removing 0 grants
2020-07-28 19:16:56.241 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:17:26.255 +03:00 [INF] Removing 0 grants
2020-07-28 19:17:26.258 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:17:56.270 +03:00 [INF] Removing 0 grants
2020-07-28 19:17:56.273 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:18:26.288 +03:00 [INF] Removing 0 grants
2020-07-28 19:18:26.291 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:18:56.302 +03:00 [INF] Removing 0 grants
2020-07-28 19:18:56.304 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:19:26.316 +03:00 [INF] Removing 0 grants
2020-07-28 19:19:26.319 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:19:56.335 +03:00 [INF] Removing 0 grants
2020-07-28 19:19:56.338 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:20:26.350 +03:00 [INF] Removing 0 grants
2020-07-28 19:20:26.352 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:20:56.364 +03:00 [INF] Removing 0 grants
2020-07-28 19:20:56.365 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:21:26.383 +03:00 [INF] Removing 0 grants
2020-07-28 19:21:26.395 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:21:56.410 +03:00 [INF] Removing 0 grants
2020-07-28 19:21:56.411 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:22:26.425 +03:00 [INF] Removing 0 grants
2020-07-28 19:22:26.427 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:22:56.442 +03:00 [INF] Removing 0 grants
2020-07-28 19:22:56.443 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:23:26.464 +03:00 [INF] Removing 0 grants
2020-07-28 19:23:26.473 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:23:56.487 +03:00 [INF] Removing 0 grants
2020-07-28 19:23:56.488 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:24:26.504 +03:00 [INF] Removing 0 grants
2020-07-28 19:24:26.505 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:24:56.518 +03:00 [INF] Removing 0 grants
2020-07-28 19:24:56.520 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:25:26.539 +03:00 [INF] Removing 0 grants
2020-07-28 19:25:26.546 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:25:56.554 +03:00 [INF] Removing 0 grants
2020-07-28 19:25:56.555 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:26:26.569 +03:00 [INF] Removing 0 grants
2020-07-28 19:26:26.572 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:26:56.584 +03:00 [INF] Removing 0 grants
2020-07-28 19:26:56.586 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:27:26.595 +03:00 [INF] Removing 0 grants
2020-07-28 19:27:26.597 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:27:56.611 +03:00 [INF] Removing 0 grants
2020-07-28 19:27:56.613 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:28:26.627 +03:00 [INF] Removing 0 grants
2020-07-28 19:28:26.629 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:28:56.647 +03:00 [INF] Removing 0 grants
2020-07-28 19:28:56.649 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:29:26.660 +03:00 [INF] Removing 0 grants
2020-07-28 19:29:26.662 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:29:56.683 +03:00 [INF] Removing 0 grants
2020-07-28 19:29:56.690 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:30:26.706 +03:00 [INF] Removing 0 grants
2020-07-28 19:30:26.708 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:30:56.725 +03:00 [INF] Removing 0 grants
2020-07-28 19:30:56.727 +03:00 [INF] Removing 0 device flow codes
2020-07-28 19:31:26.742 +03:00 [INF] Removing 0 grants
2020-07-28 19:31:26.744 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:31:58.599 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 21:31:58.633 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 21:31:58.634 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 21:31:58.634 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 21:31:58.634 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 21:31:58.635 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 21:31:58.635 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 21:31:59.831 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 21:31:59.833 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 21:31:59.834 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 21:31:59.835 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 21:31:59.835 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 21:31:59.836 +03:00 [DBG] Error Url: /home/error
2020-07-28 21:31:59.836 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 21:31:59.854 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:31:59.862 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:32:00.176 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:32:00.176 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:32:00.176 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:32:00.176 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:32:00.176 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:32:00.180 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:32:00.185 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:32:00.185 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:32:00.185 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:32:00.185 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:32:00.389 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:32:00.392 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:32:00.411 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:32:00.411 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:32:29.361 +03:00 [INF] Removing 0 grants
2020-07-28 21:32:29.386 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:32:59.407 +03:00 [INF] Removing 0 grants
2020-07-28 21:32:59.410 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:33:29.433 +03:00 [INF] Removing 0 grants
2020-07-28 21:33:29.437 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:33:40.668 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:33:40.670 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:33:40.773 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:33:40.773 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:33:40.775 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:33:40.775 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:33:40.775 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:33:40.775 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:33:40.776 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:33:40.777 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:33:40.779 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:33:40.779 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:33:40.807 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:33:40.807 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:33:59.463 +03:00 [INF] Removing 0 grants
2020-07-28 21:33:59.468 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:34:09.142 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:34:09.145 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:34:22.063 +03:00 [INF]   !
2020-07-28 21:34:29.491 +03:00 [INF] Removing 0 grants
2020-07-28 21:34:29.494 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:34:59.506 +03:00 [INF] Removing 0 grants
2020-07-28 21:34:59.511 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:35:29.528 +03:00 [INF] Removing 0 grants
2020-07-28 21:35:29.531 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:35:59.535 +03:00 [INF] Removing 0 grants
2020-07-28 21:35:59.538 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:36:05.507 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:36:05.508 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:36:05.551 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:36:05.552 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:36:05.586 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:36:05.591 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:36:05.592 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:36:05.595 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:36:05.611 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:36:05.611 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:36:05.613 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:36:05.613 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:36:05.614 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:36:05.620 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:36:05.739 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:36:05.743 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:36:19.561 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:36:19.564 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:36:19.592 +03:00 [INF] {"Username":"Dianis","Provider":null,"ProviderUserId":null,"SubjectId":"34361f74-5ce2-45d7-aa5f-182215e9db4f","DisplayName":"Dianis","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1J4I1POEVP:00000001","TimeStamp":"2020-07-28T18:36:19.0000000Z","ProcessId":23844,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-28 21:36:19.611 +03:00 [DBG] Augmenting SignInContext
2020-07-28 21:36:19.612 +03:00 [DBG] Adding idp claim with value: local
2020-07-28 21:36:19.612 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-28 21:36:19.612 +03:00 [DBG] Adding auth_time claim with value: 1595961379
2020-07-28 21:36:19.614 +03:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2020-07-28 21:36:19.625 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-28 21:36:29.547 +03:00 [INF] Removing 0 grants
2020-07-28 21:36:29.550 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:36:59.665 +03:00 [INF] Removing 0 grants
2020-07-28 21:36:59.680 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:37:29.687 +03:00 [INF] Removing 0 grants
2020-07-28 21:37:29.691 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:37:59.706 +03:00 [INF] Removing 0 grants
2020-07-28 21:37:59.708 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:38:29.730 +03:00 [INF] Removing 0 grants
2020-07-28 21:38:29.732 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:38:59.760 +03:00 [INF] Removing 0 grants
2020-07-28 21:38:59.762 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:39:29.775 +03:00 [INF] Removing 0 grants
2020-07-28 21:39:29.779 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:39:59.803 +03:00 [INF] Removing 0 grants
2020-07-28 21:39:59.806 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:40:29.809 +03:00 [INF] Removing 0 grants
2020-07-28 21:40:29.811 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:40:59.833 +03:00 [INF] Removing 0 grants
2020-07-28 21:40:59.835 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:41:29.839 +03:00 [INF] Removing 0 grants
2020-07-28 21:41:29.841 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:41:59.856 +03:00 [INF] Removing 0 grants
2020-07-28 21:41:59.858 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:42:27.028 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-28 21:42:27.030 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-28 21:42:27.030 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-28 21:42:27.031 +03:00 [INF] {"SubjectId":"34361f74-5ce2-45d7-aa5f-182215e9db4f","DisplayName":"Dianis","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1J4I1POEVQ:0000000F","TimeStamp":"2020-07-28T18:42:27.0000000Z","ProcessId":23844,"LocalIpAddress":"::1:5001","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-28 21:42:27.037 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-28 21:42:29.866 +03:00 [INF] Removing 0 grants
2020-07-28 21:42:29.868 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:42:59.873 +03:00 [INF] Removing 0 grants
2020-07-28 21:42:59.875 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:43:29.887 +03:00 [INF] Removing 0 grants
2020-07-28 21:43:29.888 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:43:59.892 +03:00 [INF] Removing 0 grants
2020-07-28 21:43:59.893 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:44:29.905 +03:00 [INF] Removing 0 grants
2020-07-28 21:44:29.907 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:44:59.920 +03:00 [INF] Removing 0 grants
2020-07-28 21:44:59.921 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:45:29.939 +03:00 [INF] Removing 0 grants
2020-07-28 21:45:29.941 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:45:59.963 +03:00 [INF] Removing 0 grants
2020-07-28 21:45:59.965 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:46:29.981 +03:00 [INF] Removing 0 grants
2020-07-28 21:46:29.982 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:47:00.003 +03:00 [INF] Removing 0 grants
2020-07-28 21:47:00.005 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:47:30.023 +03:00 [INF] Removing 0 grants
2020-07-28 21:47:30.026 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:48:00.044 +03:00 [INF] Removing 0 grants
2020-07-28 21:48:00.046 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:48:30.066 +03:00 [INF] Removing 0 grants
2020-07-28 21:48:30.069 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:49:00.077 +03:00 [INF] Removing 0 grants
2020-07-28 21:49:00.078 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:49:30.101 +03:00 [INF] Removing 0 grants
2020-07-28 21:49:30.103 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:50:00.123 +03:00 [INF] Removing 0 grants
2020-07-28 21:50:00.124 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:50:30.137 +03:00 [INF] Removing 0 grants
2020-07-28 21:50:30.138 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:51:00.148 +03:00 [INF] Removing 0 grants
2020-07-28 21:51:00.150 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:51:30.160 +03:00 [INF] Removing 0 grants
2020-07-28 21:51:30.162 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:52:00.178 +03:00 [INF] Removing 0 grants
2020-07-28 21:52:00.179 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:52:30.191 +03:00 [INF] Removing 0 grants
2020-07-28 21:52:30.193 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:53:00.209 +03:00 [INF] Removing 0 grants
2020-07-28 21:53:00.211 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:53:30.234 +03:00 [INF] Removing 0 grants
2020-07-28 21:53:30.235 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:54:00.250 +03:00 [INF] Removing 0 grants
2020-07-28 21:54:00.251 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:54:30.267 +03:00 [INF] Removing 0 grants
2020-07-28 21:54:30.269 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:55:00.281 +03:00 [INF] Removing 0 grants
2020-07-28 21:55:00.282 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:55:30.294 +03:00 [INF] Removing 0 grants
2020-07-28 21:55:30.295 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:56:00.311 +03:00 [INF] Removing 0 grants
2020-07-28 21:56:00.313 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:56:30.322 +03:00 [INF] Removing 0 grants
2020-07-28 21:56:30.323 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:57:00.326 +03:00 [INF] Removing 0 grants
2020-07-28 21:57:00.327 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:57:30.339 +03:00 [INF] Removing 0 grants
2020-07-28 21:57:30.340 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:58:00.346 +03:00 [INF] Removing 0 grants
2020-07-28 21:58:00.348 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:58:30.356 +03:00 [INF] Removing 0 grants
2020-07-28 21:58:30.359 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:59:00.372 +03:00 [INF] Removing 0 grants
2020-07-28 21:59:00.373 +03:00 [INF] Removing 0 device flow codes
2020-07-28 21:59:30.390 +03:00 [INF] Removing 0 grants
2020-07-28 21:59:30.392 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:00:00.406 +03:00 [INF] Removing 0 grants
2020-07-28 22:00:00.410 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:00:30.428 +03:00 [INF] Removing 0 grants
2020-07-28 22:00:30.429 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:01:00.445 +03:00 [INF] Removing 0 grants
2020-07-28 22:01:00.447 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:01:30.461 +03:00 [INF] Removing 0 grants
2020-07-28 22:01:30.463 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:02:00.477 +03:00 [INF] Removing 0 grants
2020-07-28 22:02:00.478 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:02:30.495 +03:00 [INF] Removing 0 grants
2020-07-28 22:02:30.496 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:03:00.504 +03:00 [INF] Removing 0 grants
2020-07-28 22:03:00.506 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:03:30.518 +03:00 [INF] Removing 0 grants
2020-07-28 22:03:30.519 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:04:00.532 +03:00 [INF] Removing 0 grants
2020-07-28 22:04:00.533 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:04:30.549 +03:00 [INF] Removing 0 grants
2020-07-28 22:04:30.550 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:05:00.557 +03:00 [INF] Removing 0 grants
2020-07-28 22:05:00.559 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:05:30.568 +03:00 [INF] Removing 0 grants
2020-07-28 22:05:30.570 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:06:00.583 +03:00 [INF] Removing 0 grants
2020-07-28 22:06:00.585 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:06:30.600 +03:00 [INF] Removing 0 grants
2020-07-28 22:06:30.602 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:07:00.617 +03:00 [INF] Removing 0 grants
2020-07-28 22:07:00.618 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:07:30.631 +03:00 [INF] Removing 0 grants
2020-07-28 22:07:30.632 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:08:00.656 +03:00 [INF] Removing 0 grants
2020-07-28 22:08:00.657 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:08:30.680 +03:00 [INF] Removing 0 grants
2020-07-28 22:08:30.681 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:09:00.710 +03:00 [INF] Removing 0 grants
2020-07-28 22:09:00.711 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:09:30.721 +03:00 [INF] Removing 0 grants
2020-07-28 22:09:30.723 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:10:00.738 +03:00 [INF] Removing 0 grants
2020-07-28 22:10:00.739 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:10:30.756 +03:00 [INF] Removing 0 grants
2020-07-28 22:10:30.758 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:11:00.766 +03:00 [INF] Removing 0 grants
2020-07-28 22:11:00.767 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:11:30.788 +03:00 [INF] Removing 0 grants
2020-07-28 22:11:30.789 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:12:00.804 +03:00 [INF] Removing 0 grants
2020-07-28 22:12:00.805 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:12:30.824 +03:00 [INF] Removing 0 grants
2020-07-28 22:12:30.828 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:13:00.842 +03:00 [INF] Removing 0 grants
2020-07-28 22:13:00.845 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:13:30.868 +03:00 [INF] Removing 0 grants
2020-07-28 22:13:30.872 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:14:00.901 +03:00 [INF] Removing 0 grants
2020-07-28 22:14:00.905 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:14:30.926 +03:00 [INF] Removing 0 grants
2020-07-28 22:14:30.935 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:15:00.960 +03:00 [INF] Removing 0 grants
2020-07-28 22:15:00.964 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:15:30.974 +03:00 [INF] Removing 0 grants
2020-07-28 22:15:30.982 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:16:00.995 +03:00 [INF] Removing 0 grants
2020-07-28 22:16:00.997 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:16:31.006 +03:00 [INF] Removing 0 grants
2020-07-28 22:16:31.008 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:42:31.071 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-28 22:42:31.104 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-28 22:42:31.104 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-28 22:42:31.104 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-28 22:42:31.105 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-28 22:42:31.105 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-28 22:42:31.106 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-28 22:42:32.383 +03:00 [DBG] Login Url: /Account/Login
2020-07-28 22:42:32.385 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-28 22:42:32.386 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-28 22:42:32.387 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-28 22:42:32.388 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-28 22:42:32.389 +03:00 [DBG] Error Url: /home/error
2020-07-28 22:42:32.391 +03:00 [DBG] Error Id Parameter: errorId
2020-07-28 22:42:48.000 +03:00 [INF]   !
2020-07-28 22:43:01.409 +03:00 [INF] Removing 0 grants
2020-07-28 22:43:01.430 +03:00 [INF] Removing 0 device flow codes
2020-07-28 22:43:31.461 +03:00 [INF] Removing 0 grants
2020-07-28 22:43:31.465 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:45:20.699 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-30 11:45:20.733 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-30 11:45:20.733 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-30 11:45:20.734 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-30 11:45:20.734 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-30 11:45:20.734 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-30 11:45:20.734 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-30 11:45:21.893 +03:00 [DBG] Login Url: /Account/Login
2020-07-30 11:45:21.895 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-30 11:45:21.896 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-30 11:45:21.896 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-30 11:45:21.896 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-30 11:45:21.896 +03:00 [DBG] Error Url: /home/error
2020-07-30 11:45:21.896 +03:00 [DBG] Error Id Parameter: errorId
2020-07-30 11:45:51.054 +03:00 [INF] Removing 0 grants
2020-07-30 11:45:51.064 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:46:21.071 +03:00 [INF] Removing 0 grants
2020-07-30 11:46:21.072 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:46:25.664 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 11:46:25.688 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 11:46:25.704 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 11:46:25.706 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 11:46:25.715 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 11:46:25.716 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 11:46:25.721 +03:00 [DBG] Start discovery request
2020-07-30 11:46:26.116 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 11:46:26.166 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-07-30 11:46:26.168 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-07-30 11:46:26.168 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-07-30 11:46:26.173 +03:00 [DBG] Start authorize request
2020-07-30 11:46:26.179 +03:00 [DBG] No user present in authorize request
2020-07-30 11:46:26.191 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 11:46:26.378 +03:00 [DBG] spa found in database: true
2020-07-30 11:46:26.384 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 11:46:26.396 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 11:46:26.445 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 11:46:26.484 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 11:46:26.500 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 11:46:26.507 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 11:46:26.508 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 11:46:26.524 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read api.write","State":"e5eedab4277b4b4eb7c93eced60299de","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":"popup","PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5005/callback.html","response_type":"code","scope":"openid profile email api.read api.write","state":"e5eedab4277b4b4eb7c93eced60299de","code_challenge":"MxnYri6ShfaEA-dZUq1BMVRnMkpfa10TMpB63cMWgrI","code_challenge_method":"S256","display":"popup"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 11:46:26.537 +03:00 [INF] Showing login: User is not authenticated
2020-07-30 11:46:26.553 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 11:46:26.562 +03:00 [DBG] spa found in database: true
2020-07-30 11:46:26.563 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 11:46:26.564 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 11:46:26.569 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 11:46:26.571 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 11:46:26.572 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 11:46:26.579 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 11:46:26.579 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 11:46:26.589 +03:00 [DBG] spa found in database: true
2020-07-30 11:46:26.590 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 11:46:51.089 +03:00 [INF] Removing 0 grants
2020-07-30 11:46:51.092 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:47:21.110 +03:00 [INF] Removing 0 grants
2020-07-30 11:47:21.112 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:47:35.418 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 11:47:35.448 +03:00 [DBG] spa found in database: true
2020-07-30 11:47:35.448 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 11:47:35.452 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 11:47:35.454 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 11:47:35.456 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 11:47:35.458 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 11:47:35.459 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 11:47:35.461 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 11:47:58.264 +03:00 [INF] Removing 0 grants
2020-07-30 11:47:58.266 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:47:58.282 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":"spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1KCJID1T9F:0000001B","TimeStamp":"2020-07-30T08:47:58.0000000Z","ProcessId":25684,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-30 11:48:05.146 +03:00 [DBG] Augmenting SignInContext
2020-07-30 11:48:05.148 +03:00 [DBG] Adding idp claim with value: local
2020-07-30 11:48:05.149 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-30 11:48:05.150 +03:00 [DBG] Adding auth_time claim with value: 1596098885
2020-07-30 11:48:05.167 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 11:48:14.924 +03:00 [DBG] spa found in database: true
2020-07-30 11:48:14.925 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 11:48:31.467 +03:00 [INF] Removing 0 grants
2020-07-30 11:48:31.484 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:48:32.677 +03:00 [ERR] The view 'Redirect' was not found. Searched locations: ["/Views/Account/Redirect.cshtml","/Views/Shared/Redirect.cshtml","/Pages/Shared/Redirect.cshtml"]
2020-07-30 11:48:33.381 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'Redirect' was not found. The following locations were searched:
/Views/Account/Redirect.cshtml
/Views/Shared/Redirect.cshtml
/Pages/Shared/Redirect.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2020-07-30 11:48:33.626 +03:00 [ERR] An exception was thrown attempting to execute the error handler.
System.InvalidOperationException: Invalid non-ASCII or control character in header: 0x000D
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowInvalidHeaderCharacter(Char ch)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ValidateHeaderValueCharacters(StringValues headerValues)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.AddValueFast(String key, StringValues value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.System.Collections.Generic.IDictionary<System.String,Microsoft.Extensions.Primitives.StringValues>.Add(String key, StringValues value)
   at IdentityServer.Extensions.HttpResponseExtensions.AddApplicationError(HttpResponse response, String message) in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Extensions\HttpResponseExtensions.cs:line 13
   at IdentityServer.Startup.<>c.<<Configure>b__4_3>d.MoveNext() in D:\Startup\EducationalApp\IdentityServer4\IdentityServer\IdentityServer\Startup.cs:line 125
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)
2020-07-30 11:48:33.831 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The view 'Redirect' was not found. The following locations were searched:
/Views/Account/Redirect.cshtml
/Views/Shared/Redirect.cshtml
/Pages/Shared/Redirect.cshtml
   at Microsoft.AspNetCore.Mvc.ViewEngines.ViewEngineResult.EnsureSuccessful(IEnumerable`1 originalLocations)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor.ExecuteAsync(ActionContext context, ViewResult result)
   at Microsoft.AspNetCore.Mvc.ViewResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-07-30 11:49:01.504 +03:00 [INF] Removing 0 grants
2020-07-30 11:49:01.507 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:49:31.522 +03:00 [INF] Removing 0 grants
2020-07-30 11:49:31.523 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:51:05.903 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-30 11:51:05.934 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-30 11:51:05.934 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-30 11:51:05.935 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-30 11:51:05.935 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-30 11:51:05.935 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-30 11:51:05.935 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-30 11:51:06.961 +03:00 [DBG] Login Url: /Account/Login
2020-07-30 11:51:06.963 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-30 11:51:06.963 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-30 11:51:06.963 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-30 11:51:06.964 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-30 11:51:06.964 +03:00 [DBG] Error Url: /home/error
2020-07-30 11:51:06.964 +03:00 [DBG] Error Id Parameter: errorId
2020-07-30 11:51:20.537 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 11:51:20.635 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 11:51:20.639 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 11:51:20.640 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 11:51:20.644 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 11:51:20.646 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 11:51:20.650 +03:00 [DBG] Start discovery request
2020-07-30 11:51:21.048 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 11:51:21.094 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-07-30 11:51:21.097 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-07-30 11:51:21.099 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-07-30 11:51:21.106 +03:00 [DBG] Start authorize request
2020-07-30 11:51:21.110 +03:00 [DBG] No user present in authorize request
2020-07-30 11:51:21.119 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 11:51:21.307 +03:00 [DBG] spa found in database: true
2020-07-30 11:51:21.312 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 11:51:21.331 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 11:51:21.384 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 11:51:21.421 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 11:51:21.439 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 11:51:21.448 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 11:51:21.450 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 11:51:21.460 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read api.write","State":"102d4c15277441c995fc2a61c59bf98f","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":"popup","PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5005/callback.html","response_type":"code","scope":"openid profile email api.read api.write","state":"102d4c15277441c995fc2a61c59bf98f","code_challenge":"kXH_tPwNnnr_8MuoZvAxEFJt1UXcN0G9WcPV6-gi0Lg","code_challenge_method":"S256","display":"popup"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 11:51:21.498 +03:00 [INF] Showing login: User is not authenticated
2020-07-30 11:51:21.516 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 11:51:21.530 +03:00 [DBG] spa found in database: true
2020-07-30 11:51:21.530 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 11:51:21.532 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 11:51:21.538 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 11:51:21.542 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 11:51:21.543 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 11:51:21.544 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 11:51:21.545 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 11:51:21.557 +03:00 [DBG] spa found in database: true
2020-07-30 11:51:21.558 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 11:51:36.107 +03:00 [INF] Removing 0 grants
2020-07-30 11:51:36.115 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:52:07.176 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 11:52:07.182 +03:00 [INF] Removing 0 grants
2020-07-30 11:52:07.184 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:52:07.214 +03:00 [DBG] spa found in database: true
2020-07-30 11:52:07.214 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 11:52:07.218 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 11:52:07.220 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 11:52:07.222 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 11:52:07.224 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 11:52:07.225 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 11:52:07.228 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 11:52:09.681 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":"spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1KCMP8EROQ:00000013","TimeStamp":"2020-07-30T08:52:09.0000000Z","ProcessId":21104,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-30 11:52:12.184 +03:00 [DBG] Augmenting SignInContext
2020-07-30 11:52:12.185 +03:00 [DBG] Adding idp claim with value: local
2020-07-30 11:52:12.186 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-30 11:52:12.186 +03:00 [DBG] Adding auth_time claim with value: 1596099132
2020-07-30 11:52:12.201 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 11:52:14.080 +03:00 [DBG] spa found in database: true
2020-07-30 11:52:14.081 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 11:52:16.931 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-07-30 11:52:16.933 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-07-30 11:52:16.938 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-07-30 11:52:16.940 +03:00 [DBG] Start authorize callback request
2020-07-30 11:52:16.943 +03:00 [DBG] User in authorize request: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 11:52:16.943 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 11:52:16.957 +03:00 [DBG] spa found in database: true
2020-07-30 11:52:16.958 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 11:52:16.961 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 11:52:16.964 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 11:52:16.967 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 11:52:16.968 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 11:52:16.969 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 11:52:16.970 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 11:52:16.975 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html"],"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read api.write","State":"102d4c15277441c995fc2a61c59bf98f","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":"popup","PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"9D6DBE3380E675B12975370188C3E797","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5005/callback.html","response_type":"code","scope":"openid profile email api.read api.write","state":"102d4c15277441c995fc2a61c59bf98f","code_challenge":"kXH_tPwNnnr_8MuoZvAxEFJt1UXcN0G9WcPV6-gi0Lg","code_challenge_method":"S256","display":"popup"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 11:52:17.003 +03:00 [DBG] Client is configured to not require consent, no consent is required
2020-07-30 11:52:17.005 +03:00 [DBG] Creating Authorization Code Flow response.
2020-07-30 11:52:17.062 +03:00 [DBG] 2ZtZNs1+0VvBvHWzzftWysw8HeAUPEnCnMjCGc3ehrk= not found in database
2020-07-30 11:52:17.177 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","Endpoint":"Authorize","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read api.write","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****D14A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KCMP8EROQ:00000015","TimeStamp":"2020-07-30T08:52:17.0000000Z","ProcessId":21104,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 11:52:17.186 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ClientId":"spa","RedirectUri":"http://localhost:5005/callback.html","State":"102d4c15277441c995fc2a61c59bf98f","Scope":"openid profile email api.read api.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-07-30 11:52:17.192 +03:00 [DBG] Augmenting SignInContext
2020-07-30 11:52:17.193 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 11:52:17.245 +03:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:5005
2020-07-30 11:52:17.249 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 11:52:17.251 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 11:52:17.253 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-07-30 11:52:17.258 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-07-30 11:52:17.258 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-07-30 11:52:17.264 +03:00 [DBG] Start token request.
2020-07-30 11:52:17.266 +03:00 [DBG] Start client validation
2020-07-30 11:52:17.270 +03:00 [DBG] Start parsing Basic Authentication secret
2020-07-30 11:52:17.271 +03:00 [DBG] Start parsing for secret in post body
2020-07-30 11:52:17.272 +03:00 [DBG] client id without secret found
2020-07-30 11:52:17.273 +03:00 [DBG] Parser found secret: PostBodySecretParser
2020-07-30 11:52:17.273 +03:00 [DBG] Secret id found: spa
2020-07-30 11:52:17.284 +03:00 [DBG] spa found in database: true
2020-07-30 11:52:17.285 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 11:52:17.288 +03:00 [DBG] Public Client - skipping secret validation success
2020-07-30 11:52:17.289 +03:00 [DBG] Client validation success
2020-07-30 11:52:17.290 +03:00 [INF] {"ClientId":"spa","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM1KCMP8EROR:00000003","TimeStamp":"2020-07-30T08:52:17.0000000Z","ProcessId":21104,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2020-07-30 11:52:17.296 +03:00 [DBG] Start token request validation
2020-07-30 11:52:17.299 +03:00 [DBG] Start validation of authorization code token request
2020-07-30 11:52:17.311 +03:00 [DBG] 2ZtZNs1+0VvBvHWzzftWysw8HeAUPEnCnMjCGc3ehrk= found in database: true
2020-07-30 11:52:17.344 +03:00 [DBG] removing 2ZtZNs1+0VvBvHWzzftWysw8HeAUPEnCnMjCGc3ehrk= persisted grant from database
2020-07-30 11:52:17.358 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2020-07-30 11:52:17.362 +03:00 [DBG] Validation of authorization code token request success
2020-07-30 11:52:17.365 +03:00 [INF] Token request validation success, {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"87BE89C1BB7E9B18BF3AE94CFBD3491E97CC61500625555A94D157FD9DBDD14A","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"spa","code":"87BE89C1BB7E9B18BF3AE94CFBD3491E97CC61500625555A94D157FD9DBDD14A","redirect_uri":"http://localhost:5005/callback.html","code_verifier":"571322f953af43b09dee61e30d5c7545ea4d8b7251be4b31a5a6c83c63ccbc6833429da1350741099251a1ad1010c5e7","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2020-07-30 11:52:17.391 +03:00 [DBG] spa found in database: true
2020-07-30 11:52:17.392 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 11:52:17.401 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 11:52:17.407 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 11:52:17.409 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 11:52:17.421 +03:00 [DBG] Getting claims for access token for client: spa
2020-07-30 11:52:17.421 +03:00 [DBG] Getting claims for access token for subject: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 11:52:17.539 +03:00 [DBG] spa found in database: true
2020-07-30 11:52:17.539 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 11:52:17.545 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 11:52:17.546 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 11:52:17.548 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 11:52:17.552 +03:00 [DBG] Getting claims for identity token for subject: 65886359-073C-434B-AD2D-A3932222DABE and client: spa
2020-07-30 11:52:17.554 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-07-30 11:52:17.558 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":null,"Endpoint":"Token","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read api.write","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****8Xhw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****FSXg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KCMP8EROR:00000003","TimeStamp":"2020-07-30T08:52:17.0000000Z","ProcessId":21104,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 11:52:17.578 +03:00 [DBG] Token request success.
2020-07-30 11:52:17.618 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:5005
2020-07-30 11:52:17.624 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 11:52:17.624 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 11:52:17.625 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-07-30 11:52:17.626 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-07-30 11:52:17.627 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-07-30 11:52:17.629 +03:00 [DBG] Start userinfo request
2020-07-30 11:52:17.631 +03:00 [DBG] Bearer token found in header
2020-07-30 11:52:17.680 +03:00 [DBG] spa found in database: true
2020-07-30 11:52:17.680 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 11:52:17.694 +03:00 [DBG] spa found in database: true
2020-07-30 11:52:17.694 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 11:52:17.700 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 11:52:17.701 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"9A12F858DFE1FFF47CAD54F32BF38FCF","Claims":{"nbf":1596099137,"exp":1596102737,"iss":"https://localhost:5000","aud":["api","https://localhost:5000/resources"],"client_id":"spa","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596099132,"idp":"local","role":"student","jti":"9A12F858DFE1FFF47CAD54F32BF38FCF","sid":"9D6DBE3380E675B12975370188C3E797","iat":1596099137,"scope":["openid","profile","email","api.read","api.write"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 11:52:17.710 +03:00 [DBG] Creating userinfo response
2020-07-30 11:52:17.711 +03:00 [DBG] Scopes in access token: openid profile email api.read api.write
2020-07-30 11:52:17.715 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 11:52:17.719 +03:00 [DBG] Requested claim types: zoneinfo updated_at locale name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate sub email email_verified
2020-07-30 11:52:17.723 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2020-07-30 11:52:17.724 +03:00 [DBG] End userinfo request
2020-07-30 11:52:17.739 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 11:52:17.741 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 11:52:17.744 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 11:52:17.746 +03:00 [DBG] Rendering check session result
2020-07-30 11:52:18.036 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 11:52:18.039 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 11:52:18.042 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 11:52:18.043 +03:00 [DBG] Start discovery request
2020-07-30 11:52:18.049 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 11:52:18.221 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-07-30 11:52:18.225 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-07-30 11:52:18.227 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-07-30 11:52:18.230 +03:00 [DBG] Start key discovery request
2020-07-30 11:52:37.201 +03:00 [INF] Removing 0 grants
2020-07-30 11:52:37.204 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:53:07.218 +03:00 [INF] Removing 0 grants
2020-07-30 11:53:07.227 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:53:37.238 +03:00 [INF] Removing 0 grants
2020-07-30 11:53:37.240 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:54:07.255 +03:00 [INF] Removing 0 grants
2020-07-30 11:54:07.256 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:54:37.273 +03:00 [INF] Removing 0 grants
2020-07-30 11:54:37.275 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:55:07.292 +03:00 [INF] Removing 0 grants
2020-07-30 11:55:07.298 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:55:37.303 +03:00 [INF] Removing 0 grants
2020-07-30 11:55:37.306 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:56:07.316 +03:00 [INF] Removing 0 grants
2020-07-30 11:56:07.317 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:56:37.333 +03:00 [INF] Removing 0 grants
2020-07-30 11:56:37.335 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:57:07.348 +03:00 [INF] Removing 0 grants
2020-07-30 11:57:07.350 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:57:37.366 +03:00 [INF] Removing 0 grants
2020-07-30 11:57:37.368 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:58:07.383 +03:00 [INF] Removing 0 grants
2020-07-30 11:58:07.384 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:58:37.396 +03:00 [INF] Removing 0 grants
2020-07-30 11:58:37.398 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:59:07.411 +03:00 [INF] Removing 0 grants
2020-07-30 11:59:07.413 +03:00 [INF] Removing 0 device flow codes
2020-07-30 11:59:37.426 +03:00 [INF] Removing 0 grants
2020-07-30 11:59:37.428 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:00:07.429 +03:00 [INF] Removing 0 grants
2020-07-30 12:00:07.431 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:00:37.444 +03:00 [INF] Removing 0 grants
2020-07-30 12:00:37.445 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:01:07.456 +03:00 [INF] Removing 0 grants
2020-07-30 12:01:07.457 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:01:37.475 +03:00 [INF] Removing 0 grants
2020-07-30 12:01:37.480 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:02:07.498 +03:00 [INF] Removing 0 grants
2020-07-30 12:02:07.514 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:02:37.522 +03:00 [INF] Removing 0 grants
2020-07-30 12:02:37.523 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:03:07.536 +03:00 [INF] Removing 0 grants
2020-07-30 12:03:07.538 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:03:37.546 +03:00 [INF] Removing 0 grants
2020-07-30 12:03:37.550 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:04:07.569 +03:00 [INF] Removing 0 grants
2020-07-30 12:04:07.570 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:04:37.581 +03:00 [INF] Removing 0 grants
2020-07-30 12:04:37.582 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:05:07.584 +03:00 [INF] Removing 0 grants
2020-07-30 12:05:07.585 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:05:37.596 +03:00 [INF] Removing 0 grants
2020-07-30 12:05:37.597 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:06:07.612 +03:00 [INF] Removing 0 grants
2020-07-30 12:06:07.613 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:06:37.615 +03:00 [INF] Removing 0 grants
2020-07-30 12:06:37.616 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:07:07.629 +03:00 [INF] Removing 0 grants
2020-07-30 12:07:07.631 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:07:37.645 +03:00 [INF] Removing 0 grants
2020-07-30 12:07:37.647 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:08:07.658 +03:00 [INF] Removing 0 grants
2020-07-30 12:08:07.659 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:08:37.665 +03:00 [INF] Removing 0 grants
2020-07-30 12:08:37.669 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:09:07.683 +03:00 [INF] Removing 0 grants
2020-07-30 12:09:07.684 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:09:37.691 +03:00 [INF] Removing 0 grants
2020-07-30 12:09:37.693 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:10:07.708 +03:00 [INF] Removing 0 grants
2020-07-30 12:10:07.709 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:10:37.721 +03:00 [INF] Removing 0 grants
2020-07-30 12:10:37.722 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:11:07.725 +03:00 [INF] Removing 0 grants
2020-07-30 12:11:07.727 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:11:37.738 +03:00 [INF] Removing 0 grants
2020-07-30 12:11:37.740 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:12:07.753 +03:00 [INF] Removing 0 grants
2020-07-30 12:12:07.754 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:12:37.772 +03:00 [INF] Removing 0 grants
2020-07-30 12:12:37.774 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:13:07.786 +03:00 [INF] Removing 0 grants
2020-07-30 12:13:07.788 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:13:37.807 +03:00 [INF] Removing 0 grants
2020-07-30 12:13:37.811 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:14:07.817 +03:00 [INF] Removing 0 grants
2020-07-30 12:14:07.818 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:14:37.821 +03:00 [INF] Removing 0 grants
2020-07-30 12:14:37.822 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:15:07.836 +03:00 [INF] Removing 0 grants
2020-07-30 12:15:07.837 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:15:37.851 +03:00 [INF] Removing 0 grants
2020-07-30 12:15:37.856 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:16:07.872 +03:00 [INF] Removing 0 grants
2020-07-30 12:16:07.873 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:16:37.877 +03:00 [INF] Removing 0 grants
2020-07-30 12:16:37.878 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:17:07.893 +03:00 [INF] Removing 0 grants
2020-07-30 12:17:07.894 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:17:37.896 +03:00 [INF] Removing 0 grants
2020-07-30 12:17:37.897 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:18:07.914 +03:00 [INF] Removing 0 grants
2020-07-30 12:18:07.916 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:18:37.929 +03:00 [INF] Removing 0 grants
2020-07-30 12:18:37.933 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:19:07.945 +03:00 [INF] Removing 0 grants
2020-07-30 12:19:07.946 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:19:37.959 +03:00 [INF] Removing 0 grants
2020-07-30 12:19:37.960 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:20:07.973 +03:00 [INF] Removing 0 grants
2020-07-30 12:20:07.974 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:20:37.990 +03:00 [INF] Removing 0 grants
2020-07-30 12:20:37.995 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:21:08.012 +03:00 [INF] Removing 0 grants
2020-07-30 12:21:08.016 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:21:38.034 +03:00 [INF] Removing 0 grants
2020-07-30 12:21:38.035 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:22:08.049 +03:00 [INF] Removing 0 grants
2020-07-30 12:22:08.050 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:22:38.056 +03:00 [INF] Removing 0 grants
2020-07-30 12:22:38.057 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:23:08.074 +03:00 [INF] Removing 0 grants
2020-07-30 12:23:08.075 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:23:38.084 +03:00 [INF] Removing 0 grants
2020-07-30 12:23:38.085 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:24:08.103 +03:00 [INF] Removing 0 grants
2020-07-30 12:24:08.104 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:24:38.112 +03:00 [INF] Removing 0 grants
2020-07-30 12:24:38.114 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:25:08.128 +03:00 [INF] Removing 0 grants
2020-07-30 12:25:08.129 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:25:38.131 +03:00 [INF] Removing 0 grants
2020-07-30 12:25:38.132 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:26:08.145 +03:00 [INF] Removing 0 grants
2020-07-30 12:26:08.147 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:26:38.155 +03:00 [INF] Removing 0 grants
2020-07-30 12:26:38.157 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:27:08.160 +03:00 [INF] Removing 0 grants
2020-07-30 12:27:08.162 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:27:38.175 +03:00 [INF] Removing 0 grants
2020-07-30 12:27:38.176 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:28:08.190 +03:00 [INF] Removing 0 grants
2020-07-30 12:28:08.192 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:28:35.586 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 12:28:35.595 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 12:28:35.598 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 12:28:35.604 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 12:28:35.607 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 12:28:35.611 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 12:28:35.616 +03:00 [DBG] Start discovery request
2020-07-30 12:28:35.633 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 12:28:35.665 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-30 12:28:35.668 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-30 12:28:35.669 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-30 12:28:35.673 +03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2020-07-30 12:28:35.674 +03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2020-07-30 12:28:35.675 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 12:28:35.677 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 12:28:35.677 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 12:28:35.677 +03:00 [DBG] Rendering check session result
2020-07-30 12:28:35.677 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-30 12:28:35.679 +03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2020-07-30 12:28:38.195 +03:00 [INF] Removing 0 grants
2020-07-30 12:28:38.196 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:29:08.212 +03:00 [INF] Removing 0 grants
2020-07-30 12:29:08.215 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:29:38.234 +03:00 [INF] Removing 0 grants
2020-07-30 12:29:38.238 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:30:08.247 +03:00 [INF] Removing 0 grants
2020-07-30 12:30:08.249 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:30:38.263 +03:00 [INF] Removing 0 grants
2020-07-30 12:30:38.265 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:31:08.268 +03:00 [INF] Removing 0 grants
2020-07-30 12:31:08.270 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:31:38.288 +03:00 [INF] Removing 0 grants
2020-07-30 12:31:38.290 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:32:08.299 +03:00 [INF] Removing 0 grants
2020-07-30 12:32:08.303 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:32:38.316 +03:00 [INF] Removing 0 grants
2020-07-30 12:32:38.318 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:33:08.332 +03:00 [INF] Removing 0 grants
2020-07-30 12:33:08.334 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:33:38.346 +03:00 [INF] Removing 0 grants
2020-07-30 12:33:38.348 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:34:08.349 +03:00 [INF] Removing 0 grants
2020-07-30 12:34:08.351 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:34:38.364 +03:00 [INF] Removing 0 grants
2020-07-30 12:34:38.366 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:35:08.381 +03:00 [INF] Removing 0 grants
2020-07-30 12:35:08.384 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:35:38.400 +03:00 [INF] Removing 0 grants
2020-07-30 12:35:38.402 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:36:08.415 +03:00 [INF] Removing 0 grants
2020-07-30 12:36:08.416 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:36:38.431 +03:00 [INF] Removing 0 grants
2020-07-30 12:36:38.433 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:37:08.447 +03:00 [INF] Removing 0 grants
2020-07-30 12:37:08.454 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:37:38.461 +03:00 [INF] Removing 0 grants
2020-07-30 12:37:38.465 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:38:08.471 +03:00 [INF] Removing 0 grants
2020-07-30 12:38:08.473 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:38:38.475 +03:00 [INF] Removing 0 grants
2020-07-30 12:38:38.477 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:39:08.487 +03:00 [INF] Removing 0 grants
2020-07-30 12:39:08.489 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:39:38.506 +03:00 [INF] Removing 0 grants
2020-07-30 12:39:38.510 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:40:08.523 +03:00 [INF] Removing 0 grants
2020-07-30 12:40:08.524 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:40:38.537 +03:00 [INF] Removing 0 grants
2020-07-30 12:40:38.539 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:41:08.557 +03:00 [INF] Removing 0 grants
2020-07-30 12:41:08.565 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:41:38.583 +03:00 [INF] Removing 0 grants
2020-07-30 12:41:38.585 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:42:08.597 +03:00 [INF] Removing 0 grants
2020-07-30 12:42:08.599 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:42:38.613 +03:00 [INF] Removing 0 grants
2020-07-30 12:42:38.614 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:43:08.623 +03:00 [INF] Removing 0 grants
2020-07-30 12:43:08.631 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:43:38.635 +03:00 [INF] Removing 0 grants
2020-07-30 12:43:38.638 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:44:08.653 +03:00 [INF] Removing 0 grants
2020-07-30 12:44:08.656 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:44:38.658 +03:00 [INF] Removing 0 grants
2020-07-30 12:44:38.660 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:45:08.676 +03:00 [INF] Removing 0 grants
2020-07-30 12:45:08.678 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:45:38.692 +03:00 [INF] Removing 0 grants
2020-07-30 12:45:38.694 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:46:08.698 +03:00 [INF] Removing 0 grants
2020-07-30 12:46:08.700 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:46:38.709 +03:00 [INF] Removing 0 grants
2020-07-30 12:46:38.712 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:47:08.725 +03:00 [INF] Removing 0 grants
2020-07-30 12:47:08.727 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:47:38.739 +03:00 [INF] Removing 0 grants
2020-07-30 12:47:38.742 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:48:08.755 +03:00 [INF] Removing 0 grants
2020-07-30 12:48:08.757 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:48:38.770 +03:00 [INF] Removing 0 grants
2020-07-30 12:48:38.772 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:49:08.785 +03:00 [INF] Removing 0 grants
2020-07-30 12:49:08.787 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:49:38.800 +03:00 [INF] Removing 0 grants
2020-07-30 12:49:38.802 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:50:08.809 +03:00 [INF] Removing 0 grants
2020-07-30 12:50:08.816 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:50:38.831 +03:00 [INF] Removing 0 grants
2020-07-30 12:50:38.832 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:51:08.847 +03:00 [INF] Removing 0 grants
2020-07-30 12:51:08.849 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:51:38.851 +03:00 [INF] Removing 0 grants
2020-07-30 12:51:38.852 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:52:08.863 +03:00 [INF] Removing 0 grants
2020-07-30 12:52:08.865 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:52:38.872 +03:00 [INF] Removing 0 grants
2020-07-30 12:52:38.879 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:53:08.888 +03:00 [INF] Removing 0 grants
2020-07-30 12:53:08.895 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:53:38.909 +03:00 [INF] Removing 0 grants
2020-07-30 12:53:38.910 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:54:08.913 +03:00 [INF] Removing 0 grants
2020-07-30 12:54:08.915 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:54:38.927 +03:00 [INF] Removing 0 grants
2020-07-30 12:54:38.928 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:55:08.942 +03:00 [INF] Removing 0 grants
2020-07-30 12:55:08.945 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:55:38.958 +03:00 [INF] Removing 0 grants
2020-07-30 12:55:38.960 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:56:08.975 +03:00 [INF] Removing 0 grants
2020-07-30 12:56:08.977 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:56:38.996 +03:00 [INF] Removing 0 grants
2020-07-30 12:56:39.003 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:57:09.020 +03:00 [INF] Removing 0 grants
2020-07-30 12:57:09.022 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:57:39.034 +03:00 [INF] Removing 0 grants
2020-07-30 12:57:39.036 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:58:09.038 +03:00 [INF] Removing 0 grants
2020-07-30 12:58:09.040 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:58:39.050 +03:00 [INF] Removing 0 grants
2020-07-30 12:58:39.051 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:59:09.059 +03:00 [INF] Removing 0 grants
2020-07-30 12:59:09.065 +03:00 [INF] Removing 0 device flow codes
2020-07-30 12:59:39.071 +03:00 [INF] Removing 0 grants
2020-07-30 12:59:39.073 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:00:09.085 +03:00 [INF] Removing 0 grants
2020-07-30 13:00:09.091 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:00:39.105 +03:00 [INF] Removing 0 grants
2020-07-30 13:00:39.107 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:01:09.121 +03:00 [INF] Removing 0 grants
2020-07-30 13:01:09.122 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:01:39.137 +03:00 [INF] Removing 0 grants
2020-07-30 13:01:39.139 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:02:09.156 +03:00 [INF] Removing 0 grants
2020-07-30 13:02:09.158 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:02:39.175 +03:00 [INF] Removing 0 grants
2020-07-30 13:02:39.177 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:03:09.191 +03:00 [INF] Removing 0 grants
2020-07-30 13:03:09.193 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:03:39.207 +03:00 [INF] Removing 0 grants
2020-07-30 13:03:39.208 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:04:09.223 +03:00 [INF] Removing 0 grants
2020-07-30 13:04:09.224 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:04:39.238 +03:00 [INF] Removing 0 grants
2020-07-30 13:04:39.241 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:05:09.244 +03:00 [INF] Removing 0 grants
2020-07-30 13:05:09.246 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:05:39.256 +03:00 [INF] Removing 0 grants
2020-07-30 13:05:39.258 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:06:09.268 +03:00 [INF] Removing 0 grants
2020-07-30 13:06:09.271 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:06:39.285 +03:00 [INF] Removing 0 grants
2020-07-30 13:06:39.287 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:07:09.299 +03:00 [INF] Removing 0 grants
2020-07-30 13:07:09.301 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:07:39.306 +03:00 [INF] Removing 0 grants
2020-07-30 13:07:39.307 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:08:09.322 +03:00 [INF] Removing 0 grants
2020-07-30 13:08:09.324 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:08:39.339 +03:00 [INF] Removing 0 grants
2020-07-30 13:08:39.341 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:09:09.352 +03:00 [INF] Removing 0 grants
2020-07-30 13:09:09.354 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:09:39.366 +03:00 [INF] Removing 0 grants
2020-07-30 13:09:39.368 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:10:09.379 +03:00 [INF] Removing 0 grants
2020-07-30 13:10:09.381 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:10:39.392 +03:00 [INF] Removing 0 grants
2020-07-30 13:10:39.394 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:11:09.399 +03:00 [INF] Removing 0 grants
2020-07-30 13:11:09.401 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:11:39.411 +03:00 [INF] Removing 0 grants
2020-07-30 13:11:39.412 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:12:09.431 +03:00 [INF] Removing 0 grants
2020-07-30 13:12:09.433 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:12:39.442 +03:00 [INF] Removing 0 grants
2020-07-30 13:12:39.444 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:13:09.452 +03:00 [INF] Removing 0 grants
2020-07-30 13:13:09.460 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:13:39.476 +03:00 [INF] Removing 0 grants
2020-07-30 13:13:39.483 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:14:09.494 +03:00 [INF] Removing 0 grants
2020-07-30 13:14:09.501 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:14:39.510 +03:00 [INF] Removing 0 grants
2020-07-30 13:14:39.512 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:15:09.521 +03:00 [INF] Removing 0 grants
2020-07-30 13:15:09.523 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:15:39.543 +03:00 [INF] Removing 0 grants
2020-07-30 13:15:39.551 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:16:09.556 +03:00 [INF] Removing 0 grants
2020-07-30 13:16:09.558 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:16:39.571 +03:00 [INF] Removing 0 grants
2020-07-30 13:16:39.573 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:17:09.583 +03:00 [INF] Removing 0 grants
2020-07-30 13:17:09.584 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:17:39.603 +03:00 [INF] Removing 0 grants
2020-07-30 13:17:39.623 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:18:09.638 +03:00 [INF] Removing 0 grants
2020-07-30 13:18:09.640 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:18:39.646 +03:00 [INF] Removing 0 grants
2020-07-30 13:18:39.648 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:19:09.660 +03:00 [INF] Removing 0 grants
2020-07-30 13:19:09.662 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:19:39.677 +03:00 [INF] Removing 0 grants
2020-07-30 13:19:39.679 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:20:09.690 +03:00 [INF] Removing 0 grants
2020-07-30 13:20:09.692 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:20:39.700 +03:00 [INF] Removing 0 grants
2020-07-30 13:20:39.705 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:21:09.721 +03:00 [INF] Removing 0 grants
2020-07-30 13:21:09.723 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:21:39.725 +03:00 [INF] Removing 0 grants
2020-07-30 13:21:39.727 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:22:09.740 +03:00 [INF] Removing 0 grants
2020-07-30 13:22:09.742 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:22:39.757 +03:00 [INF] Removing 0 grants
2020-07-30 13:22:39.758 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:23:09.769 +03:00 [INF] Removing 0 grants
2020-07-30 13:23:09.771 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:23:39.785 +03:00 [INF] Removing 0 grants
2020-07-30 13:23:39.788 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:24:09.802 +03:00 [INF] Removing 0 grants
2020-07-30 13:24:09.804 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:24:39.817 +03:00 [INF] Removing 0 grants
2020-07-30 13:24:39.819 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:25:09.831 +03:00 [INF] Removing 0 grants
2020-07-30 13:25:09.834 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:25:39.850 +03:00 [INF] Removing 0 grants
2020-07-30 13:25:39.854 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:26:09.866 +03:00 [INF] Removing 0 grants
2020-07-30 13:26:09.868 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:26:39.879 +03:00 [INF] Removing 0 grants
2020-07-30 13:26:39.880 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:27:09.898 +03:00 [INF] Removing 0 grants
2020-07-30 13:27:09.899 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:27:39.913 +03:00 [INF] Removing 0 grants
2020-07-30 13:27:39.915 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:28:09.928 +03:00 [INF] Removing 0 grants
2020-07-30 13:28:09.930 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:28:39.943 +03:00 [INF] Removing 0 grants
2020-07-30 13:28:39.945 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:29:09.956 +03:00 [INF] Removing 0 grants
2020-07-30 13:29:09.958 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:29:39.976 +03:00 [INF] Removing 0 grants
2020-07-30 13:29:39.982 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:30:09.994 +03:00 [INF] Removing 0 grants
2020-07-30 13:30:09.995 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:30:40.013 +03:00 [INF] Removing 0 grants
2020-07-30 13:30:40.020 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:31:10.037 +03:00 [INF] Removing 0 grants
2020-07-30 13:31:10.040 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:31:40.052 +03:00 [INF] Removing 0 grants
2020-07-30 13:31:40.054 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:32:10.070 +03:00 [INF] Removing 0 grants
2020-07-30 13:32:10.078 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:32:40.086 +03:00 [INF] Removing 0 grants
2020-07-30 13:32:40.088 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:33:10.096 +03:00 [INF] Removing 0 grants
2020-07-30 13:33:10.098 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:33:40.115 +03:00 [INF] Removing 0 grants
2020-07-30 13:33:40.118 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:34:10.133 +03:00 [INF] Removing 0 grants
2020-07-30 13:34:10.135 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:34:40.145 +03:00 [INF] Removing 0 grants
2020-07-30 13:34:40.146 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:35:10.151 +03:00 [INF] Removing 0 grants
2020-07-30 13:35:10.152 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:35:40.164 +03:00 [INF] Removing 0 grants
2020-07-30 13:35:40.166 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:36:10.185 +03:00 [INF] Removing 0 grants
2020-07-30 13:36:10.192 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:36:40.198 +03:00 [INF] Removing 0 grants
2020-07-30 13:36:40.199 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:37:10.213 +03:00 [INF] Removing 0 grants
2020-07-30 13:37:10.215 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:37:40.230 +03:00 [INF] Removing 0 grants
2020-07-30 13:37:40.231 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:38:10.246 +03:00 [INF] Removing 0 grants
2020-07-30 13:38:10.248 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:38:40.258 +03:00 [INF] Removing 0 grants
2020-07-30 13:38:40.259 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:39:10.272 +03:00 [INF] Removing 0 grants
2020-07-30 13:39:10.273 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:39:40.283 +03:00 [INF] Removing 0 grants
2020-07-30 13:39:40.285 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:40:10.287 +03:00 [INF] Removing 0 grants
2020-07-30 13:40:10.289 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:40:40.303 +03:00 [INF] Removing 0 grants
2020-07-30 13:40:40.306 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:41:10.319 +03:00 [INF] Removing 0 grants
2020-07-30 13:41:10.322 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:41:40.333 +03:00 [INF] Removing 0 grants
2020-07-30 13:41:40.335 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:42:10.349 +03:00 [INF] Removing 0 grants
2020-07-30 13:42:10.351 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:42:40.367 +03:00 [INF] Removing 0 grants
2020-07-30 13:42:40.368 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:43:10.379 +03:00 [INF] Removing 0 grants
2020-07-30 13:43:10.380 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:43:40.384 +03:00 [INF] Removing 0 grants
2020-07-30 13:43:40.386 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:44:10.399 +03:00 [INF] Removing 0 grants
2020-07-30 13:44:10.400 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:44:40.410 +03:00 [INF] Removing 0 grants
2020-07-30 13:44:40.412 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:45:10.426 +03:00 [INF] Removing 0 grants
2020-07-30 13:45:10.428 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:45:40.440 +03:00 [INF] Removing 0 grants
2020-07-30 13:45:40.442 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:46:10.445 +03:00 [INF] Removing 0 grants
2020-07-30 13:46:10.448 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:46:40.459 +03:00 [INF] Removing 0 grants
2020-07-30 13:46:40.461 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:47:10.474 +03:00 [INF] Removing 0 grants
2020-07-30 13:47:10.475 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:47:40.489 +03:00 [INF] Removing 0 grants
2020-07-30 13:47:40.490 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:48:10.506 +03:00 [INF] Removing 0 grants
2020-07-30 13:48:10.508 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:48:40.521 +03:00 [INF] Removing 0 grants
2020-07-30 13:48:40.522 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:49:10.536 +03:00 [INF] Removing 0 grants
2020-07-30 13:49:10.538 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:49:40.548 +03:00 [INF] Removing 0 grants
2020-07-30 13:49:40.550 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:50:10.558 +03:00 [INF] Removing 0 grants
2020-07-30 13:50:10.559 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:50:40.573 +03:00 [INF] Removing 0 grants
2020-07-30 13:50:40.579 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:51:10.589 +03:00 [INF] Removing 0 grants
2020-07-30 13:51:10.596 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:51:40.601 +03:00 [INF] Removing 0 grants
2020-07-30 13:51:40.604 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:52:10.615 +03:00 [INF] Removing 0 grants
2020-07-30 13:52:10.618 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:55:04.984 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-30 13:55:05.011 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-30 13:55:05.011 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-30 13:55:05.012 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-30 13:55:05.012 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-30 13:55:05.013 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-30 13:55:05.013 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-30 13:55:06.164 +03:00 [DBG] Login Url: /Account/Login
2020-07-30 13:55:06.166 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-30 13:55:06.166 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-30 13:55:06.166 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-30 13:55:06.166 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-30 13:55:06.167 +03:00 [DBG] Error Url: /home/error
2020-07-30 13:55:06.167 +03:00 [DBG] Error Id Parameter: errorId
2020-07-30 13:55:30.854 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 13:55:30.875 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 13:55:30.882 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 13:55:30.885 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 13:55:30.888 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 13:55:30.889 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 13:55:30.899 +03:00 [DBG] Start discovery request
2020-07-30 13:55:31.044 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 13:55:31.099 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-07-30 13:55:31.102 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-07-30 13:55:31.103 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-07-30 13:55:31.105 +03:00 [DBG] Start authorize request
2020-07-30 13:55:31.109 +03:00 [DBG] No user present in authorize request
2020-07-30 13:55:31.111 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 13:55:31.212 +03:00 [DBG] spa found in database: true
2020-07-30 13:55:31.217 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 13:55:31.227 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 13:55:31.276 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 13:55:31.309 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 13:55:31.324 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 13:55:31.332 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 13:55:31.332 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 13:55:31.344 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read api.write","State":"9e284e2911d4456389d719fcce967128","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":"popup","PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5005/callback.html","response_type":"code","scope":"openid profile email api.read api.write","state":"9e284e2911d4456389d719fcce967128","code_challenge":"9EmC4VNEsFCK0cQt0UyQlAjl3Np9MA5WB8PA8NKLuAo","code_challenge_method":"S256","display":"popup"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 13:55:31.357 +03:00 [INF] Showing login: User is not authenticated
2020-07-30 13:55:31.372 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 13:55:31.381 +03:00 [DBG] spa found in database: true
2020-07-30 13:55:31.382 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 13:55:31.382 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 13:55:31.385 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 13:55:31.387 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 13:55:31.390 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 13:55:31.391 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 13:55:31.391 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 13:55:31.401 +03:00 [DBG] spa found in database: true
2020-07-30 13:55:31.401 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 13:55:35.175 +03:00 [INF] Removing 0 grants
2020-07-30 13:55:35.185 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:56:11.632 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 13:56:11.636 +03:00 [INF] Removing 0 grants
2020-07-30 13:56:11.642 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:56:11.654 +03:00 [DBG] spa found in database: true
2020-07-30 13:56:11.654 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 13:56:11.658 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 13:56:11.660 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 13:56:11.663 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 13:56:11.667 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 13:56:11.668 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 13:56:11.668 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 13:56:11.693 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":"spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1KES290NAT:00000013","TimeStamp":"2020-07-30T10:56:11.0000000Z","ProcessId":30664,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-30 13:56:11.703 +03:00 [DBG] Augmenting SignInContext
2020-07-30 13:56:11.704 +03:00 [DBG] Adding idp claim with value: local
2020-07-30 13:56:11.705 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-30 13:56:11.705 +03:00 [DBG] Adding auth_time claim with value: 1596106571
2020-07-30 13:56:11.717 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 13:56:11.725 +03:00 [DBG] spa found in database: true
2020-07-30 13:56:11.726 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 13:56:11.740 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-07-30 13:56:11.742 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-07-30 13:56:11.747 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-07-30 13:56:11.749 +03:00 [DBG] Start authorize callback request
2020-07-30 13:56:11.751 +03:00 [DBG] User in authorize request: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 13:56:11.752 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 13:56:11.763 +03:00 [DBG] spa found in database: true
2020-07-30 13:56:11.763 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 13:56:11.767 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 13:56:11.770 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 13:56:11.772 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 13:56:11.774 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 13:56:11.775 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 13:56:11.775 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 13:56:11.776 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html"],"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read api.write","State":"9e284e2911d4456389d719fcce967128","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":"popup","PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"C1AF9432D436A998E8E692C27A1ED5EB","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5005/callback.html","response_type":"code","scope":"openid profile email api.read api.write","state":"9e284e2911d4456389d719fcce967128","code_challenge":"9EmC4VNEsFCK0cQt0UyQlAjl3Np9MA5WB8PA8NKLuAo","code_challenge_method":"S256","display":"popup"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 13:56:11.800 +03:00 [DBG] Client is configured to not require consent, no consent is required
2020-07-30 13:56:11.802 +03:00 [DBG] Creating Authorization Code Flow response.
2020-07-30 13:56:11.858 +03:00 [DBG] F1sbzyb9W6LZY8kzzEPV8OBBvA61cbM+rxB/Z160gFA= not found in database
2020-07-30 13:56:11.885 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","Endpoint":"Authorize","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read api.write","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****FEB2","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KES290NAT:00000015","TimeStamp":"2020-07-30T10:56:11.0000000Z","ProcessId":30664,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 13:56:11.894 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ClientId":"spa","RedirectUri":"http://localhost:5005/callback.html","State":"9e284e2911d4456389d719fcce967128","Scope":"openid profile email api.read api.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-07-30 13:56:11.900 +03:00 [DBG] Augmenting SignInContext
2020-07-30 13:56:11.901 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 13:56:11.961 +03:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:5005
2020-07-30 13:56:11.965 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 13:56:11.966 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 13:56:11.967 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-07-30 13:56:11.972 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-07-30 13:56:11.977 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-07-30 13:56:11.981 +03:00 [DBG] Start token request.
2020-07-30 13:56:11.985 +03:00 [DBG] Start client validation
2020-07-30 13:56:11.988 +03:00 [DBG] Start parsing Basic Authentication secret
2020-07-30 13:56:11.989 +03:00 [DBG] Start parsing for secret in post body
2020-07-30 13:56:11.989 +03:00 [DBG] client id without secret found
2020-07-30 13:56:11.990 +03:00 [DBG] Parser found secret: PostBodySecretParser
2020-07-30 13:56:11.990 +03:00 [DBG] Secret id found: spa
2020-07-30 13:56:11.999 +03:00 [DBG] spa found in database: true
2020-07-30 13:56:11.999 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 13:56:12.001 +03:00 [DBG] Public Client - skipping secret validation success
2020-07-30 13:56:12.001 +03:00 [DBG] Client validation success
2020-07-30 13:56:12.002 +03:00 [INF] {"ClientId":"spa","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM1KES290NAU:00000003","TimeStamp":"2020-07-30T10:56:12.0000000Z","ProcessId":30664,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2020-07-30 13:56:12.009 +03:00 [DBG] Start token request validation
2020-07-30 13:56:12.012 +03:00 [DBG] Start validation of authorization code token request
2020-07-30 13:56:12.023 +03:00 [DBG] F1sbzyb9W6LZY8kzzEPV8OBBvA61cbM+rxB/Z160gFA= found in database: true
2020-07-30 13:56:12.051 +03:00 [DBG] removing F1sbzyb9W6LZY8kzzEPV8OBBvA61cbM+rxB/Z160gFA= persisted grant from database
2020-07-30 13:56:12.061 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2020-07-30 13:56:12.064 +03:00 [DBG] Validation of authorization code token request success
2020-07-30 13:56:12.068 +03:00 [INF] Token request validation success, {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"07D14EA0D17D5A410FD6B385E1E3B513E5542D199E84ABB20B5DB54C154CFEB2","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"spa","code":"07D14EA0D17D5A410FD6B385E1E3B513E5542D199E84ABB20B5DB54C154CFEB2","redirect_uri":"http://localhost:5005/callback.html","code_verifier":"0347f5ca8b8a463b94289c8caf919aaf2c9fa41823d346809bb10fca80b62d904b029eb279c544318f579f3ced321c3b","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2020-07-30 13:56:12.092 +03:00 [DBG] spa found in database: true
2020-07-30 13:56:12.093 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 13:56:12.101 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 13:56:12.105 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 13:56:12.110 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 13:56:12.120 +03:00 [DBG] Getting claims for access token for client: spa
2020-07-30 13:56:12.120 +03:00 [DBG] Getting claims for access token for subject: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 13:56:12.219 +03:00 [DBG] spa found in database: true
2020-07-30 13:56:12.219 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 13:56:12.225 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 13:56:12.228 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 13:56:12.229 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 13:56:12.234 +03:00 [DBG] Getting claims for identity token for subject: 65886359-073C-434B-AD2D-A3932222DABE and client: spa
2020-07-30 13:56:12.235 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-07-30 13:56:12.238 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":null,"Endpoint":"Token","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read api.write","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****CmWw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****6FzA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KES290NAU:00000003","TimeStamp":"2020-07-30T10:56:12.0000000Z","ProcessId":30664,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 13:56:12.247 +03:00 [DBG] Token request success.
2020-07-30 13:56:12.261 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:5005
2020-07-30 13:56:12.264 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 13:56:12.265 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 13:56:12.266 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-07-30 13:56:12.267 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-07-30 13:56:12.268 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-07-30 13:56:12.270 +03:00 [DBG] Start userinfo request
2020-07-30 13:56:12.273 +03:00 [DBG] Bearer token found in header
2020-07-30 13:56:12.320 +03:00 [DBG] spa found in database: true
2020-07-30 13:56:12.321 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 13:56:12.335 +03:00 [DBG] spa found in database: true
2020-07-30 13:56:12.335 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 13:56:12.341 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 13:56:12.345 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"94DF8EEAE8419E7E28E618D00B3022D0","Claims":{"nbf":1596106572,"exp":1596110172,"iss":"https://localhost:5000","aud":["api","https://localhost:5000/resources"],"client_id":"spa","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596106571,"idp":"local","role":"student","jti":"94DF8EEAE8419E7E28E618D00B3022D0","sid":"C1AF9432D436A998E8E692C27A1ED5EB","iat":1596106572,"scope":["openid","profile","email","api.read","api.write"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 13:56:12.352 +03:00 [DBG] Creating userinfo response
2020-07-30 13:56:12.354 +03:00 [DBG] Scopes in access token: openid profile email api.read api.write
2020-07-30 13:56:12.356 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 13:56:12.360 +03:00 [DBG] Requested claim types: zoneinfo updated_at locale name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate sub email email_verified
2020-07-30 13:56:12.365 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2020-07-30 13:56:12.365 +03:00 [DBG] End userinfo request
2020-07-30 13:56:12.382 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 13:56:12.383 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 13:56:12.387 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 13:56:12.388 +03:00 [DBG] Rendering check session result
2020-07-30 13:56:41.659 +03:00 [INF] Removing 0 grants
2020-07-30 13:56:41.665 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:57:11.694 +03:00 [INF] Removing 0 grants
2020-07-30 13:57:11.696 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:57:16.351 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 13:57:16.357 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 13:57:16.358 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 13:57:16.361 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 13:57:16.364 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 13:57:16.367 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 13:57:16.368 +03:00 [DBG] Start discovery request
2020-07-30 13:57:16.373 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 13:57:16.407 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 13:57:16.412 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 13:57:16.415 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 13:57:16.416 +03:00 [DBG] Rendering check session result
2020-07-30 13:57:16.634 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 13:57:16.636 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 13:57:16.637 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 13:57:16.640 +03:00 [DBG] Start discovery request
2020-07-30 13:57:16.645 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 13:57:16.799 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-07-30 13:57:16.802 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-07-30 13:57:16.805 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-07-30 13:57:16.807 +03:00 [DBG] Start key discovery request
2020-07-30 13:57:41.703 +03:00 [INF] Removing 0 grants
2020-07-30 13:57:41.706 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:58:11.710 +03:00 [INF] Removing 0 grants
2020-07-30 13:58:11.712 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:58:41.727 +03:00 [INF] Removing 0 grants
2020-07-30 13:58:41.729 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:59:11.739 +03:00 [INF] Removing 0 grants
2020-07-30 13:59:11.741 +03:00 [INF] Removing 0 device flow codes
2020-07-30 13:59:41.754 +03:00 [INF] Removing 0 grants
2020-07-30 13:59:41.756 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:00:11.764 +03:00 [INF] Removing 0 grants
2020-07-30 14:00:11.765 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:00:41.778 +03:00 [INF] Removing 0 grants
2020-07-30 14:00:41.780 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:01:11.789 +03:00 [INF] Removing 0 grants
2020-07-30 14:01:11.793 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:01:41.808 +03:00 [INF] Removing 0 grants
2020-07-30 14:01:41.815 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:02:11.823 +03:00 [INF] Removing 0 grants
2020-07-30 14:02:11.824 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:02:41.832 +03:00 [INF] Removing 0 grants
2020-07-30 14:02:41.833 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:03:11.840 +03:00 [INF] Removing 0 grants
2020-07-30 14:03:11.841 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:03:41.863 +03:00 [INF] Removing 0 grants
2020-07-30 14:03:41.869 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:04:11.878 +03:00 [INF] Removing 0 grants
2020-07-30 14:04:11.879 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:04:41.882 +03:00 [INF] Removing 0 grants
2020-07-30 14:04:41.884 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:05:11.887 +03:00 [INF] Removing 0 grants
2020-07-30 14:05:11.888 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:05:41.907 +03:00 [INF] Removing 0 grants
2020-07-30 14:05:41.908 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:06:11.916 +03:00 [INF] Removing 0 grants
2020-07-30 14:06:11.917 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:06:41.927 +03:00 [INF] Removing 0 grants
2020-07-30 14:06:41.935 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:07:11.944 +03:00 [INF] Removing 0 grants
2020-07-30 14:07:11.945 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:07:41.950 +03:00 [INF] Removing 0 grants
2020-07-30 14:07:41.951 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:08:11.961 +03:00 [INF] Removing 0 grants
2020-07-30 14:08:11.962 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:08:41.975 +03:00 [INF] Removing 0 grants
2020-07-30 14:08:41.977 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:09:11.980 +03:00 [INF] Removing 0 grants
2020-07-30 14:09:11.981 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:09:41.987 +03:00 [INF] Removing 0 grants
2020-07-30 14:09:41.988 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:10:11.996 +03:00 [INF] Removing 0 grants
2020-07-30 14:10:11.998 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:10:42.002 +03:00 [INF] Removing 0 grants
2020-07-30 14:10:42.003 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:11:12.011 +03:00 [INF] Removing 0 grants
2020-07-30 14:11:12.012 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:11:42.020 +03:00 [INF] Removing 0 grants
2020-07-30 14:11:42.021 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:12:12.029 +03:00 [INF] Removing 0 grants
2020-07-30 14:12:12.033 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:12:42.050 +03:00 [INF] Removing 0 grants
2020-07-30 14:12:42.050 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:13:12.065 +03:00 [INF] Removing 0 grants
2020-07-30 14:13:12.066 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:13:42.074 +03:00 [INF] Removing 0 grants
2020-07-30 14:13:42.075 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:14:12.085 +03:00 [INF] Removing 0 grants
2020-07-30 14:14:12.088 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:14:42.102 +03:00 [INF] Removing 0 grants
2020-07-30 14:14:42.103 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:15:12.116 +03:00 [INF] Removing 0 grants
2020-07-30 14:15:12.117 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:15:42.120 +03:00 [INF] Removing 0 grants
2020-07-30 14:15:42.121 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:16:12.128 +03:00 [INF] Removing 0 grants
2020-07-30 14:16:12.129 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:16:42.136 +03:00 [INF] Removing 0 grants
2020-07-30 14:16:42.137 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:16:46.498 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 14:16:46.501 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 14:16:46.504 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 14:16:46.506 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 14:16:46.507 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 14:16:46.508 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 14:16:46.509 +03:00 [DBG] Start discovery request
2020-07-30 14:16:46.518 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 14:16:46.549 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 14:16:46.550 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 14:16:46.554 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 14:16:46.556 +03:00 [DBG] Rendering check session result
2020-07-30 14:16:46.770 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 14:16:46.772 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 14:16:46.775 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 14:16:46.776 +03:00 [DBG] Start discovery request
2020-07-30 14:16:46.779 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 14:16:46.929 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-07-30 14:16:46.931 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-07-30 14:16:46.934 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-07-30 14:16:46.935 +03:00 [DBG] Start key discovery request
2020-07-30 14:17:12.144 +03:00 [INF] Removing 0 grants
2020-07-30 14:17:12.145 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:17:42.159 +03:00 [INF] Removing 0 grants
2020-07-30 14:17:42.161 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:18:12.170 +03:00 [INF] Removing 0 grants
2020-07-30 14:18:12.175 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:18:42.182 +03:00 [INF] Removing 0 grants
2020-07-30 14:18:42.183 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:18:46.237 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 14:18:46.241 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 14:18:46.243 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 14:18:46.244 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 14:18:46.245 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 14:18:46.247 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 14:18:46.252 +03:00 [DBG] Start discovery request
2020-07-30 14:18:46.259 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 14:19:12.193 +03:00 [INF] Removing 0 grants
2020-07-30 14:19:12.195 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:19:42.198 +03:00 [INF] Removing 0 grants
2020-07-30 14:19:42.199 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:20:12.208 +03:00 [INF] Removing 0 grants
2020-07-30 14:20:12.209 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:20:28.393 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 14:20:28.404 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 14:20:28.411 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 14:20:28.421 +03:00 [DBG] Rendering check session result
2020-07-30 14:20:42.214 +03:00 [INF] Removing 0 grants
2020-07-30 14:20:42.217 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:21:12.229 +03:00 [INF] Removing 0 grants
2020-07-30 14:21:12.230 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:21:42.243 +03:00 [INF] Removing 0 grants
2020-07-30 14:21:42.244 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:22:12.257 +03:00 [INF] Removing 0 grants
2020-07-30 14:22:12.261 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:22:42.271 +03:00 [INF] Removing 0 grants
2020-07-30 14:22:42.272 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:23:12.274 +03:00 [INF] Removing 0 grants
2020-07-30 14:23:12.275 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:23:42.284 +03:00 [INF] Removing 0 grants
2020-07-30 14:23:42.285 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:24:12.303 +03:00 [INF] Removing 0 grants
2020-07-30 14:24:12.308 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:24:42.324 +03:00 [INF] Removing 0 grants
2020-07-30 14:24:42.325 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:25:08.470 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-07-30 14:25:08.472 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-07-30 14:25:08.473 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-07-30 14:25:08.476 +03:00 [DBG] Processing signout request for 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 14:25:08.479 +03:00 [DBG] Start end session request validation
2020-07-30 14:25:08.482 +03:00 [DBG] Start identity token validation
2020-07-30 14:25:08.497 +03:00 [DBG] spa found in database: true
2020-07-30 14:25:08.498 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 14:25:08.500 +03:00 [DBG] Client found: spa / Example Client Application Single Page Javascript App
2020-07-30 14:25:08.501 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 14:25:08.501 +03:00 [DBG] Token validation success
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1596106572,"exp":1596106872,"iss":"https://localhost:5000","aud":"spa","iat":1596106572,"at_hash":"cDAZOlgamH6mYpylpeXL_A","s_hash":"9roWY3QR0jaGGp8gEnBdow","sid":"C1AF9432D436A998E8E692C27A1ED5EB","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596106571,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 14:25:08.515 +03:00 [WRN] Invalid PostLogoutRedirectUri: http://localhost:5005/loggedOut.html
2020-07-30 14:25:08.516 +03:00 [INF] End session request validation success
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","PostLogOutUri":null,"State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:5005/loggedOut.html","state":"a028b2fda9734d9fafdd52a80526f3be"},"$type":"EndSessionRequestValidationLog"}
2020-07-30 14:25:08.518 +03:00 [DBG] Success validating end session request from spa
2020-07-30 14:25:16.998 +03:00 [INF] Removing 0 grants
2020-07-30 14:25:17.000 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:25:17.002 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-30 14:25:17.003 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-30 14:25:17.003 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-30 14:25:17.004 +03:00 [INF] {"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1KES290NAT:00000023","TimeStamp":"2020-07-30T11:25:17.0000000Z","ProcessId":30664,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-30 14:25:17.017 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-30 14:25:17.029 +03:00 [DBG] spa found in database: true
2020-07-30 14:25:17.029 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 14:25:17.031 +03:00 [DBG] No client back-channel logout URLs
2020-07-30 14:25:27.904 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 14:25:27.909 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 14:25:27.910 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 14:25:27.910 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 14:25:27.912 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 14:25:27.912 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 14:25:27.913 +03:00 [DBG] Start discovery request
2020-07-30 14:25:27.920 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 14:25:27.939 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-07-30 14:25:27.940 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-07-30 14:25:27.940 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-07-30 14:25:27.940 +03:00 [DBG] Start authorize request
2020-07-30 14:25:27.941 +03:00 [DBG] No user present in authorize request
2020-07-30 14:25:27.941 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 14:25:27.950 +03:00 [DBG] spa found in database: true
2020-07-30 14:25:27.954 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 14:25:27.955 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 14:25:27.957 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 14:25:27.958 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 14:25:27.959 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 14:25:27.960 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 14:25:27.960 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 14:25:27.960 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read api.write","State":"301336325553414dad11bb278a4e0ace","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":"popup","PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5005/callback.html","response_type":"code","scope":"openid profile email api.read api.write","state":"301336325553414dad11bb278a4e0ace","code_challenge":"8m7BqWwCZDzerxa2AE18yx17A2dGPl-nfLchZczsMUo","code_challenge_method":"S256","display":"popup"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 14:25:27.962 +03:00 [INF] Showing login: User is not authenticated
2020-07-30 14:25:27.967 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 14:25:27.974 +03:00 [DBG] spa found in database: true
2020-07-30 14:25:27.974 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 14:25:27.974 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 14:25:27.976 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 14:25:27.977 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 14:25:27.977 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 14:25:27.978 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 14:25:27.978 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 14:25:27.984 +03:00 [DBG] spa found in database: true
2020-07-30 14:25:27.989 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 14:25:47.006 +03:00 [INF] Removing 0 grants
2020-07-30 14:25:47.009 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:26:17.010 +03:00 [INF] Removing 0 grants
2020-07-30 14:26:17.011 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:26:47.020 +03:00 [INF] Removing 0 grants
2020-07-30 14:26:47.021 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:27:17.035 +03:00 [INF] Removing 0 grants
2020-07-30 14:27:17.036 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:27:47.039 +03:00 [INF] Removing 0 grants
2020-07-30 14:27:47.041 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:28:17.052 +03:00 [INF] Removing 0 grants
2020-07-30 14:28:17.055 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:28:47.068 +03:00 [INF] Removing 0 grants
2020-07-30 14:28:47.069 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:29:17.085 +03:00 [INF] Removing 0 grants
2020-07-30 14:29:17.090 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:29:47.098 +03:00 [INF] Removing 0 grants
2020-07-30 14:29:47.099 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:30:17.110 +03:00 [INF] Removing 0 grants
2020-07-30 14:30:17.113 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:30:47.129 +03:00 [INF] Removing 0 grants
2020-07-30 14:30:47.130 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:31:17.158 +03:00 [INF] Removing 0 grants
2020-07-30 14:31:17.160 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:31:47.175 +03:00 [INF] Removing 0 grants
2020-07-30 14:31:47.176 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:32:17.199 +03:00 [INF] Removing 0 grants
2020-07-30 14:32:17.207 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:32:47.221 +03:00 [INF] Removing 0 grants
2020-07-30 14:32:47.222 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:33:17.244 +03:00 [INF] Removing 0 grants
2020-07-30 14:33:17.246 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:33:47.254 +03:00 [INF] Removing 0 grants
2020-07-30 14:33:47.257 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:34:17.273 +03:00 [INF] Removing 0 grants
2020-07-30 14:34:17.275 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:34:47.284 +03:00 [INF] Removing 0 grants
2020-07-30 14:34:47.287 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:35:17.565 +03:00 [INF] Removing 0 grants
2020-07-30 14:35:17.577 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:35:47.599 +03:00 [INF] Removing 0 grants
2020-07-30 14:35:47.601 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:36:17.614 +03:00 [INF] Removing 0 grants
2020-07-30 14:36:17.616 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:36:47.645 +03:00 [INF] Removing 0 grants
2020-07-30 14:36:47.647 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:37:17.658 +03:00 [INF] Removing 0 grants
2020-07-30 14:37:17.659 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:37:47.691 +03:00 [INF] Removing 0 grants
2020-07-30 14:37:47.696 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:38:17.710 +03:00 [INF] Removing 0 grants
2020-07-30 14:38:17.715 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:38:47.729 +03:00 [INF] Removing 0 grants
2020-07-30 14:38:47.730 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:39:17.745 +03:00 [INF] Removing 0 grants
2020-07-30 14:39:17.746 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:39:47.762 +03:00 [INF] Removing 0 grants
2020-07-30 14:39:47.764 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:40:17.769 +03:00 [INF] Removing 0 grants
2020-07-30 14:40:17.770 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:40:48.035 +03:00 [INF] Removing 0 grants
2020-07-30 14:40:48.051 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:41:18.070 +03:00 [INF] Removing 0 grants
2020-07-30 14:41:18.072 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:41:48.074 +03:00 [INF] Removing 0 grants
2020-07-30 14:41:48.076 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:42:18.090 +03:00 [INF] Removing 0 grants
2020-07-30 14:42:18.092 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:42:48.106 +03:00 [INF] Removing 0 grants
2020-07-30 14:42:48.107 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:43:18.120 +03:00 [INF] Removing 0 grants
2020-07-30 14:43:18.122 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:43:48.132 +03:00 [INF] Removing 0 grants
2020-07-30 14:43:48.133 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:44:18.147 +03:00 [INF] Removing 0 grants
2020-07-30 14:44:18.150 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:44:48.160 +03:00 [INF] Removing 0 grants
2020-07-30 14:44:48.161 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:45:18.181 +03:00 [INF] Removing 0 grants
2020-07-30 14:45:18.183 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:45:48.193 +03:00 [INF] Removing 0 grants
2020-07-30 14:45:48.197 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:46:18.206 +03:00 [INF] Removing 0 grants
2020-07-30 14:46:18.208 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:46:48.224 +03:00 [INF] Removing 0 grants
2020-07-30 14:46:48.235 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:47:18.245 +03:00 [INF] Removing 0 grants
2020-07-30 14:47:18.246 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:47:48.269 +03:00 [INF] Removing 0 grants
2020-07-30 14:47:48.271 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:48:18.276 +03:00 [INF] Removing 0 grants
2020-07-30 14:48:18.277 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:48:48.286 +03:00 [INF] Removing 0 grants
2020-07-30 14:48:48.288 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:49:18.303 +03:00 [INF] Removing 0 grants
2020-07-30 14:49:18.304 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:49:48.309 +03:00 [INF] Removing 0 grants
2020-07-30 14:49:48.311 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:50:18.318 +03:00 [INF] Removing 0 grants
2020-07-30 14:50:18.320 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:50:48.323 +03:00 [INF] Removing 0 grants
2020-07-30 14:50:48.325 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:51:18.334 +03:00 [INF] Removing 0 grants
2020-07-30 14:51:18.335 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:51:48.350 +03:00 [INF] Removing 0 grants
2020-07-30 14:51:48.353 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:52:18.367 +03:00 [INF] Removing 0 grants
2020-07-30 14:52:18.368 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:52:48.384 +03:00 [INF] Removing 0 grants
2020-07-30 14:52:48.392 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:53:18.397 +03:00 [INF] Removing 0 grants
2020-07-30 14:53:18.398 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:53:48.401 +03:00 [INF] Removing 0 grants
2020-07-30 14:53:48.403 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:54:18.424 +03:00 [INF] Removing 0 grants
2020-07-30 14:54:18.426 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:54:48.427 +03:00 [INF] Removing 0 grants
2020-07-30 14:54:48.428 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:55:18.443 +03:00 [INF] Removing 0 grants
2020-07-30 14:55:18.447 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:55:48.457 +03:00 [INF] Removing 0 grants
2020-07-30 14:55:48.458 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:56:18.467 +03:00 [INF] Removing 0 grants
2020-07-30 14:56:18.469 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:56:48.474 +03:00 [INF] Removing 0 grants
2020-07-30 14:56:48.479 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:57:18.496 +03:00 [INF] Removing 0 grants
2020-07-30 14:57:18.499 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:57:48.508 +03:00 [INF] Removing 0 grants
2020-07-30 14:57:48.511 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:58:18.771 +03:00 [INF] Removing 0 grants
2020-07-30 14:58:18.784 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:58:48.805 +03:00 [INF] Removing 0 grants
2020-07-30 14:58:48.815 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:59:18.829 +03:00 [INF] Removing 0 grants
2020-07-30 14:59:18.834 +03:00 [INF] Removing 0 device flow codes
2020-07-30 14:59:19.781 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 14:59:19.785 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 14:59:19.785 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 14:59:19.786 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 14:59:19.786 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 14:59:19.787 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 14:59:19.787 +03:00 [DBG] Start discovery request
2020-07-30 14:59:19.799 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 14:59:19.814 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-07-30 14:59:19.819 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-07-30 14:59:19.819 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-07-30 14:59:19.819 +03:00 [DBG] Start authorize request
2020-07-30 14:59:19.820 +03:00 [DBG] No user present in authorize request
2020-07-30 14:59:19.820 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 14:59:19.837 +03:00 [DBG] spa found in database: true
2020-07-30 14:59:19.837 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 14:59:19.838 +03:00 [ERR] Invalid redirect_uri: http://localhost:5006/callback.html
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5005/callback.html"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"spa","redirect_uri":"http://localhost:5006/callback.html","response_type":"code","scope":"openid profile email","state":"c3efbd178812430d9aec974bde1f1d29","code_challenge":"dXGTF271w-PQ0JfNdvmhgrSv3ZMbHlQzCWwMU9arArQ","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 14:59:19.841 +03:00 [ERR] Request validation failed
2020-07-30 14:59:19.841 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5005/callback.html"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"spa","redirect_uri":"http://localhost:5006/callback.html","response_type":"code","scope":"openid profile email","state":"c3efbd178812430d9aec974bde1f1d29","code_challenge":"dXGTF271w-PQ0JfNdvmhgrSv3ZMbHlQzCWwMU9arArQ","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 14:59:19.844 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"invalid_request","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM1KES290NAT:00000035","TimeStamp":"2020-07-30T11:59:19.0000000Z","ProcessId":30664,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2020-07-30 14:59:48.849 +03:00 [INF] Removing 0 grants
2020-07-30 14:59:48.851 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:00:18.854 +03:00 [INF] Removing 0 grants
2020-07-30 15:00:18.856 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:00:41.999 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 15:00:42.013 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 15:00:42.014 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 15:00:42.014 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:00:42.014 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:00:42.015 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:00:42.015 +03:00 [DBG] Start discovery request
2020-07-30 15:00:42.026 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:00:42.041 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-07-30 15:00:42.042 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-07-30 15:00:42.042 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-07-30 15:00:42.043 +03:00 [DBG] Processing signout request for anonymous
2020-07-30 15:00:42.043 +03:00 [DBG] Start end session request validation
2020-07-30 15:00:42.044 +03:00 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"unknown","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:5006/index.html"},"$type":"EndSessionRequestValidationLog"}
2020-07-30 15:00:42.044 +03:00 [DBG] Success validating end session request from null
2020-07-30 15:00:48.881 +03:00 [INF] Removing 0 grants
2020-07-30 15:00:48.889 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:00:50.517 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 15:00:50.520 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 15:00:50.520 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 15:00:50.520 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:00:50.521 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:00:50.521 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:00:50.521 +03:00 [DBG] Start discovery request
2020-07-30 15:00:50.525 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:00:50.540 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-07-30 15:00:50.541 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-07-30 15:00:50.542 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-07-30 15:00:50.542 +03:00 [DBG] Start authorize request
2020-07-30 15:00:50.542 +03:00 [DBG] No user present in authorize request
2020-07-30 15:00:50.543 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 15:00:50.566 +03:00 [DBG] spa found in database: true
2020-07-30 15:00:50.566 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:00:50.567 +03:00 [ERR] Invalid redirect_uri: http://localhost:5006/callback.html
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5005/callback.html"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"spa","redirect_uri":"http://localhost:5006/callback.html","response_type":"code","scope":"openid profile email","state":"9a2acb47003b45ec9464c071999866c9","code_challenge":"4nFcpmMV_rdUZsQHYf3Z0pVE2xcwE38_DbTxnp6-Zuw","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 15:00:50.569 +03:00 [ERR] Request validation failed
2020-07-30 15:00:50.569 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5005/callback.html"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"spa","redirect_uri":"http://localhost:5006/callback.html","response_type":"code","scope":"openid profile email","state":"9a2acb47003b45ec9464c071999866c9","code_challenge":"4nFcpmMV_rdUZsQHYf3Z0pVE2xcwE38_DbTxnp6-Zuw","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 15:00:50.571 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"invalid_request","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM1KES290NAT:0000004F","TimeStamp":"2020-07-30T12:00:50.0000000Z","ProcessId":30664,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2020-07-30 15:01:18.893 +03:00 [INF] Removing 0 grants
2020-07-30 15:01:18.894 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:01:48.922 +03:00 [INF] Removing 0 grants
2020-07-30 15:01:48.924 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:02:18.930 +03:00 [INF] Removing 0 grants
2020-07-30 15:02:18.932 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:02:48.955 +03:00 [INF] Removing 0 grants
2020-07-30 15:02:48.957 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:03:18.959 +03:00 [INF] Removing 0 grants
2020-07-30 15:03:18.960 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:06:34.183 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-30 15:06:34.209 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-30 15:06:34.210 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-30 15:06:34.211 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-30 15:06:34.211 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-30 15:06:34.211 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-30 15:06:34.212 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-30 15:06:35.362 +03:00 [DBG] Login Url: /Account/Login
2020-07-30 15:06:35.365 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-30 15:06:35.365 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-30 15:06:35.366 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-30 15:06:35.366 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-30 15:06:35.366 +03:00 [DBG] Error Url: /home/error
2020-07-30 15:06:35.366 +03:00 [DBG] Error Id Parameter: errorId
2020-07-30 15:07:04.375 +03:00 [INF] Removing 0 grants
2020-07-30 15:07:04.385 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:07:34.398 +03:00 [INF] Removing 0 grants
2020-07-30 15:07:34.400 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:08:04.418 +03:00 [INF] Removing 0 grants
2020-07-30 15:08:04.421 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:08:09.238 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 15:08:09.254 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 15:08:09.255 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 15:08:09.261 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:08:09.264 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:08:09.265 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:08:09.267 +03:00 [DBG] Start discovery request
2020-07-30 15:08:09.403 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:08:09.450 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-07-30 15:08:09.453 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-07-30 15:08:09.455 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-07-30 15:08:09.457 +03:00 [DBG] Start authorize request
2020-07-30 15:08:09.461 +03:00 [DBG] No user present in authorize request
2020-07-30 15:08:09.463 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 15:08:09.566 +03:00 [DBG] spa found in database: true
2020-07-30 15:08:09.571 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:08:09.581 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 15:08:09.630 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:08:09.661 +03:00 [DBG] Found [] API resources in database
2020-07-30 15:08:09.678 +03:00 [DBG] Found [] scopes in database
2020-07-30 15:08:09.687 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 15:08:09.699 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5006/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html","http://localhost:5006/callback.html"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email","State":"343261f3cfde41cdb836f7aad1f2733f","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5006/callback.html","response_type":"code","scope":"openid profile email","state":"343261f3cfde41cdb836f7aad1f2733f","code_challenge":"9DDdYWCmC8sWvd9uSzZusc6ACjGCSWbwTv2Q04322mE","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 15:08:09.714 +03:00 [INF] Showing login: User is not authenticated
2020-07-30 15:08:09.731 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 15:08:09.755 +03:00 [DBG] spa found in database: true
2020-07-30 15:08:09.755 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:08:09.759 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 15:08:09.763 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:08:09.778 +03:00 [DBG] Found [] API resources in database
2020-07-30 15:08:09.783 +03:00 [DBG] Found [] scopes in database
2020-07-30 15:08:09.784 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 15:08:09.798 +03:00 [DBG] spa found in database: true
2020-07-30 15:08:09.798 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:08:34.438 +03:00 [INF] Removing 0 grants
2020-07-30 15:08:34.441 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:09:04.454 +03:00 [INF] Removing 0 grants
2020-07-30 15:09:04.456 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:09:34.474 +03:00 [INF] Removing 0 grants
2020-07-30 15:09:34.477 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:10:04.495 +03:00 [INF] Removing 0 grants
2020-07-30 15:10:04.497 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:10:34.512 +03:00 [INF] Removing 0 grants
2020-07-30 15:10:34.517 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:11:04.535 +03:00 [INF] Removing 0 grants
2020-07-30 15:11:04.536 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:11:34.561 +03:00 [INF] Removing 0 grants
2020-07-30 15:11:34.570 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:12:04.585 +03:00 [INF] Removing 0 grants
2020-07-30 15:12:04.587 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:12:34.603 +03:00 [INF] Removing 0 grants
2020-07-30 15:12:34.606 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:13:04.621 +03:00 [INF] Removing 0 grants
2020-07-30 15:13:04.624 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:13:07.749 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 15:13:07.768 +03:00 [DBG] spa found in database: true
2020-07-30 15:13:07.769 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:13:07.773 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 15:13:07.777 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:13:07.785 +03:00 [DBG] Found [] API resources in database
2020-07-30 15:13:07.790 +03:00 [DBG] Found [] scopes in database
2020-07-30 15:13:07.792 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 15:13:07.828 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":"spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1KG40I7QEV:00000017","TimeStamp":"2020-07-30T12:13:07.0000000Z","ProcessId":11720,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-30 15:13:07.838 +03:00 [DBG] Augmenting SignInContext
2020-07-30 15:13:07.838 +03:00 [DBG] Adding idp claim with value: local
2020-07-30 15:13:07.840 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-30 15:13:07.840 +03:00 [DBG] Adding auth_time claim with value: 1596111187
2020-07-30 15:13:07.852 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 15:13:07.862 +03:00 [DBG] spa found in database: true
2020-07-30 15:13:07.862 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:13:07.879 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-07-30 15:13:07.880 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-07-30 15:13:07.883 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-07-30 15:13:07.886 +03:00 [DBG] Start authorize callback request
2020-07-30 15:13:07.888 +03:00 [DBG] User in authorize request: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 15:13:07.890 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 15:13:07.898 +03:00 [DBG] spa found in database: true
2020-07-30 15:13:07.898 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:13:07.899 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 15:13:07.902 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:13:07.907 +03:00 [DBG] Found [] API resources in database
2020-07-30 15:13:07.908 +03:00 [DBG] Found [] scopes in database
2020-07-30 15:13:07.909 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 15:13:07.910 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5006/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html","http://localhost:5006/callback.html"],"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email","State":"343261f3cfde41cdb836f7aad1f2733f","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"53C4CFF24925899A5C0F1DECD7D5CB69","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5006/callback.html","response_type":"code","scope":"openid profile email","state":"343261f3cfde41cdb836f7aad1f2733f","code_challenge":"9DDdYWCmC8sWvd9uSzZusc6ACjGCSWbwTv2Q04322mE","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 15:13:07.934 +03:00 [DBG] Client is configured to not require consent, no consent is required
2020-07-30 15:13:07.936 +03:00 [DBG] Creating Authorization Code Flow response.
2020-07-30 15:13:07.992 +03:00 [DBG] HitCBYmHZZQCtyH2OQBUBC4zJPv1WEd2tQummhpPO60= not found in database
2020-07-30 15:13:08.019 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5006/callback.html","Endpoint":"Authorize","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****4668","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KG40I7QEV:00000019","TimeStamp":"2020-07-30T12:13:08.0000000Z","ProcessId":11720,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 15:13:08.028 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ClientId":"spa","RedirectUri":"http://localhost:5006/callback.html","State":"343261f3cfde41cdb836f7aad1f2733f","Scope":"openid profile email","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-07-30 15:13:08.035 +03:00 [DBG] Augmenting SignInContext
2020-07-30 15:13:08.037 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 15:13:08.399 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 15:13:08.410 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 15:13:08.410 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 15:13:08.414 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:13:08.415 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:13:08.416 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:13:08.416 +03:00 [DBG] Start discovery request
2020-07-30 15:13:08.428 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:13:08.433 +03:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:5006
2020-07-30 15:13:08.436 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 15:13:08.439 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 15:13:08.445 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-07-30 15:13:08.452 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-07-30 15:13:08.457 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-07-30 15:13:08.468 +03:00 [DBG] Start token request.
2020-07-30 15:13:08.470 +03:00 [DBG] Start client validation
2020-07-30 15:13:08.475 +03:00 [DBG] Start parsing Basic Authentication secret
2020-07-30 15:13:08.477 +03:00 [DBG] Start parsing for secret in post body
2020-07-30 15:13:08.477 +03:00 [DBG] client id without secret found
2020-07-30 15:13:08.479 +03:00 [DBG] Parser found secret: PostBodySecretParser
2020-07-30 15:13:08.480 +03:00 [DBG] Secret id found: spa
2020-07-30 15:13:08.494 +03:00 [DBG] spa found in database: true
2020-07-30 15:13:08.495 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:13:08.499 +03:00 [DBG] Public Client - skipping secret validation success
2020-07-30 15:13:08.499 +03:00 [DBG] Client validation success
2020-07-30 15:13:08.505 +03:00 [INF] {"ClientId":"spa","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM1KG40I7QF0:00000005","TimeStamp":"2020-07-30T12:13:08.0000000Z","ProcessId":11720,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2020-07-30 15:13:08.509 +03:00 [DBG] Start token request validation
2020-07-30 15:13:08.513 +03:00 [DBG] Start validation of authorization code token request
2020-07-30 15:13:08.527 +03:00 [DBG] HitCBYmHZZQCtyH2OQBUBC4zJPv1WEd2tQummhpPO60= found in database: true
2020-07-30 15:13:08.561 +03:00 [DBG] removing HitCBYmHZZQCtyH2OQBUBC4zJPv1WEd2tQummhpPO60= persisted grant from database
2020-07-30 15:13:08.574 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2020-07-30 15:13:08.578 +03:00 [DBG] Validation of authorization code token request success
2020-07-30 15:13:08.580 +03:00 [INF] Token request validation success, {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"D43753AFC1841B6E34F19B3B3B88BDFB146403746EF2D149C32185BB3E294668","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"spa","code":"D43753AFC1841B6E34F19B3B3B88BDFB146403746EF2D149C32185BB3E294668","redirect_uri":"http://localhost:5006/callback.html","code_verifier":"6a5988581baa46b888d7f756597de4fd1f1d20c42d4d47e293cc6a472a810e6788ae80d640f74baaabeec5ffead2581e","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2020-07-30 15:13:08.597 +03:00 [DBG] spa found in database: true
2020-07-30 15:13:08.597 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:13:08.604 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:13:08.608 +03:00 [DBG] Found [] API resources in database
2020-07-30 15:13:08.611 +03:00 [DBG] Found [] scopes in database
2020-07-30 15:13:08.621 +03:00 [DBG] Getting claims for access token for client: spa
2020-07-30 15:13:08.622 +03:00 [DBG] Getting claims for access token for subject: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 15:13:08.721 +03:00 [DBG] spa found in database: true
2020-07-30 15:13:08.722 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:13:08.727 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:13:08.729 +03:00 [DBG] Found [] API resources in database
2020-07-30 15:13:08.730 +03:00 [DBG] Found [] scopes in database
2020-07-30 15:13:08.734 +03:00 [DBG] Getting claims for identity token for subject: 65886359-073C-434B-AD2D-A3932222DABE and client: spa
2020-07-30 15:13:08.735 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-07-30 15:13:08.740 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":null,"Endpoint":"Token","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****fegg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****yppg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KG40I7QF0:00000005","TimeStamp":"2020-07-30T12:13:08.0000000Z","ProcessId":11720,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 15:13:08.755 +03:00 [DBG] Token request success.
2020-07-30 15:13:08.785 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:5006
2020-07-30 15:13:08.791 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 15:13:08.797 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 15:13:08.801 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-07-30 15:13:08.805 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-07-30 15:13:08.810 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-07-30 15:13:08.815 +03:00 [DBG] Start userinfo request
2020-07-30 15:13:08.816 +03:00 [DBG] Bearer token found in header
2020-07-30 15:13:08.868 +03:00 [DBG] spa found in database: true
2020-07-30 15:13:08.869 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:13:08.881 +03:00 [DBG] spa found in database: true
2020-07-30 15:13:08.881 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:13:08.889 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 15:13:08.891 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"077734CD78DF26C0F7226EA0BEA72ADB","Claims":{"nbf":1596111188,"exp":1596114788,"iss":"https://localhost:5000","aud":"https://localhost:5000/resources","client_id":"spa","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596111187,"idp":"local","jti":"077734CD78DF26C0F7226EA0BEA72ADB","sid":"53C4CFF24925899A5C0F1DECD7D5CB69","iat":1596111188,"scope":["openid","profile","email"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 15:13:08.901 +03:00 [DBG] Creating userinfo response
2020-07-30 15:13:08.902 +03:00 [DBG] Scopes in access token: openid profile email
2020-07-30 15:13:08.906 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:13:08.910 +03:00 [DBG] Requested claim types: updated_at name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale sub email email_verified
2020-07-30 15:13:08.914 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2020-07-30 15:13:08.915 +03:00 [DBG] End userinfo request
2020-07-30 15:13:08.928 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 15:13:08.929 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 15:13:08.932 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 15:13:08.937 +03:00 [DBG] Rendering check session result
2020-07-30 15:13:08.977 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 15:13:08.978 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 15:13:08.979 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 15:13:08.983 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:13:08.985 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:13:08.986 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:13:08.988 +03:00 [DBG] Start discovery request
2020-07-30 15:13:08.995 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:13:09.020 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 15:13:09.021 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 15:13:09.025 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 15:13:09.025 +03:00 [DBG] Rendering check session result
2020-07-30 15:13:34.634 +03:00 [INF] Removing 0 grants
2020-07-30 15:13:34.635 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:14:04.648 +03:00 [INF] Removing 0 grants
2020-07-30 15:14:04.650 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:14:34.661 +03:00 [INF] Removing 0 grants
2020-07-30 15:14:34.662 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:15:04.676 +03:00 [INF] Removing 0 grants
2020-07-30 15:15:04.677 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:15:34.687 +03:00 [INF] Removing 0 grants
2020-07-30 15:15:34.688 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:16:04.692 +03:00 [INF] Removing 0 grants
2020-07-30 15:16:04.694 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:16:34.706 +03:00 [INF] Removing 0 grants
2020-07-30 15:16:34.707 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:17:04.724 +03:00 [INF] Removing 0 grants
2020-07-30 15:17:04.726 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:17:34.738 +03:00 [INF] Removing 0 grants
2020-07-30 15:17:34.739 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:18:04.758 +03:00 [INF] Removing 0 grants
2020-07-30 15:18:04.760 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:18:34.768 +03:00 [INF] Removing 0 grants
2020-07-30 15:18:34.769 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:19:04.784 +03:00 [INF] Removing 0 grants
2020-07-30 15:19:04.786 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:19:34.799 +03:00 [INF] Removing 0 grants
2020-07-30 15:19:34.801 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:20:04.822 +03:00 [INF] Removing 0 grants
2020-07-30 15:20:04.825 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:20:34.844 +03:00 [INF] Removing 0 grants
2020-07-30 15:20:34.851 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:21:01.567 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 15:21:01.569 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 15:21:01.570 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 15:21:01.571 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:21:01.572 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:21:01.573 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:21:01.573 +03:00 [DBG] Start discovery request
2020-07-30 15:21:01.587 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:21:01.605 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 15:21:01.605 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 15:21:01.606 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 15:21:01.606 +03:00 [DBG] Rendering check session result
2020-07-30 15:21:04.866 +03:00 [INF] Removing 0 grants
2020-07-30 15:21:04.868 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:21:34.882 +03:00 [INF] Removing 0 grants
2020-07-30 15:21:34.884 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:22:04.893 +03:00 [INF] Removing 0 grants
2020-07-30 15:22:04.894 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:22:34.897 +03:00 [INF] Removing 0 grants
2020-07-30 15:22:34.899 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:23:04.914 +03:00 [INF] Removing 0 grants
2020-07-30 15:23:04.915 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:23:34.926 +03:00 [INF] Removing 0 grants
2020-07-30 15:23:34.928 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:24:04.930 +03:00 [INF] Removing 0 grants
2020-07-30 15:24:04.931 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:24:34.941 +03:00 [INF] Removing 0 grants
2020-07-30 15:24:34.943 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:25:04.956 +03:00 [INF] Removing 0 grants
2020-07-30 15:25:04.958 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:30:21.654 +03:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-07-30 15:30:21.686 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-07-30 15:30:21.686 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2020-07-30 15:30:21.686 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2020-07-30 15:30:21.686 +03:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2020-07-30 15:30:21.687 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2020-07-30 15:30:21.687 +03:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2020-07-30 15:30:51.967 +03:00 [INF] Removing 0 grants
2020-07-30 15:30:51.977 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:31:21.987 +03:00 [INF] Removing 0 grants
2020-07-30 15:31:21.989 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:31:51.998 +03:00 [INF] Removing 0 grants
2020-07-30 15:31:52.004 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:32:22.012 +03:00 [INF] Removing 0 grants
2020-07-30 15:32:22.014 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:32:38.741 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 15:32:38.762 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 15:32:38.764 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 15:32:38.788 +03:00 [DBG] Login Url: /Account/Login
2020-07-30 15:32:38.789 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2020-07-30 15:32:38.790 +03:00 [DBG] Logout Url: /Account/Logout
2020-07-30 15:32:38.790 +03:00 [DBG] ConsentUrl Url: /consent
2020-07-30 15:32:38.793 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2020-07-30 15:32:38.793 +03:00 [DBG] Error Url: /home/error
2020-07-30 15:32:38.794 +03:00 [DBG] Error Id Parameter: errorId
2020-07-30 15:32:38.804 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:32:38.808 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:32:38.810 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:32:38.815 +03:00 [DBG] Start discovery request
2020-07-30 15:32:39.182 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:32:39.243 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-07-30 15:32:39.256 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-07-30 15:32:39.257 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-07-30 15:32:39.262 +03:00 [DBG] Start authorize request
2020-07-30 15:32:39.268 +03:00 [DBG] User in authorize request: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 15:32:39.276 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 15:32:39.457 +03:00 [DBG] spa found in database: true
2020-07-30 15:32:39.461 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:32:39.471 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 15:32:39.516 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:32:39.546 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 15:32:39.561 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 15:32:39.569 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 15:32:39.570 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 15:32:39.579 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html","http://localhost:5006/callback.html"],"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read api.write","State":"b8f690c363a745cbab185ba1e36778cf","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":"popup","PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"53C4CFF24925899A5C0F1DECD7D5CB69","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5005/callback.html","response_type":"code","scope":"openid profile email api.read api.write","state":"b8f690c363a745cbab185ba1e36778cf","code_challenge":"WYk81t954lVcQf2n60pzZJwym76DpIllXMSk7yFbPIw","code_challenge_method":"S256","display":"popup"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 15:32:39.639 +03:00 [DBG] Client is configured to not require consent, no consent is required
2020-07-30 15:32:39.641 +03:00 [DBG] Creating Authorization Code Flow response.
2020-07-30 15:32:39.694 +03:00 [DBG] MZJn1bdU3rguSmrgYduszxOW/flBuVysZ5SyMbUvkq0= not found in database
2020-07-30 15:32:39.802 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","Endpoint":"Authorize","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read api.write","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****137C","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:00000001","TimeStamp":"2020-07-30T12:32:39.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 15:32:39.811 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ClientId":"spa","RedirectUri":"http://localhost:5005/callback.html","State":"b8f690c363a745cbab185ba1e36778cf","Scope":"openid profile email api.read api.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-07-30 15:32:39.825 +03:00 [DBG] Augmenting SignInContext
2020-07-30 15:32:39.833 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 15:32:39.885 +03:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:5005
2020-07-30 15:32:39.887 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 15:32:39.888 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 15:32:39.897 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-07-30 15:32:39.902 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-07-30 15:32:39.904 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-07-30 15:32:39.910 +03:00 [DBG] Start token request.
2020-07-30 15:32:39.914 +03:00 [DBG] Start client validation
2020-07-30 15:32:39.917 +03:00 [DBG] Start parsing Basic Authentication secret
2020-07-30 15:32:39.919 +03:00 [DBG] Start parsing for secret in post body
2020-07-30 15:32:39.921 +03:00 [DBG] client id without secret found
2020-07-30 15:32:39.922 +03:00 [DBG] Parser found secret: PostBodySecretParser
2020-07-30 15:32:39.922 +03:00 [DBG] Secret id found: spa
2020-07-30 15:32:39.934 +03:00 [DBG] spa found in database: true
2020-07-30 15:32:39.934 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:32:39.936 +03:00 [DBG] Public Client - skipping secret validation success
2020-07-30 15:32:39.937 +03:00 [DBG] Client validation success
2020-07-30 15:32:39.940 +03:00 [INF] {"ClientId":"spa","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM1KGIIKHO1U:00000003","TimeStamp":"2020-07-30T12:32:39.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2020-07-30 15:32:39.944 +03:00 [DBG] Start token request validation
2020-07-30 15:32:39.950 +03:00 [DBG] Start validation of authorization code token request
2020-07-30 15:32:39.960 +03:00 [DBG] MZJn1bdU3rguSmrgYduszxOW/flBuVysZ5SyMbUvkq0= found in database: true
2020-07-30 15:32:39.988 +03:00 [DBG] removing MZJn1bdU3rguSmrgYduszxOW/flBuVysZ5SyMbUvkq0= persisted grant from database
2020-07-30 15:32:40.000 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2020-07-30 15:32:40.004 +03:00 [DBG] Validation of authorization code token request success
2020-07-30 15:32:40.006 +03:00 [INF] Token request validation success, {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"D2B2A445AE6B294A8E8B6028BB23D33FA5E049E9B7FC25F6A288AE43DE5A137C","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"spa","code":"D2B2A445AE6B294A8E8B6028BB23D33FA5E049E9B7FC25F6A288AE43DE5A137C","redirect_uri":"http://localhost:5005/callback.html","code_verifier":"496ebf2a52ea4a7784aad4ce39d362f4955f19944fa8431eaf9b972fa10b34113bd22e3f8cf0410585450921b5890f30","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2020-07-30 15:32:40.027 +03:00 [DBG] spa found in database: true
2020-07-30 15:32:40.028 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:32:40.040 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:32:40.042 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 15:32:40.044 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 15:32:40.054 +03:00 [DBG] Getting claims for access token for client: spa
2020-07-30 15:32:40.055 +03:00 [DBG] Getting claims for access token for subject: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 15:32:40.155 +03:00 [DBG] spa found in database: true
2020-07-30 15:32:40.155 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:32:40.158 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:32:40.161 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 15:32:40.163 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 15:32:40.168 +03:00 [DBG] Getting claims for identity token for subject: 65886359-073C-434B-AD2D-A3932222DABE and client: spa
2020-07-30 15:32:40.169 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-07-30 15:32:40.175 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":null,"Endpoint":"Token","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read api.write","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****dvNQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****DKyw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1U:00000003","TimeStamp":"2020-07-30T12:32:40.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 15:32:40.186 +03:00 [DBG] Token request success.
2020-07-30 15:32:40.201 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:5005
2020-07-30 15:32:40.204 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 15:32:40.204 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 15:32:40.207 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-07-30 15:32:40.209 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-07-30 15:32:40.209 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-07-30 15:32:40.212 +03:00 [DBG] Start userinfo request
2020-07-30 15:32:40.214 +03:00 [DBG] Bearer token found in header
2020-07-30 15:32:40.260 +03:00 [DBG] spa found in database: true
2020-07-30 15:32:40.260 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:32:40.274 +03:00 [DBG] spa found in database: true
2020-07-30 15:32:40.274 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:32:40.280 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 15:32:40.281 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"3DC34EE42E316213919282416DB51C7B","Claims":{"nbf":1596112360,"exp":1596115960,"iss":"https://localhost:5000","aud":["api","https://localhost:5000/resources"],"client_id":"spa","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596111187,"idp":"local","role":"student","jti":"3DC34EE42E316213919282416DB51C7B","sid":"53C4CFF24925899A5C0F1DECD7D5CB69","iat":1596112360,"scope":["openid","profile","email","api.read","api.write"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 15:32:40.290 +03:00 [DBG] Creating userinfo response
2020-07-30 15:32:40.292 +03:00 [DBG] Scopes in access token: openid profile email api.read api.write
2020-07-30 15:32:40.297 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:32:40.300 +03:00 [DBG] Requested claim types: updated_at name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale sub email email_verified
2020-07-30 15:32:40.305 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2020-07-30 15:32:40.306 +03:00 [DBG] End userinfo request
2020-07-30 15:32:40.318 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 15:32:40.320 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 15:32:40.323 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 15:32:40.324 +03:00 [DBG] Rendering check session result
2020-07-30 15:32:40.581 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:32:40.582 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:32:40.584 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:32:40.587 +03:00 [DBG] Start discovery request
2020-07-30 15:32:40.593 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:32:40.754 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-07-30 15:32:40.756 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-07-30 15:32:40.759 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-07-30 15:32:40.762 +03:00 [DBG] Start key discovery request
2020-07-30 15:32:52.030 +03:00 [INF] Removing 0 grants
2020-07-30 15:32:52.033 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:33:22.039 +03:00 [INF] Removing 0 grants
2020-07-30 15:33:22.041 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:33:52.058 +03:00 [INF] Removing 0 grants
2020-07-30 15:33:52.063 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:34:22.074 +03:00 [INF] Removing 0 grants
2020-07-30 15:34:22.076 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:34:52.090 +03:00 [INF] Removing 0 grants
2020-07-30 15:34:52.093 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:34:59.804 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 15:34:59.812 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 15:34:59.813 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 15:34:59.814 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:34:59.824 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:34:59.825 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:34:59.827 +03:00 [DBG] Start discovery request
2020-07-30 15:34:59.843 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:34:59.862 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-07-30 15:34:59.865 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-07-30 15:34:59.869 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-07-30 15:34:59.871 +03:00 [DBG] Processing signout request for 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 15:34:59.873 +03:00 [DBG] Start end session request validation
2020-07-30 15:34:59.877 +03:00 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:5006/index.html"},"$type":"EndSessionRequestValidationLog"}
2020-07-30 15:34:59.880 +03:00 [DBG] Success validating end session request from null
2020-07-30 15:34:59.927 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-30 15:34:59.930 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-30 15:34:59.932 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-30 15:34:59.933 +03:00 [INF] {"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1KGIIKHO1V:00000007","TimeStamp":"2020-07-30T12:34:59.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-30 15:34:59.945 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-30 15:34:59.965 +03:00 [DBG] spa found in database: true
2020-07-30 15:34:59.965 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:34:59.973 +03:00 [DBG] No client back-channel logout URLs
2020-07-30 15:35:22.103 +03:00 [INF] Removing 0 grants
2020-07-30 15:35:22.105 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:35:52.114 +03:00 [INF] Removing 0 grants
2020-07-30 15:35:52.117 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:35:52.145 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 15:35:52.150 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 15:35:52.150 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 15:35:52.151 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:35:52.153 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:35:52.154 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:35:52.154 +03:00 [DBG] Start discovery request
2020-07-30 15:35:52.164 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:35:52.177 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-07-30 15:35:52.178 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-07-30 15:35:52.179 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-07-30 15:35:52.183 +03:00 [DBG] Start authorize request
2020-07-30 15:35:52.184 +03:00 [DBG] No user present in authorize request
2020-07-30 15:35:52.184 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 15:35:52.202 +03:00 [DBG] spa found in database: true
2020-07-30 15:35:52.202 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:35:52.209 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 15:35:52.213 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:35:52.220 +03:00 [DBG] Found [] API resources in database
2020-07-30 15:35:52.223 +03:00 [DBG] Found [] scopes in database
2020-07-30 15:35:52.225 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 15:35:52.226 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5006/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html","http://localhost:5006/callback.html"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email","State":"44a8548a26e14c2c8404a14b43030fa9","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5006/callback.html","response_type":"code","scope":"openid profile email","state":"44a8548a26e14c2c8404a14b43030fa9","code_challenge":"AyQP9tcT2XTsfmqfFnCz1MdklKeYTvNNW0iKbqAh6Y4","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 15:35:52.232 +03:00 [INF] Showing login: User is not authenticated
2020-07-30 15:35:52.242 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 15:35:52.250 +03:00 [DBG] spa found in database: true
2020-07-30 15:35:52.250 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:35:52.255 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 15:35:52.257 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:35:52.258 +03:00 [DBG] Found [] API resources in database
2020-07-30 15:35:52.260 +03:00 [DBG] Found [] scopes in database
2020-07-30 15:35:52.263 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 15:35:52.273 +03:00 [DBG] spa found in database: true
2020-07-30 15:35:52.273 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:36:07.714 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 15:36:07.720 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 15:36:07.721 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 15:36:07.722 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:36:07.722 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:36:07.723 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:36:07.724 +03:00 [DBG] Start discovery request
2020-07-30 15:36:07.733 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:36:07.756 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-07-30 15:36:07.764 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-07-30 15:36:07.765 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-07-30 15:36:07.771 +03:00 [DBG] Start authorize request
2020-07-30 15:36:07.774 +03:00 [DBG] No user present in authorize request
2020-07-30 15:36:07.774 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 15:36:07.784 +03:00 [DBG] spa found in database: true
2020-07-30 15:36:07.784 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:36:07.787 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 15:36:07.790 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:36:07.791 +03:00 [DBG] Found [] API resources in database
2020-07-30 15:36:07.794 +03:00 [DBG] Found [] scopes in database
2020-07-30 15:36:07.795 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 15:36:07.797 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5006/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html","http://localhost:5006/callback.html"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email","State":"2aec0799778f4a228baddb9dca76762f","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5006/callback.html","response_type":"code","scope":"openid profile email","state":"2aec0799778f4a228baddb9dca76762f","code_challenge":"ou7_onTKCO3abiOaMax5nRawG4WIdLLEYG7W_57mw_Q","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 15:36:07.806 +03:00 [INF] Showing login: User is not authenticated
2020-07-30 15:36:07.810 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 15:36:07.820 +03:00 [DBG] spa found in database: true
2020-07-30 15:36:07.820 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:36:07.824 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 15:36:07.825 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:36:07.827 +03:00 [DBG] Found [] API resources in database
2020-07-30 15:36:07.829 +03:00 [DBG] Found [] scopes in database
2020-07-30 15:36:07.830 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 15:36:07.839 +03:00 [DBG] spa found in database: true
2020-07-30 15:36:07.839 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:36:22.118 +03:00 [INF] Removing 0 grants
2020-07-30 15:36:22.119 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:36:50.685 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:36:50.687 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:36:50.694 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:36:50.696 +03:00 [DBG] Start discovery request
2020-07-30 15:36:50.716 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:36:52.129 +03:00 [INF] Removing 0 grants
2020-07-30 15:36:52.131 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:37:22.146 +03:00 [INF] Removing 0 grants
2020-07-30 15:37:22.147 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:37:52.157 +03:00 [INF] Removing 0 grants
2020-07-30 15:37:52.162 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:37:58.640 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 15:37:58.659 +03:00 [DBG] spa found in database: true
2020-07-30 15:37:58.660 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:37:58.664 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 15:37:58.667 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:37:58.676 +03:00 [DBG] Found [] API resources in database
2020-07-30 15:37:58.679 +03:00 [DBG] Found [] scopes in database
2020-07-30 15:37:58.680 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 15:37:58.709 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":"spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:00000065","TimeStamp":"2020-07-30T12:37:58.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-30 15:37:58.717 +03:00 [DBG] Augmenting SignInContext
2020-07-30 15:37:58.717 +03:00 [DBG] Adding idp claim with value: local
2020-07-30 15:37:58.718 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-30 15:37:58.718 +03:00 [DBG] Adding auth_time claim with value: 1596112678
2020-07-30 15:37:58.719 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 15:37:58.728 +03:00 [DBG] spa found in database: true
2020-07-30 15:37:58.728 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:37:58.739 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-07-30 15:37:58.741 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-07-30 15:37:58.741 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-07-30 15:37:58.743 +03:00 [DBG] Start authorize callback request
2020-07-30 15:37:58.745 +03:00 [DBG] User in authorize request: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 15:37:58.746 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 15:37:58.753 +03:00 [DBG] spa found in database: true
2020-07-30 15:37:58.754 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:37:58.755 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 15:37:58.756 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:37:58.758 +03:00 [DBG] Found [] API resources in database
2020-07-30 15:37:58.762 +03:00 [DBG] Found [] scopes in database
2020-07-30 15:37:58.763 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 15:37:58.764 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5006/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html","http://localhost:5006/callback.html"],"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email","State":"2aec0799778f4a228baddb9dca76762f","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"13D05C36380D784A2EA481858B5966E2","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5006/callback.html","response_type":"code","scope":"openid profile email","state":"2aec0799778f4a228baddb9dca76762f","code_challenge":"ou7_onTKCO3abiOaMax5nRawG4WIdLLEYG7W_57mw_Q","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 15:37:58.774 +03:00 [DBG] Client is configured to not require consent, no consent is required
2020-07-30 15:37:58.774 +03:00 [DBG] Creating Authorization Code Flow response.
2020-07-30 15:37:58.777 +03:00 [DBG] RR4XrP92sQu4bm0/5i++uOxmQ9EZA+Bc3i5cj9qHty0= not found in database
2020-07-30 15:37:58.787 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5006/callback.html","Endpoint":"Authorize","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****0E53","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:00000067","TimeStamp":"2020-07-30T12:37:58.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 15:37:58.798 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ClientId":"spa","RedirectUri":"http://localhost:5006/callback.html","State":"2aec0799778f4a228baddb9dca76762f","Scope":"openid profile email","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-07-30 15:37:58.802 +03:00 [DBG] Augmenting SignInContext
2020-07-30 15:37:58.804 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 15:37:59.224 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 15:37:59.230 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 15:37:59.231 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 15:37:59.232 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:37:59.233 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:37:59.234 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:37:59.237 +03:00 [DBG] Start discovery request
2020-07-30 15:37:59.254 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:37:59.269 +03:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:5006
2020-07-30 15:37:59.272 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 15:37:59.276 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 15:37:59.281 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-07-30 15:37:59.282 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-07-30 15:37:59.283 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-07-30 15:37:59.284 +03:00 [DBG] Start token request.
2020-07-30 15:37:59.286 +03:00 [DBG] Start client validation
2020-07-30 15:37:59.287 +03:00 [DBG] Start parsing Basic Authentication secret
2020-07-30 15:37:59.290 +03:00 [DBG] Start parsing for secret in post body
2020-07-30 15:37:59.291 +03:00 [DBG] client id without secret found
2020-07-30 15:37:59.292 +03:00 [DBG] Parser found secret: PostBodySecretParser
2020-07-30 15:37:59.292 +03:00 [DBG] Secret id found: spa
2020-07-30 15:37:59.303 +03:00 [DBG] spa found in database: true
2020-07-30 15:37:59.304 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:37:59.305 +03:00 [DBG] Public Client - skipping secret validation success
2020-07-30 15:37:59.305 +03:00 [DBG] Client validation success
2020-07-30 15:37:59.306 +03:00 [INF] {"ClientId":"spa","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM1KGIIKHO1U:00000011","TimeStamp":"2020-07-30T12:37:59.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2020-07-30 15:37:59.312 +03:00 [DBG] Start token request validation
2020-07-30 15:37:59.312 +03:00 [DBG] Start validation of authorization code token request
2020-07-30 15:37:59.314 +03:00 [DBG] RR4XrP92sQu4bm0/5i++uOxmQ9EZA+Bc3i5cj9qHty0= found in database: true
2020-07-30 15:37:59.316 +03:00 [DBG] removing RR4XrP92sQu4bm0/5i++uOxmQ9EZA+Bc3i5cj9qHty0= persisted grant from database
2020-07-30 15:37:59.328 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2020-07-30 15:37:59.331 +03:00 [DBG] Validation of authorization code token request success
2020-07-30 15:37:59.331 +03:00 [INF] Token request validation success, {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"543B90B95E2BB51778D7A661EB0BFE22D4D71B4CD3E593AF4E29A158E5600E53","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"spa","code":"543B90B95E2BB51778D7A661EB0BFE22D4D71B4CD3E593AF4E29A158E5600E53","redirect_uri":"http://localhost:5006/callback.html","code_verifier":"7c57bba46eb647a3998d9e1df9be39385118d53559494918b32e15292f36988382811243cb4d4532a7e815139302101d","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2020-07-30 15:37:59.337 +03:00 [DBG] spa found in database: true
2020-07-30 15:37:59.338 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:37:59.339 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:37:59.340 +03:00 [DBG] Found [] API resources in database
2020-07-30 15:37:59.341 +03:00 [DBG] Found [] scopes in database
2020-07-30 15:37:59.342 +03:00 [DBG] Getting claims for access token for client: spa
2020-07-30 15:37:59.342 +03:00 [DBG] Getting claims for access token for subject: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 15:37:59.353 +03:00 [DBG] spa found in database: true
2020-07-30 15:37:59.353 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:37:59.354 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:37:59.355 +03:00 [DBG] Found [] API resources in database
2020-07-30 15:37:59.357 +03:00 [DBG] Found [] scopes in database
2020-07-30 15:37:59.357 +03:00 [DBG] Getting claims for identity token for subject: 65886359-073C-434B-AD2D-A3932222DABE and client: spa
2020-07-30 15:37:59.357 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-07-30 15:37:59.359 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":null,"Endpoint":"Token","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****u9iA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ettg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1U:00000011","TimeStamp":"2020-07-30T12:37:59.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 15:37:59.360 +03:00 [DBG] Token request success.
2020-07-30 15:37:59.368 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:5006
2020-07-30 15:37:59.369 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 15:37:59.370 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 15:37:59.370 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-07-30 15:37:59.370 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-07-30 15:37:59.371 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-07-30 15:37:59.371 +03:00 [DBG] Start userinfo request
2020-07-30 15:37:59.371 +03:00 [DBG] Bearer token found in header
2020-07-30 15:37:59.378 +03:00 [DBG] spa found in database: true
2020-07-30 15:37:59.378 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:37:59.383 +03:00 [DBG] spa found in database: true
2020-07-30 15:37:59.384 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:37:59.385 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 15:37:59.385 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"2FFAC37AF41AC384EBEE588E4262D28F","Claims":{"nbf":1596112679,"exp":1596116279,"iss":"https://localhost:5000","aud":"https://localhost:5000/resources","client_id":"spa","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596112678,"idp":"local","jti":"2FFAC37AF41AC384EBEE588E4262D28F","sid":"13D05C36380D784A2EA481858B5966E2","iat":1596112679,"scope":["openid","profile","email"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 15:37:59.388 +03:00 [DBG] Creating userinfo response
2020-07-30 15:37:59.389 +03:00 [DBG] Scopes in access token: openid profile email
2020-07-30 15:37:59.390 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:37:59.391 +03:00 [DBG] Requested claim types: updated_at name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale sub email email_verified
2020-07-30 15:37:59.393 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2020-07-30 15:37:59.393 +03:00 [DBG] End userinfo request
2020-07-30 15:37:59.405 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 15:37:59.405 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 15:37:59.405 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 15:37:59.405 +03:00 [DBG] Rendering check session result
2020-07-30 15:37:59.507 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 15:37:59.510 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 15:37:59.510 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 15:37:59.511 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:37:59.511 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:37:59.511 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:37:59.512 +03:00 [DBG] Start discovery request
2020-07-30 15:37:59.517 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:37:59.534 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 15:37:59.535 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 15:37:59.535 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 15:37:59.535 +03:00 [DBG] Rendering check session result
2020-07-30 15:38:22.178 +03:00 [INF] Removing 0 grants
2020-07-30 15:38:22.181 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:38:52.183 +03:00 [INF] Removing 0 grants
2020-07-30 15:38:52.185 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:39:22.199 +03:00 [INF] Removing 0 grants
2020-07-30 15:39:22.201 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:39:52.207 +03:00 [INF] Removing 0 grants
2020-07-30 15:39:52.209 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:40:22.225 +03:00 [INF] Removing 0 grants
2020-07-30 15:40:22.227 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:40:52.230 +03:00 [INF] Removing 0 grants
2020-07-30 15:40:52.231 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:41:22.238 +03:00 [INF] Removing 0 grants
2020-07-30 15:41:22.240 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:41:52.251 +03:00 [INF] Removing 0 grants
2020-07-30 15:41:52.253 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:41:58.572 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 15:41:58.577 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 15:41:58.577 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 15:41:58.578 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:41:58.578 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:41:58.579 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:41:58.580 +03:00 [DBG] Start discovery request
2020-07-30 15:41:58.592 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:41:58.615 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 15:41:58.616 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 15:41:58.617 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 15:41:58.617 +03:00 [DBG] Rendering check session result
2020-07-30 15:42:05.033 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-07-30 15:42:05.034 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-07-30 15:42:05.034 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-07-30 15:42:05.035 +03:00 [DBG] Processing signout request for 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 15:42:05.035 +03:00 [DBG] Start end session request validation
2020-07-30 15:42:05.038 +03:00 [DBG] Start identity token validation
2020-07-30 15:42:05.064 +03:00 [DBG] spa found in database: true
2020-07-30 15:42:05.064 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:42:05.066 +03:00 [DBG] Client found: spa / Example Client Application Single Page Javascript App
2020-07-30 15:42:05.067 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 15:42:05.067 +03:00 [DBG] Token validation success
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1596112360,"exp":1596112660,"iss":"https://localhost:5000","aud":"spa","iat":1596112360,"at_hash":"p6BEnvXQQ-G4kpqgZ9_sQQ","s_hash":"OHehjSWd-F45PbnJawWyXw","sid":"53C4CFF24925899A5C0F1DECD7D5CB69","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596111187,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 15:42:05.073 +03:00 [WRN] Invalid PostLogoutRedirectUri: http://localhost:5005/loggedOut.html
2020-07-30 15:42:05.073 +03:00 [INF] End session request validation success
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","PostLogOutUri":null,"State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:5005/loggedOut.html","state":"569acec1dee84c00b394f87d3e009196"},"$type":"EndSessionRequestValidationLog"}
2020-07-30 15:42:05.075 +03:00 [DBG] Success validating end session request from spa
2020-07-30 15:42:05.083 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-30 15:42:05.083 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-30 15:42:05.083 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-30 15:42:05.084 +03:00 [INF] {"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1KGIIKHO1V:00000071","TimeStamp":"2020-07-30T12:42:05.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-30 15:42:05.088 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-30 15:42:05.095 +03:00 [DBG] spa found in database: true
2020-07-30 15:42:05.096 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:42:05.096 +03:00 [DBG] No client back-channel logout URLs
2020-07-30 15:42:14.096 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 15:42:14.102 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 15:42:14.102 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 15:42:14.103 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:42:14.104 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:42:14.104 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:42:14.105 +03:00 [DBG] Start discovery request
2020-07-30 15:42:14.115 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:42:14.133 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-07-30 15:42:14.135 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-07-30 15:42:14.136 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-07-30 15:42:14.136 +03:00 [DBG] Start authorize request
2020-07-30 15:42:14.137 +03:00 [DBG] No user present in authorize request
2020-07-30 15:42:14.137 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 15:42:14.159 +03:00 [DBG] spa found in database: true
2020-07-30 15:42:14.159 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:42:14.160 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 15:42:14.164 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:42:14.173 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 15:42:14.176 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 15:42:14.176 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 15:42:14.177 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 15:42:14.177 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html","http://localhost:5006/callback.html"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read api.write","State":"1b103163ab55404ca04db3f0f8da9f21","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":"popup","PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5005/callback.html","response_type":"code","scope":"openid profile email api.read api.write","state":"1b103163ab55404ca04db3f0f8da9f21","code_challenge":"L-q3E3-M1lCxjpYpBgqJiV0wzsaaM22dDrGiFLV-nHk","code_challenge_method":"S256","display":"popup"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 15:42:14.181 +03:00 [INF] Showing login: User is not authenticated
2020-07-30 15:42:14.186 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 15:42:14.195 +03:00 [DBG] spa found in database: true
2020-07-30 15:42:14.196 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:42:14.196 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 15:42:14.197 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:42:14.199 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 15:42:14.201 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 15:42:14.202 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 15:42:14.202 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 15:42:14.207 +03:00 [DBG] spa found in database: true
2020-07-30 15:42:14.208 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:42:22.254 +03:00 [INF] Removing 0 grants
2020-07-30 15:42:22.256 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:42:36.064 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 15:42:36.073 +03:00 [DBG] spa found in database: true
2020-07-30 15:42:36.073 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:42:36.073 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 15:42:36.075 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:42:36.076 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 15:42:36.077 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 15:42:36.077 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 15:42:36.077 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 15:42:36.086 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":"spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:00000083","TimeStamp":"2020-07-30T12:42:36.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-30 15:42:36.087 +03:00 [DBG] Augmenting SignInContext
2020-07-30 15:42:36.088 +03:00 [DBG] Adding idp claim with value: local
2020-07-30 15:42:36.088 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-30 15:42:36.088 +03:00 [DBG] Adding auth_time claim with value: 1596112956
2020-07-30 15:42:36.089 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 15:42:36.097 +03:00 [DBG] spa found in database: true
2020-07-30 15:42:36.097 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:42:36.102 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-07-30 15:42:36.102 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-07-30 15:42:36.103 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-07-30 15:42:36.103 +03:00 [DBG] Start authorize callback request
2020-07-30 15:42:36.103 +03:00 [DBG] User in authorize request: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 15:42:36.103 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 15:42:36.110 +03:00 [DBG] spa found in database: true
2020-07-30 15:42:36.110 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:42:36.110 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 15:42:36.111 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:42:36.113 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 15:42:36.114 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 15:42:36.114 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 15:42:36.114 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 15:42:36.114 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html","http://localhost:5006/callback.html"],"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read api.write","State":"1b103163ab55404ca04db3f0f8da9f21","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":"popup","PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"2107A06519EAE3E2060BDD9F5C200F9F","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5005/callback.html","response_type":"code","scope":"openid profile email api.read api.write","state":"1b103163ab55404ca04db3f0f8da9f21","code_challenge":"L-q3E3-M1lCxjpYpBgqJiV0wzsaaM22dDrGiFLV-nHk","code_challenge_method":"S256","display":"popup"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 15:42:36.120 +03:00 [DBG] Client is configured to not require consent, no consent is required
2020-07-30 15:42:36.121 +03:00 [DBG] Creating Authorization Code Flow response.
2020-07-30 15:42:36.123 +03:00 [DBG] zF4LoNztr4yaRq4FTbKv5R5BN3BjRceJ7vg7MdYH/Ms= not found in database
2020-07-30 15:42:36.126 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","Endpoint":"Authorize","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read api.write","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****58D1","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:00000085","TimeStamp":"2020-07-30T12:42:36.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 15:42:36.129 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ClientId":"spa","RedirectUri":"http://localhost:5005/callback.html","State":"1b103163ab55404ca04db3f0f8da9f21","Scope":"openid profile email api.read api.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-07-30 15:42:36.131 +03:00 [DBG] Augmenting SignInContext
2020-07-30 15:42:36.131 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 15:42:36.193 +03:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:5005
2020-07-30 15:42:36.195 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 15:42:36.195 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 15:42:36.195 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-07-30 15:42:36.204 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-07-30 15:42:36.205 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-07-30 15:42:36.205 +03:00 [DBG] Start token request.
2020-07-30 15:42:36.206 +03:00 [DBG] Start client validation
2020-07-30 15:42:36.206 +03:00 [DBG] Start parsing Basic Authentication secret
2020-07-30 15:42:36.206 +03:00 [DBG] Start parsing for secret in post body
2020-07-30 15:42:36.207 +03:00 [DBG] client id without secret found
2020-07-30 15:42:36.207 +03:00 [DBG] Parser found secret: PostBodySecretParser
2020-07-30 15:42:36.208 +03:00 [DBG] Secret id found: spa
2020-07-30 15:42:36.216 +03:00 [DBG] spa found in database: true
2020-07-30 15:42:36.216 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:42:36.216 +03:00 [DBG] Public Client - skipping secret validation success
2020-07-30 15:42:36.216 +03:00 [DBG] Client validation success
2020-07-30 15:42:36.216 +03:00 [INF] {"ClientId":"spa","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM1KGIIKHO1U:0000001D","TimeStamp":"2020-07-30T12:42:36.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2020-07-30 15:42:36.217 +03:00 [DBG] Start token request validation
2020-07-30 15:42:36.217 +03:00 [DBG] Start validation of authorization code token request
2020-07-30 15:42:36.219 +03:00 [DBG] zF4LoNztr4yaRq4FTbKv5R5BN3BjRceJ7vg7MdYH/Ms= found in database: true
2020-07-30 15:42:36.220 +03:00 [DBG] removing zF4LoNztr4yaRq4FTbKv5R5BN3BjRceJ7vg7MdYH/Ms= persisted grant from database
2020-07-30 15:42:36.222 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2020-07-30 15:42:36.225 +03:00 [DBG] Validation of authorization code token request success
2020-07-30 15:42:36.228 +03:00 [INF] Token request validation success, {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"D9EAEB0D90CB30FF8C1E4556F6693C047E41ED39E421FAD253B956B0190558D1","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"spa","code":"D9EAEB0D90CB30FF8C1E4556F6693C047E41ED39E421FAD253B956B0190558D1","redirect_uri":"http://localhost:5005/callback.html","code_verifier":"0b35486b10f441619122d2f9c3c49ff86f7ac8e813c843f2a8099eb166e06d46c6267f70a14f493fa782d5482444a548","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2020-07-30 15:42:36.237 +03:00 [DBG] spa found in database: true
2020-07-30 15:42:36.240 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:42:36.243 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:42:36.245 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 15:42:36.246 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 15:42:36.247 +03:00 [DBG] Getting claims for access token for client: spa
2020-07-30 15:42:36.247 +03:00 [DBG] Getting claims for access token for subject: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 15:42:36.262 +03:00 [DBG] spa found in database: true
2020-07-30 15:42:36.262 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:42:36.264 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:42:36.265 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 15:42:36.266 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 15:42:36.267 +03:00 [DBG] Getting claims for identity token for subject: 65886359-073C-434B-AD2D-A3932222DABE and client: spa
2020-07-30 15:42:36.267 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-07-30 15:42:36.268 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":null,"Endpoint":"Token","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read api.write","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****WZqg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****bopw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1U:0000001D","TimeStamp":"2020-07-30T12:42:36.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 15:42:36.270 +03:00 [DBG] Token request success.
2020-07-30 15:42:36.283 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:5005
2020-07-30 15:42:36.285 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 15:42:36.285 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 15:42:36.286 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-07-30 15:42:36.288 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-07-30 15:42:36.289 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-07-30 15:42:36.289 +03:00 [DBG] Start userinfo request
2020-07-30 15:42:36.289 +03:00 [DBG] Bearer token found in header
2020-07-30 15:42:36.297 +03:00 [DBG] spa found in database: true
2020-07-30 15:42:36.298 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:42:36.303 +03:00 [DBG] spa found in database: true
2020-07-30 15:42:36.303 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:42:36.306 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 15:42:36.310 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"CE399F131E1C917F628213F27778835F","Claims":{"nbf":1596112956,"exp":1596116556,"iss":"https://localhost:5000","aud":["api","https://localhost:5000/resources"],"client_id":"spa","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596112956,"idp":"local","role":"student","jti":"CE399F131E1C917F628213F27778835F","sid":"2107A06519EAE3E2060BDD9F5C200F9F","iat":1596112956,"scope":["openid","profile","email","api.read","api.write"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 15:42:36.312 +03:00 [DBG] Creating userinfo response
2020-07-30 15:42:36.312 +03:00 [DBG] Scopes in access token: openid profile email api.read api.write
2020-07-30 15:42:36.313 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:42:36.314 +03:00 [DBG] Requested claim types: updated_at name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale sub email email_verified
2020-07-30 15:42:36.316 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2020-07-30 15:42:36.316 +03:00 [DBG] End userinfo request
2020-07-30 15:42:36.332 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 15:42:36.333 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 15:42:36.333 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 15:42:36.334 +03:00 [DBG] Rendering check session result
2020-07-30 15:42:52.269 +03:00 [INF] Removing 0 grants
2020-07-30 15:42:52.271 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:43:05.656 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 15:43:05.664 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 15:43:05.665 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 15:43:05.665 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:43:05.665 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:43:05.666 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:43:05.666 +03:00 [DBG] Start discovery request
2020-07-30 15:43:05.673 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:43:05.695 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 15:43:05.696 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 15:43:05.696 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 15:43:05.696 +03:00 [DBG] Rendering check session result
2020-07-30 15:43:15.317 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-07-30 15:43:15.324 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-07-30 15:43:15.325 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-07-30 15:43:15.325 +03:00 [DBG] Processing signout request for 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 15:43:15.325 +03:00 [DBG] Start end session request validation
2020-07-30 15:43:15.326 +03:00 [DBG] Start identity token validation
2020-07-30 15:43:15.357 +03:00 [DBG] spa found in database: true
2020-07-30 15:43:15.357 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:43:15.358 +03:00 [DBG] Client found: spa / Example Client Application Single Page Javascript App
2020-07-30 15:43:15.359 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 15:43:15.359 +03:00 [DBG] Token validation success
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1596112956,"exp":1596113256,"iss":"https://localhost:5000","aud":"spa","iat":1596112956,"at_hash":"M1XxdMt9LnXwvrnc65jbxA","s_hash":"BmR01h8i7YV9Hgm7djFePg","sid":"2107A06519EAE3E2060BDD9F5C200F9F","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596112956,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 15:43:15.361 +03:00 [WRN] Invalid PostLogoutRedirectUri: http://localhost:5005/loggedOut.html
2020-07-30 15:43:15.361 +03:00 [INF] End session request validation success
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","PostLogOutUri":null,"State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:5005/loggedOut.html","state":"7312121000a3418ba2c9a34ae47ce681"},"$type":"EndSessionRequestValidationLog"}
2020-07-30 15:43:15.362 +03:00 [DBG] Success validating end session request from spa
2020-07-30 15:43:15.366 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-30 15:43:15.372 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-30 15:43:15.373 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-30 15:43:15.373 +03:00 [INF] {"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1KGIIKHO1V:0000008D","TimeStamp":"2020-07-30T12:43:15.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-30 15:43:15.375 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-30 15:43:15.382 +03:00 [DBG] spa found in database: true
2020-07-30 15:43:15.382 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:43:15.383 +03:00 [DBG] No client back-channel logout URLs
2020-07-30 15:43:22.294 +03:00 [INF] Removing 0 grants
2020-07-30 15:43:22.296 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:43:35.490 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:00000097","TimeStamp":"2020-07-30T12:43:35.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-30 15:43:35.493 +03:00 [DBG] Augmenting SignInContext
2020-07-30 15:43:35.493 +03:00 [DBG] Adding idp claim with value: local
2020-07-30 15:43:35.494 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-30 15:43:35.494 +03:00 [DBG] Adding auth_time claim with value: 1596113015
2020-07-30 15:43:35.494 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 15:43:45.911 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 15:43:45.915 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 15:43:45.915 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 15:43:45.916 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:43:45.917 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:43:45.917 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:43:45.918 +03:00 [DBG] Start discovery request
2020-07-30 15:43:45.935 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:43:45.952 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-07-30 15:43:45.952 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-07-30 15:43:45.952 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-07-30 15:43:45.953 +03:00 [DBG] Start authorize request
2020-07-30 15:43:45.953 +03:00 [DBG] User in authorize request: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 15:43:45.953 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 15:43:45.963 +03:00 [DBG] spa found in database: true
2020-07-30 15:43:45.963 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:43:45.964 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 15:43:45.967 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:43:45.974 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 15:43:45.976 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 15:43:45.978 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 15:43:45.978 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 15:43:45.979 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html","http://localhost:5006/callback.html"],"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read api.write","State":"3c3350f13c4f4ffeb081d10337fac5ea","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":"popup","PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"1ED66A8847EFBC9682A72BFC22B14EA8","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5005/callback.html","response_type":"code","scope":"openid profile email api.read api.write","state":"3c3350f13c4f4ffeb081d10337fac5ea","code_challenge":"hEEzrj2OG4jQi1WWUfIALWjOmBjZK-2rDN2Ro4rRu2E","code_challenge_method":"S256","display":"popup"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 15:43:45.982 +03:00 [DBG] Client is configured to not require consent, no consent is required
2020-07-30 15:43:45.982 +03:00 [DBG] Creating Authorization Code Flow response.
2020-07-30 15:43:45.985 +03:00 [DBG] MDzh5ktOaaVvIjjS1QSCaxxhinyZA/MdnDNo4FzkZyM= not found in database
2020-07-30 15:43:45.990 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","Endpoint":"Authorize","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read api.write","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****F977","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:0000009F","TimeStamp":"2020-07-30T12:43:45.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 15:43:45.992 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ClientId":"spa","RedirectUri":"http://localhost:5005/callback.html","State":"3c3350f13c4f4ffeb081d10337fac5ea","Scope":"openid profile email api.read api.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-07-30 15:43:45.993 +03:00 [DBG] Augmenting SignInContext
2020-07-30 15:43:45.993 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 15:43:46.072 +03:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:5005
2020-07-30 15:43:46.075 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 15:43:46.076 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 15:43:46.076 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-07-30 15:43:46.076 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-07-30 15:43:46.077 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-07-30 15:43:46.077 +03:00 [DBG] Start token request.
2020-07-30 15:43:46.077 +03:00 [DBG] Start client validation
2020-07-30 15:43:46.077 +03:00 [DBG] Start parsing Basic Authentication secret
2020-07-30 15:43:46.077 +03:00 [DBG] Start parsing for secret in post body
2020-07-30 15:43:46.078 +03:00 [DBG] client id without secret found
2020-07-30 15:43:46.078 +03:00 [DBG] Parser found secret: PostBodySecretParser
2020-07-30 15:43:46.078 +03:00 [DBG] Secret id found: spa
2020-07-30 15:43:46.089 +03:00 [DBG] spa found in database: true
2020-07-30 15:43:46.090 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:43:46.091 +03:00 [DBG] Public Client - skipping secret validation success
2020-07-30 15:43:46.091 +03:00 [DBG] Client validation success
2020-07-30 15:43:46.091 +03:00 [INF] {"ClientId":"spa","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM1KGIIKHO1U:00000027","TimeStamp":"2020-07-30T12:43:46.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2020-07-30 15:43:46.092 +03:00 [DBG] Start token request validation
2020-07-30 15:43:46.093 +03:00 [DBG] Start validation of authorization code token request
2020-07-30 15:43:46.094 +03:00 [DBG] MDzh5ktOaaVvIjjS1QSCaxxhinyZA/MdnDNo4FzkZyM= found in database: true
2020-07-30 15:43:46.096 +03:00 [DBG] removing MDzh5ktOaaVvIjjS1QSCaxxhinyZA/MdnDNo4FzkZyM= persisted grant from database
2020-07-30 15:43:46.100 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2020-07-30 15:43:46.118 +03:00 [DBG] Validation of authorization code token request success
2020-07-30 15:43:46.119 +03:00 [INF] Token request validation success, {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"19BE3C9BD5E445291EC28655ADE24DE6384D65CD1AB778326110A4A91E7FF977","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"spa","code":"19BE3C9BD5E445291EC28655ADE24DE6384D65CD1AB778326110A4A91E7FF977","redirect_uri":"http://localhost:5005/callback.html","code_verifier":"e0e8f10f4ef64018ba18a2dfdb303a5ff063b4df75ae4f4882530d002121f6026b786693d4b44ffa961fec84f5e20da7","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2020-07-30 15:43:46.131 +03:00 [DBG] spa found in database: true
2020-07-30 15:43:46.131 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:43:46.133 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:43:46.134 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 15:43:46.135 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 15:43:46.135 +03:00 [DBG] Getting claims for access token for client: spa
2020-07-30 15:43:46.135 +03:00 [DBG] Getting claims for access token for subject: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 15:43:46.148 +03:00 [DBG] spa found in database: true
2020-07-30 15:43:46.148 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:43:46.149 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:43:46.151 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 15:43:46.152 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 15:43:46.152 +03:00 [DBG] Getting claims for identity token for subject: 65886359-073C-434B-AD2D-A3932222DABE and client: spa
2020-07-30 15:43:46.154 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-07-30 15:43:46.155 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":null,"Endpoint":"Token","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read api.write","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****IxsA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****uslw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1U:00000027","TimeStamp":"2020-07-30T12:43:46.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 15:43:46.157 +03:00 [DBG] Token request success.
2020-07-30 15:43:46.164 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:5005
2020-07-30 15:43:46.165 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 15:43:46.165 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 15:43:46.166 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-07-30 15:43:46.166 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-07-30 15:43:46.166 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-07-30 15:43:46.167 +03:00 [DBG] Start userinfo request
2020-07-30 15:43:46.167 +03:00 [DBG] Bearer token found in header
2020-07-30 15:43:46.175 +03:00 [DBG] spa found in database: true
2020-07-30 15:43:46.176 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:43:46.182 +03:00 [DBG] spa found in database: true
2020-07-30 15:43:46.182 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 15:43:46.183 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 15:43:46.184 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"6202DB80F83846FDA37401710A517B12","Claims":{"nbf":1596113026,"exp":1596116626,"iss":"https://localhost:5000","aud":["api","https://localhost:5000/resources"],"client_id":"spa","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596113015,"idp":"local","role":"student","jti":"6202DB80F83846FDA37401710A517B12","sid":"1ED66A8847EFBC9682A72BFC22B14EA8","iat":1596113026,"scope":["openid","profile","email","api.read","api.write"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 15:43:46.187 +03:00 [DBG] Creating userinfo response
2020-07-30 15:43:46.187 +03:00 [DBG] Scopes in access token: openid profile email api.read api.write
2020-07-30 15:43:46.189 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 15:43:46.189 +03:00 [DBG] Requested claim types: updated_at name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale sub email email_verified
2020-07-30 15:43:46.192 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2020-07-30 15:43:46.192 +03:00 [DBG] End userinfo request
2020-07-30 15:43:46.205 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 15:43:46.207 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 15:43:46.207 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 15:43:46.208 +03:00 [DBG] Rendering check session result
2020-07-30 15:43:52.305 +03:00 [INF] Removing 0 grants
2020-07-30 15:43:52.307 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:44:22.341 +03:00 [INF] Removing 0 grants
2020-07-30 15:44:22.347 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:44:24.077 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 15:44:24.082 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 15:44:24.082 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 15:44:24.083 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:44:24.084 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:44:24.084 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:44:24.086 +03:00 [DBG] Start discovery request
2020-07-30 15:44:24.105 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:44:40.624 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 15:44:40.625 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 15:44:40.626 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 15:44:40.626 +03:00 [DBG] Rendering check session result
2020-07-30 15:44:52.348 +03:00 [INF] Removing 0 grants
2020-07-30 15:44:52.350 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:45:22.641 +03:00 [INF] Removing 0 grants
2020-07-30 15:45:22.656 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:45:24.913 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 15:45:25.167 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 15:45:25.169 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 15:45:25.170 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:45:25.171 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:45:25.172 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:45:25.173 +03:00 [DBG] Start discovery request
2020-07-30 15:45:25.341 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:45:36.428 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 15:45:36.429 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 15:45:36.429 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 15:45:36.430 +03:00 [DBG] Rendering check session result
2020-07-30 15:45:52.679 +03:00 [INF] Removing 0 grants
2020-07-30 15:45:52.680 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:46:22.691 +03:00 [INF] Removing 0 grants
2020-07-30 15:46:22.692 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:46:52.706 +03:00 [INF] Removing 0 grants
2020-07-30 15:46:52.708 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:46:54.959 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 15:46:54.966 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 15:46:54.966 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 15:46:54.967 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:46:54.967 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:46:54.968 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:46:54.968 +03:00 [DBG] Start discovery request
2020-07-30 15:46:54.982 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:46:54.991 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 15:46:54.991 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 15:46:54.991 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 15:46:54.993 +03:00 [DBG] Rendering check session result
2020-07-30 15:47:22.713 +03:00 [INF] Removing 0 grants
2020-07-30 15:47:22.717 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:47:46.115 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 15:47:46.133 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 15:47:46.133 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 15:47:46.133 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:47:46.133 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:47:46.134 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:47:46.134 +03:00 [DBG] Start discovery request
2020-07-30 15:47:46.148 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:47:46.160 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 15:47:46.160 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 15:47:46.160 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 15:47:46.161 +03:00 [DBG] Rendering check session result
2020-07-30 15:47:46.507 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 15:47:46.510 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 15:47:46.510 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 15:47:46.510 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:47:46.510 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:47:46.511 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:47:46.511 +03:00 [DBG] Start discovery request
2020-07-30 15:47:46.513 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:47:46.526 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 15:47:46.527 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 15:47:46.527 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 15:47:46.528 +03:00 [DBG] Rendering check session result
2020-07-30 15:47:52.740 +03:00 [INF] Removing 0 grants
2020-07-30 15:47:52.742 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:48:22.752 +03:00 [INF] Removing 0 grants
2020-07-30 15:48:22.753 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:48:24.281 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 15:48:24.286 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 15:48:24.287 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 15:48:24.287 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:48:24.288 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:48:24.288 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:48:24.288 +03:00 [DBG] Start discovery request
2020-07-30 15:48:24.293 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:48:24.310 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 15:48:24.310 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 15:48:24.310 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 15:48:24.310 +03:00 [DBG] Rendering check session result
2020-07-30 15:48:38.534 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:48:38.534 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:48:38.535 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:48:38.536 +03:00 [DBG] Start discovery request
2020-07-30 15:48:38.540 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:48:38.689 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-07-30 15:48:38.690 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-07-30 15:48:38.690 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-07-30 15:48:38.691 +03:00 [DBG] Start key discovery request
2020-07-30 15:48:52.762 +03:00 [INF] Removing 0 grants
2020-07-30 15:48:52.764 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:49:22.769 +03:00 [INF] Removing 0 grants
2020-07-30 15:49:22.773 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:49:28.931 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 15:49:28.936 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 15:49:28.936 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 15:49:28.937 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:49:28.937 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:49:28.937 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:49:28.938 +03:00 [DBG] Start discovery request
2020-07-30 15:49:28.948 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:49:32.798 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 15:49:32.800 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 15:49:32.801 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 15:49:32.801 +03:00 [DBG] Rendering check session result
2020-07-30 15:49:33.087 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:49:33.087 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:49:33.088 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:49:33.089 +03:00 [DBG] Start discovery request
2020-07-30 15:49:33.092 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:49:33.237 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-07-30 15:49:33.239 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-07-30 15:49:33.239 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-07-30 15:49:33.240 +03:00 [DBG] Start key discovery request
2020-07-30 15:49:47.834 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 15:49:48.070 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 15:49:48.071 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 15:49:48.072 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:49:48.072 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:49:48.072 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:49:48.072 +03:00 [DBG] Start discovery request
2020-07-30 15:49:48.235 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:49:48.248 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 15:49:48.249 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 15:49:48.249 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 15:49:48.249 +03:00 [DBG] Rendering check session result
2020-07-30 15:49:52.793 +03:00 [INF] Removing 0 grants
2020-07-30 15:49:52.795 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:50:22.802 +03:00 [INF] Removing 0 grants
2020-07-30 15:50:22.803 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:50:53.085 +03:00 [INF] Removing 0 grants
2020-07-30 15:50:53.098 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:51:16.596 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 15:51:16.612 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 15:51:16.612 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 15:51:16.613 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:51:16.613 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:51:16.614 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:51:16.614 +03:00 [DBG] Start discovery request
2020-07-30 15:51:16.627 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:51:18.840 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 15:51:18.842 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 15:51:18.842 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 15:51:18.843 +03:00 [DBG] Rendering check session result
2020-07-30 15:51:23.115 +03:00 [INF] Removing 0 grants
2020-07-30 15:51:23.118 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:51:53.131 +03:00 [INF] Removing 0 grants
2020-07-30 15:51:53.133 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:52:23.148 +03:00 [INF] Removing 0 grants
2020-07-30 15:52:23.150 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:52:53.155 +03:00 [INF] Removing 0 grants
2020-07-30 15:52:53.156 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:53:23.182 +03:00 [INF] Removing 0 grants
2020-07-30 15:53:23.190 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:53:53.194 +03:00 [INF] Removing 0 grants
2020-07-30 15:53:53.198 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:54:23.210 +03:00 [INF] Removing 0 grants
2020-07-30 15:54:23.212 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:54:53.222 +03:00 [INF] Removing 0 grants
2020-07-30 15:54:53.223 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:55:23.230 +03:00 [INF] Removing 0 grants
2020-07-30 15:55:23.232 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:55:53.238 +03:00 [INF] Removing 0 grants
2020-07-30 15:55:53.239 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:56:23.510 +03:00 [INF] Removing 0 grants
2020-07-30 15:56:23.523 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:56:30.639 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 15:56:30.647 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 15:56:30.647 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 15:56:30.648 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 15:56:30.648 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 15:56:30.650 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 15:56:30.651 +03:00 [DBG] Start discovery request
2020-07-30 15:56:30.666 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 15:56:34.237 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 15:56:34.238 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 15:56:34.238 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 15:56:34.239 +03:00 [DBG] Rendering check session result
2020-07-30 15:56:53.539 +03:00 [INF] Removing 0 grants
2020-07-30 15:56:53.541 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:57:23.549 +03:00 [INF] Removing 0 grants
2020-07-30 15:57:23.551 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:57:53.576 +03:00 [INF] Removing 0 grants
2020-07-30 15:57:53.583 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:58:23.589 +03:00 [INF] Removing 0 grants
2020-07-30 15:58:23.590 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:58:53.611 +03:00 [INF] Removing 0 grants
2020-07-30 15:58:53.614 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:59:23.625 +03:00 [INF] Removing 0 grants
2020-07-30 15:59:23.626 +03:00 [INF] Removing 0 device flow codes
2020-07-30 15:59:53.636 +03:00 [INF] Removing 0 grants
2020-07-30 15:59:53.638 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:00:00.760 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://jwt.io
2020-07-30 16:00:00.771 +03:00 [DBG] Origin https://jwt.io is allowed: false
2020-07-30 16:00:00.771 +03:00 [WRN] CorsPolicyService did not allow origin: https://jwt.io
2020-07-30 16:00:00.772 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:00:00.772 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:00:00.772 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:00:00.773 +03:00 [DBG] Start discovery request
2020-07-30 16:00:00.786 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:00:00.810 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: https://jwt.io
2020-07-30 16:00:00.812 +03:00 [DBG] Origin https://jwt.io is allowed: false
2020-07-30 16:00:00.813 +03:00 [WRN] CorsPolicyService did not allow origin: https://jwt.io
2020-07-30 16:00:00.813 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2020-07-30 16:00:00.813 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2020-07-30 16:00:00.813 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2020-07-30 16:00:00.814 +03:00 [DBG] Start key discovery request
2020-07-30 16:00:23.653 +03:00 [INF] Removing 0 grants
2020-07-30 16:00:23.654 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:00:53.669 +03:00 [INF] Removing 0 grants
2020-07-30 16:00:53.671 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:01:23.674 +03:00 [INF] Removing 0 grants
2020-07-30 16:01:23.675 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:01:53.713 +03:00 [INF] Removing 0 grants
2020-07-30 16:01:53.721 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:02:23.727 +03:00 [INF] Removing 0 grants
2020-07-30 16:02:23.728 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:02:53.994 +03:00 [INF] Removing 0 grants
2020-07-30 16:02:54.006 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:03:11.241 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-07-30 16:03:11.242 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-07-30 16:03:11.242 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-07-30 16:03:11.243 +03:00 [DBG] Processing signout request for 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 16:03:11.243 +03:00 [DBG] Start end session request validation
2020-07-30 16:03:11.243 +03:00 [DBG] Start identity token validation
2020-07-30 16:03:11.270 +03:00 [DBG] spa found in database: true
2020-07-30 16:03:11.271 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:03:11.271 +03:00 [DBG] Client found: spa / Example Client Application Single Page Javascript App
2020-07-30 16:03:11.272 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 16:03:11.273 +03:00 [DBG] Token validation success
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1596112679,"exp":1596112979,"iss":"https://localhost:5000","aud":"spa","iat":1596112679,"at_hash":"9l0AwTZl06hTzbWRaPZKYw","s_hash":"qhccTz32MDf3tXWDOJ7vwQ","sid":"13D05C36380D784A2EA481858B5966E2","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596112678,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 16:03:11.274 +03:00 [INF] End session request validation success
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","PostLogOutUri":"http://localhost:5006/index.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:5006/index.html"},"$type":"EndSessionRequestValidationLog"}
2020-07-30 16:03:11.275 +03:00 [DBG] Success validating end session request from spa
2020-07-30 16:03:11.280 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-30 16:03:11.282 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-30 16:03:11.283 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-30 16:03:11.283 +03:00 [INF] {"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1KGIIKHO1V:000000B9","TimeStamp":"2020-07-30T13:03:11.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-30 16:03:11.286 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-30 16:03:11.292 +03:00 [DBG] spa found in database: true
2020-07-30 16:03:11.293 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:03:11.293 +03:00 [DBG] No client back-channel logout URLs
2020-07-30 16:03:12.951 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:03:12.953 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:03:12.953 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:03:12.954 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:03:12.954 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:03:12.954 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:03:12.954 +03:00 [DBG] Start discovery request
2020-07-30 16:03:12.973 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:03:12.986 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-07-30 16:03:12.987 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-07-30 16:03:12.987 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-07-30 16:03:12.987 +03:00 [DBG] Start authorize request
2020-07-30 16:03:12.988 +03:00 [DBG] No user present in authorize request
2020-07-30 16:03:12.988 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 16:03:12.997 +03:00 [DBG] spa found in database: true
2020-07-30 16:03:12.997 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:03:12.997 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 16:03:13.000 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:03:13.007 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 16:03:13.010 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 16:03:13.010 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 16:03:13.011 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5006/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html","http://localhost:5006/callback.html"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read","State":"3b889ee0057e4a02898df12340ffb275","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5006/callback.html","response_type":"code","scope":"openid profile email api.read","state":"3b889ee0057e4a02898df12340ffb275","code_challenge":"vQRvhyB42cFjwgRi1xeeU69NGJ0MKMaYMXqa5dAP_HA","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 16:03:13.014 +03:00 [INF] Showing login: User is not authenticated
2020-07-30 16:03:13.020 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 16:03:13.027 +03:00 [DBG] spa found in database: true
2020-07-30 16:03:13.027 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:03:13.028 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 16:03:13.029 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:03:13.030 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 16:03:13.031 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 16:03:13.031 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 16:03:13.037 +03:00 [DBG] spa found in database: true
2020-07-30 16:03:13.037 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:03:24.020 +03:00 [INF] Removing 0 grants
2020-07-30 16:03:24.022 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:03:47.007 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 16:03:47.015 +03:00 [DBG] spa found in database: true
2020-07-30 16:03:47.016 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:03:47.016 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 16:03:47.018 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:03:47.019 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 16:03:47.021 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 16:03:47.021 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 16:03:47.029 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":"spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:000000CF","TimeStamp":"2020-07-30T13:03:47.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-30 16:03:47.031 +03:00 [DBG] Augmenting SignInContext
2020-07-30 16:03:47.031 +03:00 [DBG] Adding idp claim with value: local
2020-07-30 16:03:47.031 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-30 16:03:47.031 +03:00 [DBG] Adding auth_time claim with value: 1596114227
2020-07-30 16:03:47.032 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 16:03:47.042 +03:00 [DBG] spa found in database: true
2020-07-30 16:03:47.042 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:03:47.048 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-07-30 16:03:47.053 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-07-30 16:03:47.053 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-07-30 16:03:47.053 +03:00 [DBG] Start authorize callback request
2020-07-30 16:03:47.054 +03:00 [DBG] User in authorize request: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 16:03:47.054 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 16:03:47.061 +03:00 [DBG] spa found in database: true
2020-07-30 16:03:47.061 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:03:47.062 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 16:03:47.063 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:03:47.064 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 16:03:47.065 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 16:03:47.065 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 16:03:47.065 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5006/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html","http://localhost:5006/callback.html"],"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read","State":"3b889ee0057e4a02898df12340ffb275","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"5AB4D0321962C93A54BC2210E91E7EC4","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5006/callback.html","response_type":"code","scope":"openid profile email api.read","state":"3b889ee0057e4a02898df12340ffb275","code_challenge":"vQRvhyB42cFjwgRi1xeeU69NGJ0MKMaYMXqa5dAP_HA","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 16:03:47.072 +03:00 [DBG] Client is configured to not require consent, no consent is required
2020-07-30 16:03:47.072 +03:00 [DBG] Creating Authorization Code Flow response.
2020-07-30 16:03:47.073 +03:00 [DBG] KbDYCLr/iK1g9AAO/4V/9RzWYjPLlQfbb97ZlRqERlg= not found in database
2020-07-30 16:03:47.077 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5006/callback.html","Endpoint":"Authorize","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****D14A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:000000D1","TimeStamp":"2020-07-30T13:03:47.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 16:03:47.080 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ClientId":"spa","RedirectUri":"http://localhost:5006/callback.html","State":"3b889ee0057e4a02898df12340ffb275","Scope":"openid profile email api.read","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-07-30 16:03:47.080 +03:00 [DBG] Augmenting SignInContext
2020-07-30 16:03:47.081 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 16:03:47.178 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:03:47.180 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:03:47.181 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:03:47.181 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:03:47.181 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:03:47.182 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:03:47.182 +03:00 [DBG] Start discovery request
2020-07-30 16:03:47.186 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:03:47.191 +03:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:5006
2020-07-30 16:03:47.192 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:03:47.193 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:03:47.193 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-07-30 16:03:47.193 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-07-30 16:03:47.193 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-07-30 16:03:47.194 +03:00 [DBG] Start token request.
2020-07-30 16:03:47.194 +03:00 [DBG] Start client validation
2020-07-30 16:03:47.194 +03:00 [DBG] Start parsing Basic Authentication secret
2020-07-30 16:03:47.194 +03:00 [DBG] Start parsing for secret in post body
2020-07-30 16:03:47.194 +03:00 [DBG] client id without secret found
2020-07-30 16:03:47.194 +03:00 [DBG] Parser found secret: PostBodySecretParser
2020-07-30 16:03:47.195 +03:00 [DBG] Secret id found: spa
2020-07-30 16:03:47.205 +03:00 [DBG] spa found in database: true
2020-07-30 16:03:47.206 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:03:47.206 +03:00 [DBG] Public Client - skipping secret validation success
2020-07-30 16:03:47.207 +03:00 [DBG] Client validation success
2020-07-30 16:03:47.208 +03:00 [INF] {"ClientId":"spa","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM1KGIIKHO1U:00000049","TimeStamp":"2020-07-30T13:03:47.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2020-07-30 16:03:47.209 +03:00 [DBG] Start token request validation
2020-07-30 16:03:47.209 +03:00 [DBG] Start validation of authorization code token request
2020-07-30 16:03:47.210 +03:00 [DBG] KbDYCLr/iK1g9AAO/4V/9RzWYjPLlQfbb97ZlRqERlg= found in database: true
2020-07-30 16:03:47.212 +03:00 [DBG] removing KbDYCLr/iK1g9AAO/4V/9RzWYjPLlQfbb97ZlRqERlg= persisted grant from database
2020-07-30 16:03:47.215 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2020-07-30 16:03:47.230 +03:00 [DBG] Validation of authorization code token request success
2020-07-30 16:03:47.230 +03:00 [INF] Token request validation success, {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"D9A47EA8A58131F06DB31E71FB70FFC50592A9E2A88526B8CE3F756D39BED14A","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"spa","code":"D9A47EA8A58131F06DB31E71FB70FFC50592A9E2A88526B8CE3F756D39BED14A","redirect_uri":"http://localhost:5006/callback.html","code_verifier":"a521a9cd8da64c25afed9dbec9846d697d3ad7a48392454c93917104be10412b14044c013073438e8843d0c56cd1f2bc","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2020-07-30 16:03:47.242 +03:00 [DBG] spa found in database: true
2020-07-30 16:03:47.242 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:03:47.244 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:03:47.245 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 16:03:47.246 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 16:03:47.246 +03:00 [DBG] Getting claims for access token for client: spa
2020-07-30 16:03:47.247 +03:00 [DBG] Getting claims for access token for subject: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 16:03:47.259 +03:00 [DBG] spa found in database: true
2020-07-30 16:03:47.259 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:03:47.260 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:03:47.261 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 16:03:47.262 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 16:03:47.263 +03:00 [DBG] Getting claims for identity token for subject: 65886359-073C-434B-AD2D-A3932222DABE and client: spa
2020-07-30 16:03:47.263 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-07-30 16:03:47.264 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":null,"Endpoint":"Token","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****kULg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Ai3g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1U:00000049","TimeStamp":"2020-07-30T13:03:47.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 16:03:47.268 +03:00 [DBG] Token request success.
2020-07-30 16:03:47.275 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:5006
2020-07-30 16:03:47.276 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:03:47.277 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:03:47.277 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-07-30 16:03:47.277 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-07-30 16:03:47.278 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-07-30 16:03:47.278 +03:00 [DBG] Start userinfo request
2020-07-30 16:03:47.278 +03:00 [DBG] Bearer token found in header
2020-07-30 16:03:47.285 +03:00 [DBG] spa found in database: true
2020-07-30 16:03:47.285 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:03:47.294 +03:00 [DBG] spa found in database: true
2020-07-30 16:03:47.294 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:03:47.296 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 16:03:47.296 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"3EF7668FF249B7127AEF5D58B8E6DF54","Claims":{"nbf":1596114227,"exp":1596117827,"iss":"https://localhost:5000","aud":["api","https://localhost:5000/resources"],"client_id":"spa","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596114227,"idp":"local","role":"student","jti":"3EF7668FF249B7127AEF5D58B8E6DF54","sid":"5AB4D0321962C93A54BC2210E91E7EC4","iat":1596114227,"scope":["openid","profile","email","api.read"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 16:03:47.299 +03:00 [DBG] Creating userinfo response
2020-07-30 16:03:47.299 +03:00 [DBG] Scopes in access token: openid profile email api.read
2020-07-30 16:03:47.301 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:03:47.302 +03:00 [DBG] Requested claim types: updated_at name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale sub email email_verified
2020-07-30 16:03:47.304 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2020-07-30 16:03:47.305 +03:00 [DBG] End userinfo request
2020-07-30 16:03:47.315 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:03:47.316 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:03:47.317 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:03:47.317 +03:00 [DBG] Rendering check session result
2020-07-30 16:03:47.410 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:03:47.412 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:03:47.413 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:03:47.413 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:03:47.413 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:03:47.413 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:03:47.414 +03:00 [DBG] Start discovery request
2020-07-30 16:03:47.417 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:03:47.429 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:03:47.429 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:03:47.429 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:03:47.429 +03:00 [DBG] Rendering check session result
2020-07-30 16:03:54.034 +03:00 [INF] Removing 0 grants
2020-07-30 16:03:54.035 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:04:24.047 +03:00 [INF] Removing 0 grants
2020-07-30 16:04:24.050 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:04:54.052 +03:00 [INF] Removing 0 grants
2020-07-30 16:04:54.054 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:05:24.074 +03:00 [INF] Removing 0 grants
2020-07-30 16:05:24.075 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:05:54.092 +03:00 [INF] Removing 0 grants
2020-07-30 16:05:54.096 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:05:55.475 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:05:55.487 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:05:55.487 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:05:55.488 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:05:55.489 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:05:55.489 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:05:55.489 +03:00 [DBG] Start discovery request
2020-07-30 16:05:55.501 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:05:55.513 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:05:55.513 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:05:55.514 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:05:55.515 +03:00 [DBG] Rendering check session result
2020-07-30 16:06:24.116 +03:00 [INF] Removing 0 grants
2020-07-30 16:06:24.118 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:06:54.120 +03:00 [INF] Removing 0 grants
2020-07-30 16:06:54.121 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:07:09.728 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:07:09.735 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:07:09.735 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:07:09.736 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:07:09.736 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:07:09.736 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:07:09.737 +03:00 [DBG] Start discovery request
2020-07-30 16:07:09.751 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:07:09.760 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:07:09.760 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:07:09.761 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:07:09.761 +03:00 [DBG] Rendering check session result
2020-07-30 16:07:24.139 +03:00 [INF] Removing 0 grants
2020-07-30 16:07:24.141 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:07:54.152 +03:00 [INF] Removing 0 grants
2020-07-30 16:07:54.153 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:08:24.443 +03:00 [INF] Removing 0 grants
2020-07-30 16:08:24.457 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:08:54.484 +03:00 [INF] Removing 0 grants
2020-07-30 16:08:54.486 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:09:24.493 +03:00 [INF] Removing 0 grants
2020-07-30 16:09:24.495 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:09:54.502 +03:00 [INF] Removing 0 grants
2020-07-30 16:09:54.506 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:10:24.521 +03:00 [INF] Removing 0 grants
2020-07-30 16:10:24.522 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:10:54.539 +03:00 [INF] Removing 0 grants
2020-07-30 16:10:54.541 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:11:24.549 +03:00 [INF] Removing 0 grants
2020-07-30 16:11:24.550 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:11:27.885 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 16:11:27.890 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 16:11:27.891 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 16:11:27.893 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:11:27.894 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:11:27.894 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:11:27.895 +03:00 [DBG] Start discovery request
2020-07-30 16:11:27.912 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:11:33.711 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:11:33.712 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:11:33.713 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:11:33.713 +03:00 [DBG] Rendering check session result
2020-07-30 16:11:38.323 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:11:38.326 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:11:38.327 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:11:38.327 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:11:38.327 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:11:38.328 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:11:38.328 +03:00 [DBG] Start discovery request
2020-07-30 16:11:38.332 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:11:38.345 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:11:38.346 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:11:38.346 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:11:38.346 +03:00 [DBG] Rendering check session result
2020-07-30 16:11:54.564 +03:00 [INF] Removing 0 grants
2020-07-30 16:11:54.566 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:12:12.478 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:12:12.481 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:12:12.482 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:12:12.482 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:12:12.482 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:12:12.483 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:12:12.483 +03:00 [DBG] Start discovery request
2020-07-30 16:12:12.497 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:12:12.522 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:12:12.523 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:12:12.524 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:12:12.524 +03:00 [DBG] Rendering check session result
2020-07-30 16:12:24.574 +03:00 [INF] Removing 0 grants
2020-07-30 16:12:24.575 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:12:54.592 +03:00 [INF] Removing 0 grants
2020-07-30 16:12:54.594 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:13:24.610 +03:00 [INF] Removing 0 grants
2020-07-30 16:13:24.614 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:13:54.725 +03:00 [INF] Removing 0 grants
2020-07-30 16:13:54.727 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:14:24.729 +03:00 [INF] Removing 0 grants
2020-07-30 16:14:24.731 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:14:54.737 +03:00 [INF] Removing 0 grants
2020-07-30 16:14:54.738 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:15:24.758 +03:00 [INF] Removing 0 grants
2020-07-30 16:15:24.761 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:15:54.770 +03:00 [INF] Removing 0 grants
2020-07-30 16:15:54.771 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:16:24.785 +03:00 [INF] Removing 0 grants
2020-07-30 16:16:24.786 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:16:54.789 +03:00 [INF] Removing 0 grants
2020-07-30 16:16:54.790 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:17:24.818 +03:00 [INF] Removing 0 grants
2020-07-30 16:17:24.821 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:17:54.835 +03:00 [INF] Removing 0 grants
2020-07-30 16:17:54.836 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:18:24.864 +03:00 [INF] Removing 0 grants
2020-07-30 16:18:24.866 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:18:54.879 +03:00 [INF] Removing 0 grants
2020-07-30 16:18:54.882 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:19:24.911 +03:00 [INF] Removing 0 grants
2020-07-30 16:19:24.913 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:19:54.927 +03:00 [INF] Removing 0 grants
2020-07-30 16:19:54.931 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:20:25.197 +03:00 [INF] Removing 0 grants
2020-07-30 16:20:25.211 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:20:55.216 +03:00 [INF] Removing 0 grants
2020-07-30 16:20:55.218 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:21:25.220 +03:00 [INF] Removing 0 grants
2020-07-30 16:21:25.221 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:21:55.231 +03:00 [INF] Removing 0 grants
2020-07-30 16:21:55.233 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:22:25.253 +03:00 [INF] Removing 0 grants
2020-07-30 16:22:25.257 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:22:55.274 +03:00 [INF] Removing 0 grants
2020-07-30 16:22:55.276 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:23:25.284 +03:00 [INF] Removing 0 grants
2020-07-30 16:23:25.285 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:23:28.126 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-07-30 16:23:28.127 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-07-30 16:23:28.127 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-07-30 16:23:28.127 +03:00 [DBG] Processing signout request for 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 16:23:28.128 +03:00 [DBG] Start end session request validation
2020-07-30 16:23:28.128 +03:00 [DBG] Start identity token validation
2020-07-30 16:23:28.161 +03:00 [DBG] spa found in database: true
2020-07-30 16:23:28.162 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:23:28.163 +03:00 [DBG] Client found: spa / Example Client Application Single Page Javascript App
2020-07-30 16:23:28.164 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 16:23:28.164 +03:00 [DBG] Token validation success
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1596114227,"exp":1596114527,"iss":"https://localhost:5000","aud":"spa","iat":1596114227,"at_hash":"m_0r4e2XepCsdix95_RlYQ","s_hash":"8UHc0DS9YAsgexrvm5FDIQ","sid":"5AB4D0321962C93A54BC2210E91E7EC4","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596114227,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 16:23:28.165 +03:00 [INF] End session request validation success
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","PostLogOutUri":"http://localhost:5006/index.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:5006/index.html"},"$type":"EndSessionRequestValidationLog"}
2020-07-30 16:23:28.166 +03:00 [DBG] Success validating end session request from spa
2020-07-30 16:23:28.172 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-30 16:23:28.176 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-30 16:23:28.177 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-30 16:23:28.177 +03:00 [INF] {"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1KGIIKHO1V:000000E3","TimeStamp":"2020-07-30T13:23:28.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-30 16:23:28.178 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-30 16:23:28.186 +03:00 [DBG] spa found in database: true
2020-07-30 16:23:28.187 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:23:28.187 +03:00 [DBG] No client back-channel logout URLs
2020-07-30 16:23:29.825 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:23:29.826 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:23:29.827 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:23:29.827 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:23:29.827 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:23:29.827 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:23:29.827 +03:00 [DBG] Start discovery request
2020-07-30 16:23:29.847 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:23:29.863 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-07-30 16:23:29.864 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-07-30 16:23:29.864 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-07-30 16:23:29.865 +03:00 [DBG] Start authorize request
2020-07-30 16:23:29.865 +03:00 [DBG] No user present in authorize request
2020-07-30 16:23:29.865 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 16:23:29.875 +03:00 [DBG] spa found in database: true
2020-07-30 16:23:29.875 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:23:29.876 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 16:23:29.880 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:23:29.887 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 16:23:29.890 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 16:23:29.890 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 16:23:29.890 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5006/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html","http://localhost:5006/callback.html"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read","State":"459039a318aa4f8c874ed566e8d47c9d","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5006/callback.html","response_type":"code","scope":"openid profile email api.read","state":"459039a318aa4f8c874ed566e8d47c9d","code_challenge":"7Wmc_1PvgFzxAtsuQ95aOoT9EHoteC7Q1u4YKA7sW-A","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 16:23:29.892 +03:00 [INF] Showing login: User is not authenticated
2020-07-30 16:23:29.896 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 16:23:29.904 +03:00 [DBG] spa found in database: true
2020-07-30 16:23:29.904 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:23:29.904 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 16:23:29.905 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:23:29.907 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 16:23:29.908 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 16:23:29.908 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 16:23:29.913 +03:00 [DBG] spa found in database: true
2020-07-30 16:23:29.914 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:23:55.300 +03:00 [INF] Removing 0 grants
2020-07-30 16:23:55.301 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:24:10.868 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 16:24:10.890 +03:00 [DBG] spa found in database: true
2020-07-30 16:24:10.890 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:24:10.891 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 16:24:10.895 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:24:10.903 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 16:24:10.906 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 16:24:10.907 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 16:24:10.915 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":"spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:000000F9","TimeStamp":"2020-07-30T13:24:10.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-30 16:24:10.917 +03:00 [DBG] Augmenting SignInContext
2020-07-30 16:24:10.917 +03:00 [DBG] Adding idp claim with value: local
2020-07-30 16:24:10.917 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-30 16:24:10.918 +03:00 [DBG] Adding auth_time claim with value: 1596115450
2020-07-30 16:24:10.918 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 16:24:10.925 +03:00 [DBG] spa found in database: true
2020-07-30 16:24:10.925 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:24:10.931 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-07-30 16:24:10.932 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-07-30 16:24:10.932 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-07-30 16:24:10.932 +03:00 [DBG] Start authorize callback request
2020-07-30 16:24:10.933 +03:00 [DBG] User in authorize request: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 16:24:10.933 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 16:24:10.941 +03:00 [DBG] spa found in database: true
2020-07-30 16:24:10.942 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:24:10.942 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 16:24:10.943 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:24:10.945 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 16:24:10.946 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 16:24:10.946 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 16:24:10.946 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5006/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html","http://localhost:5006/callback.html"],"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read","State":"459039a318aa4f8c874ed566e8d47c9d","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"53045601C2031E6ACEE26B6C1E4B57E3","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5006/callback.html","response_type":"code","scope":"openid profile email api.read","state":"459039a318aa4f8c874ed566e8d47c9d","code_challenge":"7Wmc_1PvgFzxAtsuQ95aOoT9EHoteC7Q1u4YKA7sW-A","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 16:24:10.949 +03:00 [DBG] Client is configured to not require consent, no consent is required
2020-07-30 16:24:10.950 +03:00 [DBG] Creating Authorization Code Flow response.
2020-07-30 16:24:10.951 +03:00 [DBG] 4HI65rHTY4FBBwT8IOdBB/IPT/qpAUW0Apdothd+oCY= not found in database
2020-07-30 16:24:10.957 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5006/callback.html","Endpoint":"Authorize","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****956D","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:000000FB","TimeStamp":"2020-07-30T13:24:10.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 16:24:10.958 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ClientId":"spa","RedirectUri":"http://localhost:5006/callback.html","State":"459039a318aa4f8c874ed566e8d47c9d","Scope":"openid profile email api.read","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-07-30 16:24:10.959 +03:00 [DBG] Augmenting SignInContext
2020-07-30 16:24:10.959 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 16:24:11.058 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:24:11.061 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:24:11.061 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:24:11.061 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:24:11.061 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:24:11.062 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:24:11.062 +03:00 [DBG] Start discovery request
2020-07-30 16:24:11.071 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:24:11.077 +03:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:5006
2020-07-30 16:24:11.079 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:24:11.079 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:24:11.080 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-07-30 16:24:11.080 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-07-30 16:24:11.080 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-07-30 16:24:11.081 +03:00 [DBG] Start token request.
2020-07-30 16:24:11.081 +03:00 [DBG] Start client validation
2020-07-30 16:24:11.081 +03:00 [DBG] Start parsing Basic Authentication secret
2020-07-30 16:24:11.081 +03:00 [DBG] Start parsing for secret in post body
2020-07-30 16:24:11.082 +03:00 [DBG] client id without secret found
2020-07-30 16:24:11.085 +03:00 [DBG] Parser found secret: PostBodySecretParser
2020-07-30 16:24:11.086 +03:00 [DBG] Secret id found: spa
2020-07-30 16:24:11.097 +03:00 [DBG] spa found in database: true
2020-07-30 16:24:11.097 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:24:11.097 +03:00 [DBG] Public Client - skipping secret validation success
2020-07-30 16:24:11.097 +03:00 [DBG] Client validation success
2020-07-30 16:24:11.097 +03:00 [INF] {"ClientId":"spa","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM1KGIIKHO1U:0000005F","TimeStamp":"2020-07-30T13:24:11.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2020-07-30 16:24:11.098 +03:00 [DBG] Start token request validation
2020-07-30 16:24:11.098 +03:00 [DBG] Start validation of authorization code token request
2020-07-30 16:24:11.100 +03:00 [DBG] 4HI65rHTY4FBBwT8IOdBB/IPT/qpAUW0Apdothd+oCY= found in database: true
2020-07-30 16:24:11.101 +03:00 [DBG] removing 4HI65rHTY4FBBwT8IOdBB/IPT/qpAUW0Apdothd+oCY= persisted grant from database
2020-07-30 16:24:11.104 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2020-07-30 16:24:11.109 +03:00 [DBG] Validation of authorization code token request success
2020-07-30 16:24:11.109 +03:00 [INF] Token request validation success, {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"2D04196825B2C7EC0676D3C8C697930EDAD8A9895DF8BE4E45060C29D60C956D","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"spa","code":"2D04196825B2C7EC0676D3C8C697930EDAD8A9895DF8BE4E45060C29D60C956D","redirect_uri":"http://localhost:5006/callback.html","code_verifier":"bbdbc35243d74634bab2b24a8452e7407f31ecdbe71d431496d6f79855a2df5a3f62e1ef818f49289730142f89876f92","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2020-07-30 16:24:11.116 +03:00 [DBG] spa found in database: true
2020-07-30 16:24:11.117 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:24:11.118 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:24:11.119 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 16:24:11.120 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 16:24:11.121 +03:00 [DBG] Getting claims for access token for client: spa
2020-07-30 16:24:11.121 +03:00 [DBG] Getting claims for access token for subject: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 16:24:11.132 +03:00 [DBG] spa found in database: true
2020-07-30 16:24:11.133 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:24:11.134 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:24:11.136 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 16:24:11.138 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 16:24:11.139 +03:00 [DBG] Getting claims for identity token for subject: 65886359-073C-434B-AD2D-A3932222DABE and client: spa
2020-07-30 16:24:11.139 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-07-30 16:24:11.140 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":null,"Endpoint":"Token","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****PKkw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****AYHg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1U:0000005F","TimeStamp":"2020-07-30T13:24:11.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 16:24:11.142 +03:00 [DBG] Token request success.
2020-07-30 16:24:11.153 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:5006
2020-07-30 16:24:11.156 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:24:11.156 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:24:11.157 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-07-30 16:24:11.157 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-07-30 16:24:11.157 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-07-30 16:24:11.158 +03:00 [DBG] Start userinfo request
2020-07-30 16:24:11.158 +03:00 [DBG] Bearer token found in header
2020-07-30 16:24:11.165 +03:00 [DBG] spa found in database: true
2020-07-30 16:24:11.166 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:24:11.171 +03:00 [DBG] spa found in database: true
2020-07-30 16:24:11.172 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:24:11.173 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 16:24:11.173 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"85DC12C664E0CCBFD3A04515DA86C03F","Claims":{"nbf":1596115451,"exp":1596119051,"iss":"https://localhost:5000","aud":["api","https://localhost:5000/resources"],"client_id":"spa","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596115450,"idp":"local","role":"student","jti":"85DC12C664E0CCBFD3A04515DA86C03F","sid":"53045601C2031E6ACEE26B6C1E4B57E3","iat":1596115451,"scope":["openid","profile","email","api.read"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 16:24:11.175 +03:00 [DBG] Creating userinfo response
2020-07-30 16:24:11.175 +03:00 [DBG] Scopes in access token: openid profile email api.read
2020-07-30 16:24:11.176 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:24:11.176 +03:00 [DBG] Requested claim types: updated_at name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale sub email email_verified
2020-07-30 16:24:11.179 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2020-07-30 16:24:11.181 +03:00 [DBG] End userinfo request
2020-07-30 16:24:11.194 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:24:11.194 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:24:11.195 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:24:11.195 +03:00 [DBG] Rendering check session result
2020-07-30 16:24:11.291 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:24:11.293 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:24:11.293 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:24:11.293 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:24:11.293 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:24:11.294 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:24:11.294 +03:00 [DBG] Start discovery request
2020-07-30 16:24:11.297 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:24:11.321 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:24:11.324 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:24:11.325 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:24:11.326 +03:00 [DBG] Rendering check session result
2020-07-30 16:24:25.314 +03:00 [INF] Removing 0 grants
2020-07-30 16:24:25.315 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:24:51.148 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:24:51.158 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:24:51.158 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:24:51.158 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:24:51.159 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:24:51.162 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:24:51.162 +03:00 [DBG] Start discovery request
2020-07-30 16:24:51.175 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:24:51.187 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:24:51.188 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:24:51.188 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:24:51.188 +03:00 [DBG] Rendering check session result
2020-07-30 16:24:55.328 +03:00 [INF] Removing 0 grants
2020-07-30 16:24:55.330 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:25:24.769 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:25:24.771 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:25:24.771 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:25:24.771 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:25:24.772 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:25:24.772 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:25:24.772 +03:00 [DBG] Start discovery request
2020-07-30 16:25:24.777 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:25:24.808 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:25:24.809 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:25:24.811 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:25:24.811 +03:00 [DBG] Rendering check session result
2020-07-30 16:25:25.332 +03:00 [INF] Removing 0 grants
2020-07-30 16:25:25.333 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:25:35.258 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:25:35.261 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:25:35.262 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:25:35.262 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:25:35.263 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:25:35.264 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:25:35.264 +03:00 [DBG] Start discovery request
2020-07-30 16:25:35.268 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:25:35.289 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:25:35.290 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:25:35.291 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:25:35.291 +03:00 [DBG] Rendering check session result
2020-07-30 16:25:55.425 +03:00 [INF] Removing 0 grants
2020-07-30 16:25:55.427 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:26:25.434 +03:00 [INF] Removing 0 grants
2020-07-30 16:26:25.441 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:26:50.196 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:26:50.206 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:26:50.207 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:26:50.208 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:26:50.209 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:26:50.210 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:26:50.210 +03:00 [DBG] Start discovery request
2020-07-30 16:26:50.221 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:26:50.235 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:26:50.236 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:26:50.237 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:26:50.237 +03:00 [DBG] Rendering check session result
2020-07-30 16:26:55.460 +03:00 [INF] Removing 0 grants
2020-07-30 16:26:55.465 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:27:25.502 +03:00 [INF] Removing 0 grants
2020-07-30 16:27:25.511 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:27:55.519 +03:00 [INF] Removing 0 grants
2020-07-30 16:27:55.520 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:28:25.537 +03:00 [INF] Removing 0 grants
2020-07-30 16:28:25.539 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:28:55.557 +03:00 [INF] Removing 0 grants
2020-07-30 16:28:55.561 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:29:25.584 +03:00 [INF] Removing 0 grants
2020-07-30 16:29:25.585 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:29:55.597 +03:00 [INF] Removing 0 grants
2020-07-30 16:29:55.598 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:30:25.627 +03:00 [INF] Removing 0 grants
2020-07-30 16:30:25.635 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:30:55.651 +03:00 [INF] Removing 0 grants
2020-07-30 16:30:55.655 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:31:25.680 +03:00 [INF] Removing 0 grants
2020-07-30 16:31:25.683 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:31:55.695 +03:00 [INF] Removing 0 grants
2020-07-30 16:31:55.696 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:32:25.959 +03:00 [INF] Removing 0 grants
2020-07-30 16:32:25.973 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:32:55.995 +03:00 [INF] Removing 0 grants
2020-07-30 16:32:55.997 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:33:26.012 +03:00 [INF] Removing 0 grants
2020-07-30 16:33:26.013 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:33:56.040 +03:00 [INF] Removing 0 grants
2020-07-30 16:33:56.042 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:34:26.054 +03:00 [INF] Removing 0 grants
2020-07-30 16:34:26.055 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:34:56.082 +03:00 [INF] Removing 0 grants
2020-07-30 16:34:56.085 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:35:26.097 +03:00 [INF] Removing 0 grants
2020-07-30 16:35:26.099 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:35:56.126 +03:00 [INF] Removing 0 grants
2020-07-30 16:35:56.128 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:36:26.132 +03:00 [INF] Removing 0 grants
2020-07-30 16:36:26.133 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:36:56.158 +03:00 [INF] Removing 0 grants
2020-07-30 16:36:56.160 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:37:26.162 +03:00 [INF] Removing 0 grants
2020-07-30 16:37:26.165 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:37:56.196 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:37:56.389 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:37:56.391 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:37:56.392 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:37:56.393 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:37:56.393 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:37:56.394 +03:00 [DBG] Start discovery request
2020-07-30 16:37:56.401 +03:00 [INF] Removing 0 grants
2020-07-30 16:37:56.403 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:37:56.891 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:37:56.905 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:37:56.905 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:37:56.906 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:37:56.906 +03:00 [DBG] Rendering check session result
2020-07-30 16:38:14.590 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:38:14.597 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:38:14.599 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:38:14.599 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:38:14.600 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:38:14.600 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:38:14.603 +03:00 [DBG] Start discovery request
2020-07-30 16:38:14.616 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:38:14.628 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:38:14.629 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:38:14.629 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:38:14.629 +03:00 [DBG] Rendering check session result
2020-07-30 16:38:26.414 +03:00 [INF] Removing 0 grants
2020-07-30 16:38:26.416 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:38:38.959 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:38:38.964 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:38:38.964 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:38:38.965 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:38:38.965 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:38:38.966 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:38:38.966 +03:00 [DBG] Start discovery request
2020-07-30 16:38:38.970 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:38:38.997 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:38:38.997 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:38:38.999 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:38:38.999 +03:00 [DBG] Rendering check session result
2020-07-30 16:38:56.425 +03:00 [INF] Removing 0 grants
2020-07-30 16:38:56.426 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:39:26.456 +03:00 [INF] Removing 0 grants
2020-07-30 16:39:26.458 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:39:56.473 +03:00 [INF] Removing 0 grants
2020-07-30 16:39:56.474 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:40:26.500 +03:00 [INF] Removing 0 grants
2020-07-30 16:40:26.502 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:40:56.507 +03:00 [INF] Removing 0 grants
2020-07-30 16:40:56.508 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:41:26.538 +03:00 [INF] Removing 0 grants
2020-07-30 16:41:26.540 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:41:56.552 +03:00 [INF] Removing 0 grants
2020-07-30 16:41:56.553 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:42:10.279 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:42:10.289 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:42:10.290 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:42:10.291 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:42:10.292 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:42:10.292 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:42:10.292 +03:00 [DBG] Start discovery request
2020-07-30 16:42:10.306 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:42:10.321 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:42:10.322 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:42:10.322 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:42:10.323 +03:00 [DBG] Rendering check session result
2020-07-30 16:42:26.574 +03:00 [INF] Removing 0 grants
2020-07-30 16:42:26.576 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:42:53.490 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-07-30 16:42:53.491 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-07-30 16:42:53.492 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-07-30 16:42:53.493 +03:00 [DBG] Start authorize request
2020-07-30 16:42:53.493 +03:00 [DBG] User in authorize request: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 16:42:53.493 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 16:42:53.524 +03:00 [DBG] spa found in database: true
2020-07-30 16:42:53.525 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:42:53.526 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 16:42:53.529 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:42:53.537 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 16:42:53.541 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 16:42:53.542 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 16:42:53.542 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5006/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html","http://localhost:5006/callback.html"],"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read","State":"34c1192ec2f14c8695a6d09c8735c39e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"53045601C2031E6ACEE26B6C1E4B57E3","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5006/callback.html","response_type":"code","scope":"openid profile email api.read","state":"34c1192ec2f14c8695a6d09c8735c39e","code_challenge":"6xa1Cajx8MEWeqQgqjpYn6Ek_Vkihc_bJAY3dmOCfug","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 16:42:53.548 +03:00 [DBG] Client is configured to not require consent, no consent is required
2020-07-30 16:42:53.548 +03:00 [DBG] Creating Authorization Code Flow response.
2020-07-30 16:42:53.550 +03:00 [DBG] o3/uOjC27M+W4i77sPkkIxruS05hZzqyDTeisBBf47o= not found in database
2020-07-30 16:42:53.553 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5006/callback.html","Endpoint":"Authorize","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****7E4C","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:00000111","TimeStamp":"2020-07-30T13:42:53.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 16:42:53.556 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ClientId":"spa","RedirectUri":"http://localhost:5006/callback.html","State":"34c1192ec2f14c8695a6d09c8735c39e","Scope":"openid profile email api.read","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-07-30 16:42:53.556 +03:00 [DBG] Augmenting SignInContext
2020-07-30 16:42:53.557 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 16:42:53.646 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:42:53.649 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:42:53.649 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:42:53.649 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:42:53.649 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:42:53.650 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:42:53.650 +03:00 [DBG] Start discovery request
2020-07-30 16:42:53.659 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:42:53.666 +03:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:5006
2020-07-30 16:42:53.667 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:42:53.668 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:42:53.668 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-07-30 16:42:53.668 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-07-30 16:42:53.668 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-07-30 16:42:53.669 +03:00 [DBG] Start token request.
2020-07-30 16:42:53.669 +03:00 [DBG] Start client validation
2020-07-30 16:42:53.669 +03:00 [DBG] Start parsing Basic Authentication secret
2020-07-30 16:42:53.669 +03:00 [DBG] Start parsing for secret in post body
2020-07-30 16:42:53.669 +03:00 [DBG] client id without secret found
2020-07-30 16:42:53.670 +03:00 [DBG] Parser found secret: PostBodySecretParser
2020-07-30 16:42:53.670 +03:00 [DBG] Secret id found: spa
2020-07-30 16:42:53.678 +03:00 [DBG] spa found in database: true
2020-07-30 16:42:53.678 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:42:53.678 +03:00 [DBG] Public Client - skipping secret validation success
2020-07-30 16:42:53.678 +03:00 [DBG] Client validation success
2020-07-30 16:42:53.679 +03:00 [INF] {"ClientId":"spa","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM1KGIIKHO1U:00000079","TimeStamp":"2020-07-30T13:42:53.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2020-07-30 16:42:53.680 +03:00 [DBG] Start token request validation
2020-07-30 16:42:53.680 +03:00 [DBG] Start validation of authorization code token request
2020-07-30 16:42:53.681 +03:00 [DBG] o3/uOjC27M+W4i77sPkkIxruS05hZzqyDTeisBBf47o= found in database: true
2020-07-30 16:42:53.682 +03:00 [DBG] removing o3/uOjC27M+W4i77sPkkIxruS05hZzqyDTeisBBf47o= persisted grant from database
2020-07-30 16:42:53.685 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2020-07-30 16:42:53.687 +03:00 [DBG] Validation of authorization code token request success
2020-07-30 16:42:53.690 +03:00 [INF] Token request validation success, {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"D16D5A44C5D05C657171AEF89AD964210014758945A5AF22B251B48BEA167E4C","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"spa","code":"D16D5A44C5D05C657171AEF89AD964210014758945A5AF22B251B48BEA167E4C","redirect_uri":"http://localhost:5006/callback.html","code_verifier":"8a2c4766d1b24d24953c7349fe407d09017630594df04d5cad5c1e372054f580bd6ce45502df44948b5829c3a958662c","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2020-07-30 16:42:53.698 +03:00 [DBG] spa found in database: true
2020-07-30 16:42:53.698 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:42:53.702 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:42:53.704 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 16:42:53.706 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 16:42:53.707 +03:00 [DBG] Getting claims for access token for client: spa
2020-07-30 16:42:53.707 +03:00 [DBG] Getting claims for access token for subject: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 16:42:53.718 +03:00 [DBG] spa found in database: true
2020-07-30 16:42:53.718 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:42:53.720 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:42:53.721 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 16:42:53.723 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 16:42:53.723 +03:00 [DBG] Getting claims for identity token for subject: 65886359-073C-434B-AD2D-A3932222DABE and client: spa
2020-07-30 16:42:53.723 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-07-30 16:42:53.724 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":null,"Endpoint":"Token","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****rfKw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****-K1g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1U:00000079","TimeStamp":"2020-07-30T13:42:53.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 16:42:53.726 +03:00 [DBG] Token request success.
2020-07-30 16:42:53.735 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:5006
2020-07-30 16:42:53.737 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:42:53.738 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:42:53.739 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-07-30 16:42:53.740 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-07-30 16:42:53.740 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-07-30 16:42:53.741 +03:00 [DBG] Start userinfo request
2020-07-30 16:42:53.743 +03:00 [DBG] Bearer token found in header
2020-07-30 16:42:53.754 +03:00 [DBG] spa found in database: true
2020-07-30 16:42:53.754 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:42:53.765 +03:00 [DBG] spa found in database: true
2020-07-30 16:42:53.765 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:42:53.767 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 16:42:53.768 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"74EDA21C924F6DDD68E2CF04D618BF6E","Claims":{"nbf":1596116573,"exp":1596120173,"iss":"https://localhost:5000","aud":["api","https://localhost:5000/resources"],"client_id":"spa","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596115450,"idp":"local","role":"student","jti":"74EDA21C924F6DDD68E2CF04D618BF6E","sid":"53045601C2031E6ACEE26B6C1E4B57E3","iat":1596116573,"scope":["openid","profile","email","api.read"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 16:42:53.770 +03:00 [DBG] Creating userinfo response
2020-07-30 16:42:53.770 +03:00 [DBG] Scopes in access token: openid profile email api.read
2020-07-30 16:42:53.773 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:42:53.775 +03:00 [DBG] Requested claim types: updated_at name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale sub email email_verified
2020-07-30 16:42:53.779 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2020-07-30 16:42:53.779 +03:00 [DBG] End userinfo request
2020-07-30 16:42:53.797 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:42:53.797 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:42:53.798 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:42:53.798 +03:00 [DBG] Rendering check session result
2020-07-30 16:42:53.906 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:42:53.909 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:42:53.909 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:42:53.909 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:42:53.910 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:42:53.910 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:42:53.910 +03:00 [DBG] Start discovery request
2020-07-30 16:42:53.914 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:42:53.940 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:42:53.941 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:42:53.941 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:42:53.942 +03:00 [DBG] Rendering check session result
2020-07-30 16:42:56.584 +03:00 [INF] Removing 0 grants
2020-07-30 16:42:56.585 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:43:26.602 +03:00 [INF] Removing 0 grants
2020-07-30 16:43:26.604 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:43:56.616 +03:00 [INF] Removing 0 grants
2020-07-30 16:43:56.620 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:44:26.627 +03:00 [INF] Removing 0 grants
2020-07-30 16:44:26.628 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:44:56.662 +03:00 [INF] Removing 0 grants
2020-07-30 16:44:56.664 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:45:26.674 +03:00 [INF] Removing 0 grants
2020-07-30 16:45:26.675 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:45:56.699 +03:00 [INF] Removing 0 grants
2020-07-30 16:45:56.701 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:46:26.713 +03:00 [INF] Removing 0 grants
2020-07-30 16:46:26.714 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:46:56.729 +03:00 [INF] Removing 0 grants
2020-07-30 16:46:56.731 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:47:26.741 +03:00 [INF] Removing 0 grants
2020-07-30 16:47:26.742 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:47:27.191 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:47:27.195 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:47:27.196 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:47:27.196 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:47:27.196 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:47:27.197 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:47:27.197 +03:00 [DBG] Start discovery request
2020-07-30 16:47:27.214 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:47:27.240 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:47:27.243 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:47:27.244 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:47:27.244 +03:00 [DBG] Rendering check session result
2020-07-30 16:47:56.756 +03:00 [INF] Removing 0 grants
2020-07-30 16:47:56.758 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:48:26.771 +03:00 [INF] Removing 0 grants
2020-07-30 16:48:26.772 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:48:56.796 +03:00 [INF] Removing 0 grants
2020-07-30 16:48:56.798 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:49:26.806 +03:00 [INF] Removing 0 grants
2020-07-30 16:49:26.810 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:49:56.828 +03:00 [INF] Removing 0 grants
2020-07-30 16:49:56.831 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:50:12.905 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:50:12.911 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:50:12.911 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:50:12.912 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:50:12.912 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:50:12.913 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:50:12.913 +03:00 [DBG] Start discovery request
2020-07-30 16:50:12.927 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:50:12.944 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:50:12.945 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:50:12.945 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:50:12.945 +03:00 [DBG] Rendering check session result
2020-07-30 16:50:26.849 +03:00 [INF] Removing 0 grants
2020-07-30 16:50:26.852 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:50:55.540 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:50:55.543 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:50:55.543 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:50:55.543 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:50:55.544 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:50:55.544 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:50:55.544 +03:00 [DBG] Start discovery request
2020-07-30 16:50:55.548 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:50:56.864 +03:00 [INF] Removing 0 grants
2020-07-30 16:50:56.865 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:51:06.784 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:51:06.784 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:51:06.785 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:51:06.786 +03:00 [DBG] Rendering check session result
2020-07-30 16:51:26.882 +03:00 [INF] Removing 0 grants
2020-07-30 16:51:26.884 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:51:56.899 +03:00 [INF] Removing 0 grants
2020-07-30 16:51:56.900 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:52:26.932 +03:00 [INF] Removing 0 grants
2020-07-30 16:52:26.939 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:52:56.960 +03:00 [INF] Removing 0 grants
2020-07-30 16:52:56.965 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:53:26.985 +03:00 [INF] Removing 0 grants
2020-07-30 16:53:26.988 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:53:56.992 +03:00 [INF] Removing 0 grants
2020-07-30 16:53:56.994 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:54:27.017 +03:00 [INF] Removing 0 grants
2020-07-30 16:54:27.019 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:54:51.306 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:54:51.318 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:54:51.319 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:54:51.319 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:54:51.320 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:54:51.320 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:54:51.320 +03:00 [DBG] Start discovery request
2020-07-30 16:54:51.333 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:54:52.782 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-30 16:54:52.784 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-30 16:54:52.784 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-30 16:54:52.790 +03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2020-07-30 16:54:52.792 +03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2020-07-30 16:54:52.793 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:54:52.793 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:54:52.794 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:54:52.794 +03:00 [DBG] Rendering check session result
2020-07-30 16:54:52.795 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-30 16:54:52.797 +03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2020-07-30 16:54:57.022 +03:00 [INF] Removing 0 grants
2020-07-30 16:54:57.024 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:55:27.296 +03:00 [INF] Removing 0 grants
2020-07-30 16:55:27.308 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:55:57.323 +03:00 [INF] Removing 0 grants
2020-07-30 16:55:57.325 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:56:27.337 +03:00 [INF] Removing 0 grants
2020-07-30 16:56:27.338 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:56:57.352 +03:00 [INF] Removing 0 grants
2020-07-30 16:56:57.354 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:57:27.364 +03:00 [INF] Removing 0 grants
2020-07-30 16:57:27.365 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:57:57.382 +03:00 [INF] Removing 0 grants
2020-07-30 16:57:57.385 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:58:03.382 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:58:03.386 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:58:03.387 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:58:03.387 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:58:03.387 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:58:03.388 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:58:03.388 +03:00 [DBG] Start discovery request
2020-07-30 16:58:03.401 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:58:04.731 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:58:04.733 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:58:04.733 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:58:04.734 +03:00 [DBG] Rendering check session result
2020-07-30 16:58:26.211 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-07-30 16:58:26.213 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-07-30 16:58:26.214 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-07-30 16:58:26.214 +03:00 [DBG] Processing signout request for anonymous
2020-07-30 16:58:26.215 +03:00 [DBG] Start end session request validation
2020-07-30 16:58:26.216 +03:00 [DBG] Start identity token validation
2020-07-30 16:58:26.234 +03:00 [DBG] spa found in database: true
2020-07-30 16:58:26.235 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:58:26.236 +03:00 [DBG] Client found: spa / Example Client Application Single Page Javascript App
2020-07-30 16:58:26.237 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 16:58:26.237 +03:00 [DBG] Token validation success
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1596116573,"exp":1596116873,"iss":"https://localhost:5000","aud":"spa","iat":1596116573,"at_hash":"obPv6-m7UQy6csK1rn09xA","s_hash":"oj5ULNhGg3zrkMoIfAweHg","sid":"53045601C2031E6ACEE26B6C1E4B57E3","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596115450,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 16:58:26.238 +03:00 [INF] End session request validation success
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","SubjectId":"unknown","PostLogOutUri":"http://localhost:5006/index.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:5006/index.html"},"$type":"EndSessionRequestValidationLog"}
2020-07-30 16:58:26.239 +03:00 [DBG] Success validating end session request from spa
2020-07-30 16:58:27.395 +03:00 [INF] Removing 0 grants
2020-07-30 16:58:27.400 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:58:31.158 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:58:31.161 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:58:31.162 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:58:31.162 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:58:31.163 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:58:31.163 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:58:31.163 +03:00 [DBG] Start discovery request
2020-07-30 16:58:31.167 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:58:31.188 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-07-30 16:58:31.189 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-07-30 16:58:31.190 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-07-30 16:58:31.190 +03:00 [DBG] Start authorize request
2020-07-30 16:58:31.190 +03:00 [DBG] No user present in authorize request
2020-07-30 16:58:31.190 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 16:58:31.200 +03:00 [DBG] spa found in database: true
2020-07-30 16:58:31.200 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:58:31.201 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 16:58:31.204 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:58:31.211 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 16:58:31.214 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 16:58:31.215 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 16:58:31.215 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5006/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html","http://localhost:5006/callback.html"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read","State":"19edfd987fc442eb9b4d376f853ada5a","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5006/callback.html","response_type":"code","scope":"openid profile email api.read","state":"19edfd987fc442eb9b4d376f853ada5a","code_challenge":"YPkg_XB6Hqzbgo4holkyCiAAYXkSUYDY4aGpsu4ifGg","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 16:58:31.217 +03:00 [INF] Showing login: User is not authenticated
2020-07-30 16:58:31.222 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 16:58:31.230 +03:00 [DBG] spa found in database: true
2020-07-30 16:58:31.230 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:58:31.230 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 16:58:31.232 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:58:31.233 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 16:58:31.234 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 16:58:31.235 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 16:58:31.240 +03:00 [DBG] spa found in database: true
2020-07-30 16:58:31.241 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:58:58.304 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 16:58:58.311 +03:00 [INF] Removing 0 grants
2020-07-30 16:58:58.314 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:58:58.357 +03:00 [DBG] spa found in database: true
2020-07-30 16:58:58.357 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:58:58.358 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 16:58:58.362 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:58:58.370 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 16:58:58.374 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 16:58:58.374 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 16:58:58.382 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":"spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:00000139","TimeStamp":"2020-07-30T13:58:58.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-30 16:58:58.385 +03:00 [DBG] Augmenting SignInContext
2020-07-30 16:58:58.385 +03:00 [DBG] Adding idp claim with value: local
2020-07-30 16:58:58.385 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-30 16:58:58.385 +03:00 [DBG] Adding auth_time claim with value: 1596117538
2020-07-30 16:58:58.386 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 16:58:58.392 +03:00 [DBG] spa found in database: true
2020-07-30 16:58:58.392 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:58:58.397 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-07-30 16:58:58.399 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-07-30 16:58:58.399 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-07-30 16:58:58.399 +03:00 [DBG] Start authorize callback request
2020-07-30 16:58:58.399 +03:00 [DBG] User in authorize request: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 16:58:58.399 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 16:58:58.407 +03:00 [DBG] spa found in database: true
2020-07-30 16:58:58.408 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:58:58.408 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 16:58:58.410 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:58:58.411 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 16:58:58.412 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 16:58:58.412 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 16:58:58.413 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5006/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html","http://localhost:5006/callback.html"],"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read","State":"19edfd987fc442eb9b4d376f853ada5a","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"20C5590A817532923EEB34F49243AA0F","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5006/callback.html","response_type":"code","scope":"openid profile email api.read","state":"19edfd987fc442eb9b4d376f853ada5a","code_challenge":"YPkg_XB6Hqzbgo4holkyCiAAYXkSUYDY4aGpsu4ifGg","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 16:58:58.417 +03:00 [DBG] Client is configured to not require consent, no consent is required
2020-07-30 16:58:58.419 +03:00 [DBG] Creating Authorization Code Flow response.
2020-07-30 16:58:58.421 +03:00 [DBG] UodRU8uOYTYtnOdtDRC3i2gaIcSko8hi/NJGuprVQOk= not found in database
2020-07-30 16:58:58.424 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5006/callback.html","Endpoint":"Authorize","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****BC30","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:0000013B","TimeStamp":"2020-07-30T13:58:58.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 16:58:58.425 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ClientId":"spa","RedirectUri":"http://localhost:5006/callback.html","State":"19edfd987fc442eb9b4d376f853ada5a","Scope":"openid profile email api.read","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-07-30 16:58:58.426 +03:00 [DBG] Augmenting SignInContext
2020-07-30 16:58:58.426 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 16:58:58.529 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:58:58.532 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:58:58.532 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:58:58.533 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:58:58.533 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:58:58.534 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:58:58.534 +03:00 [DBG] Start discovery request
2020-07-30 16:58:58.544 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:58:58.549 +03:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:5006
2020-07-30 16:58:58.553 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:58:58.554 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:58:58.554 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-07-30 16:58:58.555 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-07-30 16:58:58.555 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-07-30 16:58:58.555 +03:00 [DBG] Start token request.
2020-07-30 16:58:58.555 +03:00 [DBG] Start client validation
2020-07-30 16:58:58.556 +03:00 [DBG] Start parsing Basic Authentication secret
2020-07-30 16:58:58.556 +03:00 [DBG] Start parsing for secret in post body
2020-07-30 16:58:58.556 +03:00 [DBG] client id without secret found
2020-07-30 16:58:58.556 +03:00 [DBG] Parser found secret: PostBodySecretParser
2020-07-30 16:58:58.556 +03:00 [DBG] Secret id found: spa
2020-07-30 16:58:58.565 +03:00 [DBG] spa found in database: true
2020-07-30 16:58:58.566 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:58:58.566 +03:00 [DBG] Public Client - skipping secret validation success
2020-07-30 16:58:58.566 +03:00 [DBG] Client validation success
2020-07-30 16:58:58.566 +03:00 [INF] {"ClientId":"spa","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM1KGIIKHO1U:0000008F","TimeStamp":"2020-07-30T13:58:58.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2020-07-30 16:58:58.567 +03:00 [DBG] Start token request validation
2020-07-30 16:58:58.568 +03:00 [DBG] Start validation of authorization code token request
2020-07-30 16:58:58.570 +03:00 [DBG] UodRU8uOYTYtnOdtDRC3i2gaIcSko8hi/NJGuprVQOk= found in database: true
2020-07-30 16:58:58.572 +03:00 [DBG] removing UodRU8uOYTYtnOdtDRC3i2gaIcSko8hi/NJGuprVQOk= persisted grant from database
2020-07-30 16:58:58.576 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2020-07-30 16:58:58.578 +03:00 [DBG] Validation of authorization code token request success
2020-07-30 16:58:58.578 +03:00 [INF] Token request validation success, {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"907CCBD15E7C94DCFC9E12C16DDEC479417E4CFE2E9C44151B546F1C724ABC30","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"spa","code":"907CCBD15E7C94DCFC9E12C16DDEC479417E4CFE2E9C44151B546F1C724ABC30","redirect_uri":"http://localhost:5006/callback.html","code_verifier":"f2e02e034c034bf5837fc6091bd6facaf0d0262da9b94a48b1405d9a6dda97575ce6fcbe40ac469393cc5802f9746254","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2020-07-30 16:58:58.588 +03:00 [DBG] spa found in database: true
2020-07-30 16:58:58.588 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:58:58.589 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:58:58.591 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 16:58:58.592 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 16:58:58.592 +03:00 [DBG] Getting claims for access token for client: spa
2020-07-30 16:58:58.592 +03:00 [DBG] Getting claims for access token for subject: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 16:58:58.605 +03:00 [DBG] spa found in database: true
2020-07-30 16:58:58.605 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:58:58.607 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:58:58.608 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 16:58:58.610 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 16:58:58.610 +03:00 [DBG] Getting claims for identity token for subject: 65886359-073C-434B-AD2D-A3932222DABE and client: spa
2020-07-30 16:58:58.610 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-07-30 16:58:58.611 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":null,"Endpoint":"Token","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****819w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ZJ-A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1U:0000008F","TimeStamp":"2020-07-30T13:58:58.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 16:58:58.613 +03:00 [DBG] Token request success.
2020-07-30 16:58:58.626 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:5006
2020-07-30 16:58:58.627 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:58:58.628 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:58:58.628 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-07-30 16:58:58.628 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-07-30 16:58:58.628 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-07-30 16:58:58.629 +03:00 [DBG] Start userinfo request
2020-07-30 16:58:58.629 +03:00 [DBG] Bearer token found in header
2020-07-30 16:58:58.639 +03:00 [DBG] spa found in database: true
2020-07-30 16:58:58.639 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:58:58.647 +03:00 [DBG] spa found in database: true
2020-07-30 16:58:58.648 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 16:58:58.651 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 16:58:58.651 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"4034E2659054F00852A1EEC4BEDD0CF4","Claims":{"nbf":1596117538,"exp":1596121138,"iss":"https://localhost:5000","aud":["api","https://localhost:5000/resources"],"client_id":"spa","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596117538,"idp":"local","role":"student","jti":"4034E2659054F00852A1EEC4BEDD0CF4","sid":"20C5590A817532923EEB34F49243AA0F","iat":1596117538,"scope":["openid","profile","email","api.read"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 16:58:58.653 +03:00 [DBG] Creating userinfo response
2020-07-30 16:58:58.653 +03:00 [DBG] Scopes in access token: openid profile email api.read
2020-07-30 16:58:58.655 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 16:58:58.655 +03:00 [DBG] Requested claim types: updated_at name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale sub email email_verified
2020-07-30 16:58:58.658 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2020-07-30 16:58:58.661 +03:00 [DBG] End userinfo request
2020-07-30 16:58:58.675 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:58:58.676 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:58:58.676 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:58:58.676 +03:00 [DBG] Rendering check session result
2020-07-30 16:58:58.779 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 16:58:58.782 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 16:58:58.782 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 16:58:58.783 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 16:58:58.783 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 16:58:58.784 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 16:58:58.784 +03:00 [DBG] Start discovery request
2020-07-30 16:58:58.790 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 16:58:58.815 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 16:58:58.817 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 16:58:58.817 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 16:58:58.817 +03:00 [DBG] Rendering check session result
2020-07-30 16:59:28.335 +03:00 [INF] Removing 0 grants
2020-07-30 16:59:28.341 +03:00 [INF] Removing 0 device flow codes
2020-07-30 16:59:58.372 +03:00 [INF] Removing 0 grants
2020-07-30 16:59:58.376 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:00:28.393 +03:00 [INF] Removing 0 grants
2020-07-30 17:00:28.397 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:00:58.414 +03:00 [INF] Removing 0 grants
2020-07-30 17:00:58.416 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:01:28.425 +03:00 [INF] Removing 0 grants
2020-07-30 17:01:28.427 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:01:58.433 +03:00 [INF] Removing 0 grants
2020-07-30 17:01:58.435 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:02:28.442 +03:00 [INF] Removing 0 grants
2020-07-30 17:02:28.444 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:02:58.448 +03:00 [INF] Removing 0 grants
2020-07-30 17:02:58.452 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:03:28.462 +03:00 [INF] Removing 0 grants
2020-07-30 17:03:28.463 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:03:58.478 +03:00 [INF] Removing 0 grants
2020-07-30 17:03:58.483 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:04:28.511 +03:00 [INF] Removing 0 grants
2020-07-30 17:04:28.519 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:04:58.525 +03:00 [INF] Removing 0 grants
2020-07-30 17:04:58.526 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:05:28.561 +03:00 [INF] Removing 0 grants
2020-07-30 17:05:28.566 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:05:58.584 +03:00 [INF] Removing 0 grants
2020-07-30 17:05:58.585 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:06:00.418 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 17:06:00.421 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 17:06:00.422 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 17:06:00.422 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 17:06:00.422 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 17:06:00.423 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 17:06:00.423 +03:00 [DBG] Start discovery request
2020-07-30 17:06:00.436 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 17:06:03.772 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 17:06:03.774 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 17:06:03.774 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 17:06:03.774 +03:00 [DBG] Rendering check session result
2020-07-30 17:06:08.557 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-07-30 17:06:08.558 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-07-30 17:06:08.559 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-07-30 17:06:08.559 +03:00 [DBG] Processing signout request for 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 17:06:08.559 +03:00 [DBG] Start end session request validation
2020-07-30 17:06:08.560 +03:00 [DBG] Start identity token validation
2020-07-30 17:06:08.584 +03:00 [DBG] spa found in database: true
2020-07-30 17:06:08.584 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:06:08.586 +03:00 [DBG] Client found: spa / Example Client Application Single Page Javascript App
2020-07-30 17:06:08.587 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 17:06:08.587 +03:00 [DBG] Token validation success
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1596113026,"exp":1596113326,"iss":"https://localhost:5000","aud":"spa","iat":1596113026,"at_hash":"_jqAjxJnSrhsRr7qnebqHg","s_hash":"jH1izbqxqFj14XOUVDWdOw","sid":"1ED66A8847EFBC9682A72BFC22B14EA8","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596113015,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 17:06:08.589 +03:00 [WRN] Invalid PostLogoutRedirectUri: http://localhost:5005/loggedOut.html
2020-07-30 17:06:08.590 +03:00 [INF] End session request validation success
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","PostLogOutUri":null,"State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:5005/loggedOut.html","state":"404f8525df4144aab921ba544405ab89"},"$type":"EndSessionRequestValidationLog"}
2020-07-30 17:06:08.590 +03:00 [DBG] Success validating end session request from spa
2020-07-30 17:06:08.600 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-30 17:06:08.600 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-30 17:06:08.600 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-30 17:06:08.601 +03:00 [INF] {"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1KGIIKHO1V:00000145","TimeStamp":"2020-07-30T14:06:08.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-30 17:06:08.602 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-30 17:06:08.610 +03:00 [DBG] spa found in database: true
2020-07-30 17:06:08.610 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:06:08.610 +03:00 [DBG] No client back-channel logout URLs
2020-07-30 17:06:30.265 +03:00 [INF] Removing 0 grants
2020-07-30 17:06:30.267 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:06:30.270 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:0000014F","TimeStamp":"2020-07-30T14:06:30.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-30 17:06:30.272 +03:00 [DBG] Augmenting SignInContext
2020-07-30 17:06:30.272 +03:00 [DBG] Adding idp claim with value: local
2020-07-30 17:06:30.272 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-30 17:06:30.273 +03:00 [DBG] Adding auth_time claim with value: 1596117990
2020-07-30 17:06:30.273 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 17:06:56.590 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 17:06:56.603 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 17:06:56.604 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 17:06:56.604 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 17:06:56.605 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 17:06:56.605 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 17:06:56.605 +03:00 [DBG] Start discovery request
2020-07-30 17:06:56.619 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 17:06:56.639 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-07-30 17:06:56.640 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-07-30 17:06:56.640 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-07-30 17:06:56.641 +03:00 [DBG] Start authorize request
2020-07-30 17:06:56.641 +03:00 [DBG] User in authorize request: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 17:06:56.641 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 17:06:56.659 +03:00 [DBG] spa found in database: true
2020-07-30 17:06:56.659 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:06:56.660 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 17:06:56.663 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:06:56.670 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 17:06:56.673 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 17:06:56.674 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 17:06:56.674 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 17:06:56.674 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html","http://localhost:5006/callback.html"],"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read api.write","State":"197e62f9d8864bbc9eb5b3d7ce22b1a2","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":"popup","PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"22ABC36EC193FE3DDC5A5C2BB7EC74F4","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5005/callback.html","response_type":"code","scope":"openid profile email api.read api.write","state":"197e62f9d8864bbc9eb5b3d7ce22b1a2","code_challenge":"UrFFn7yApuYPVEiBIxGxwU4OuYM1kFIoHr2SbWKqla0","code_challenge_method":"S256","display":"popup"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 17:06:56.677 +03:00 [DBG] Client is configured to not require consent, no consent is required
2020-07-30 17:06:56.678 +03:00 [DBG] Creating Authorization Code Flow response.
2020-07-30 17:06:56.679 +03:00 [DBG] JVxxpZjGO1Iuz+7R806eIpNvSspP+kxdMqLDUdBqTDk= not found in database
2020-07-30 17:06:56.687 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","Endpoint":"Authorize","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read api.write","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****E3E6","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:00000157","TimeStamp":"2020-07-30T14:06:56.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 17:06:56.689 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ClientId":"spa","RedirectUri":"http://localhost:5005/callback.html","State":"197e62f9d8864bbc9eb5b3d7ce22b1a2","Scope":"openid profile email api.read api.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-07-30 17:06:56.690 +03:00 [DBG] Augmenting SignInContext
2020-07-30 17:06:56.690 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 17:06:56.768 +03:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:5005
2020-07-30 17:06:56.771 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 17:06:56.773 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 17:06:56.773 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-07-30 17:06:56.773 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-07-30 17:06:56.774 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-07-30 17:06:56.774 +03:00 [DBG] Start token request.
2020-07-30 17:06:56.774 +03:00 [DBG] Start client validation
2020-07-30 17:06:56.774 +03:00 [DBG] Start parsing Basic Authentication secret
2020-07-30 17:06:56.775 +03:00 [DBG] Start parsing for secret in post body
2020-07-30 17:06:56.775 +03:00 [DBG] client id without secret found
2020-07-30 17:06:56.775 +03:00 [DBG] Parser found secret: PostBodySecretParser
2020-07-30 17:06:56.775 +03:00 [DBG] Secret id found: spa
2020-07-30 17:06:56.787 +03:00 [DBG] spa found in database: true
2020-07-30 17:06:56.787 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:06:56.787 +03:00 [DBG] Public Client - skipping secret validation success
2020-07-30 17:06:56.788 +03:00 [DBG] Client validation success
2020-07-30 17:06:56.788 +03:00 [INF] {"ClientId":"spa","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM1KGIIKHO1U:0000009B","TimeStamp":"2020-07-30T14:06:56.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2020-07-30 17:06:56.790 +03:00 [DBG] Start token request validation
2020-07-30 17:06:56.791 +03:00 [DBG] Start validation of authorization code token request
2020-07-30 17:06:56.793 +03:00 [DBG] JVxxpZjGO1Iuz+7R806eIpNvSspP+kxdMqLDUdBqTDk= found in database: true
2020-07-30 17:06:56.799 +03:00 [DBG] removing JVxxpZjGO1Iuz+7R806eIpNvSspP+kxdMqLDUdBqTDk= persisted grant from database
2020-07-30 17:06:56.804 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2020-07-30 17:06:56.806 +03:00 [DBG] Validation of authorization code token request success
2020-07-30 17:06:56.807 +03:00 [INF] Token request validation success, {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"81883826569F08FD62B2521A4F1ED318D5BDF677ECADADF92B639A3FE814E3E6","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"spa","code":"81883826569F08FD62B2521A4F1ED318D5BDF677ECADADF92B639A3FE814E3E6","redirect_uri":"http://localhost:5005/callback.html","code_verifier":"f05cdc67f3074978b84c40b130731dcce3c1dccc8f814c599208772ff6ba709b0da0c6546bdd46579f39812921cb07f0","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2020-07-30 17:06:56.815 +03:00 [DBG] spa found in database: true
2020-07-30 17:06:56.817 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:06:56.819 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:06:56.821 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 17:06:56.823 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 17:06:56.823 +03:00 [DBG] Getting claims for access token for client: spa
2020-07-30 17:06:56.823 +03:00 [DBG] Getting claims for access token for subject: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 17:06:56.835 +03:00 [DBG] spa found in database: true
2020-07-30 17:06:56.836 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:06:56.838 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:06:56.839 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 17:06:56.840 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 17:06:56.840 +03:00 [DBG] Getting claims for identity token for subject: 65886359-073C-434B-AD2D-A3932222DABE and client: spa
2020-07-30 17:06:56.840 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-07-30 17:06:56.841 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":null,"Endpoint":"Token","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read api.write","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****Armw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****RzhA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1U:0000009B","TimeStamp":"2020-07-30T14:06:56.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 17:06:56.843 +03:00 [DBG] Token request success.
2020-07-30 17:06:56.853 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:5005
2020-07-30 17:06:56.855 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 17:06:56.856 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 17:06:56.856 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-07-30 17:06:56.856 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-07-30 17:06:56.856 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-07-30 17:06:56.857 +03:00 [DBG] Start userinfo request
2020-07-30 17:06:56.857 +03:00 [DBG] Bearer token found in header
2020-07-30 17:06:56.863 +03:00 [DBG] spa found in database: true
2020-07-30 17:06:56.863 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:06:56.874 +03:00 [DBG] spa found in database: true
2020-07-30 17:06:56.874 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:06:56.876 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 17:06:56.876 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"207DD1AAC2950758B5AED173E701F975","Claims":{"nbf":1596118016,"exp":1596121616,"iss":"https://localhost:5000","aud":["api","https://localhost:5000/resources"],"client_id":"spa","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596117990,"idp":"local","role":"student","jti":"207DD1AAC2950758B5AED173E701F975","sid":"22ABC36EC193FE3DDC5A5C2BB7EC74F4","iat":1596118016,"scope":["openid","profile","email","api.read","api.write"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 17:06:56.878 +03:00 [DBG] Creating userinfo response
2020-07-30 17:06:56.878 +03:00 [DBG] Scopes in access token: openid profile email api.read api.write
2020-07-30 17:06:56.879 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:06:56.882 +03:00 [DBG] Requested claim types: updated_at name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale sub email email_verified
2020-07-30 17:06:56.885 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2020-07-30 17:06:56.886 +03:00 [DBG] End userinfo request
2020-07-30 17:06:56.895 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 17:06:56.895 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 17:06:56.895 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 17:06:56.896 +03:00 [DBG] Rendering check session result
2020-07-30 17:07:00.279 +03:00 [INF] Removing 0 grants
2020-07-30 17:07:00.280 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:07:30.298 +03:00 [INF] Removing 0 grants
2020-07-30 17:07:30.301 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:08:00.311 +03:00 [INF] Removing 0 grants
2020-07-30 17:08:00.315 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:08:14.120 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 17:08:14.133 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 17:08:14.133 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 17:08:14.134 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 17:08:14.134 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 17:08:14.135 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 17:08:14.135 +03:00 [DBG] Start discovery request
2020-07-30 17:08:14.148 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 17:08:17.474 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 17:08:17.475 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 17:08:17.476 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 17:08:17.476 +03:00 [DBG] Rendering check session result
2020-07-30 17:08:30.597 +03:00 [INF] Removing 0 grants
2020-07-30 17:08:30.612 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:09:00.626 +03:00 [INF] Removing 0 grants
2020-07-30 17:09:00.628 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:09:30.634 +03:00 [INF] Removing 0 grants
2020-07-30 17:09:30.635 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:10:00.643 +03:00 [INF] Removing 0 grants
2020-07-30 17:10:00.645 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:10:30.650 +03:00 [INF] Removing 0 grants
2020-07-30 17:10:30.651 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:11:00.674 +03:00 [INF] Removing 0 grants
2020-07-30 17:11:00.676 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:11:30.678 +03:00 [INF] Removing 0 grants
2020-07-30 17:11:30.680 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:12:00.690 +03:00 [INF] Removing 0 grants
2020-07-30 17:12:00.692 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:12:30.705 +03:00 [INF] Removing 0 grants
2020-07-30 17:12:30.707 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:13:00.725 +03:00 [INF] Removing 0 grants
2020-07-30 17:13:00.728 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:13:30.743 +03:00 [INF] Removing 0 grants
2020-07-30 17:13:30.744 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:14:01.022 +03:00 [INF] Removing 0 grants
2020-07-30 17:14:01.035 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:14:31.055 +03:00 [INF] Removing 0 grants
2020-07-30 17:14:31.057 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:15:01.065 +03:00 [INF] Removing 0 grants
2020-07-30 17:15:01.066 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:15:31.071 +03:00 [INF] Removing 0 grants
2020-07-30 17:15:31.073 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:16:01.080 +03:00 [INF] Removing 0 grants
2020-07-30 17:16:01.081 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:16:31.087 +03:00 [INF] Removing 0 grants
2020-07-30 17:16:31.089 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:17:01.098 +03:00 [INF] Removing 0 grants
2020-07-30 17:17:01.099 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:17:31.123 +03:00 [INF] Removing 0 grants
2020-07-30 17:17:31.125 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:17:55.390 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 17:17:55.396 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 17:17:55.396 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 17:17:55.397 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 17:17:55.397 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 17:17:55.397 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 17:17:55.398 +03:00 [DBG] Start discovery request
2020-07-30 17:17:55.414 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 17:17:58.164 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 17:17:58.166 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 17:17:58.166 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 17:17:58.166 +03:00 [DBG] Rendering check session result
2020-07-30 17:18:01.045 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 17:18:01.047 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 17:18:01.048 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 17:18:01.048 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 17:18:01.048 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 17:18:01.049 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 17:18:01.049 +03:00 [DBG] Start discovery request
2020-07-30 17:18:01.053 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 17:18:01.068 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 17:18:01.068 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 17:18:01.069 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 17:18:01.069 +03:00 [DBG] Rendering check session result
2020-07-30 17:18:01.127 +03:00 [INF] Removing 0 grants
2020-07-30 17:18:01.129 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:18:02.966 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-07-30 17:18:02.967 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-07-30 17:18:02.968 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-07-30 17:18:02.968 +03:00 [DBG] Processing signout request for 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 17:18:02.969 +03:00 [DBG] Start end session request validation
2020-07-30 17:18:02.969 +03:00 [DBG] Start identity token validation
2020-07-30 17:18:02.994 +03:00 [DBG] spa found in database: true
2020-07-30 17:18:02.994 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:18:02.995 +03:00 [DBG] Client found: spa / Example Client Application Single Page Javascript App
2020-07-30 17:18:02.996 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 17:18:02.996 +03:00 [DBG] Token validation success
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1596118016,"exp":1596118316,"iss":"https://localhost:5000","aud":"spa","iat":1596118016,"at_hash":"uRwrNIldaWbRGtk-Q5DK4w","s_hash":"Wv6mXTVyaPccrUkvuEGKhQ","sid":"22ABC36EC193FE3DDC5A5C2BB7EC74F4","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596117990,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 17:18:02.997 +03:00 [WRN] Invalid PostLogoutRedirectUri: http://localhost:5005/loggedOut.html
2020-07-30 17:18:02.998 +03:00 [INF] End session request validation success
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","PostLogOutUri":null,"State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:5005/loggedOut.html","state":"25dccf1353a84312ae69c0a22466f700"},"$type":"EndSessionRequestValidationLog"}
2020-07-30 17:18:02.998 +03:00 [DBG] Success validating end session request from spa
2020-07-30 17:18:03.002 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-30 17:18:03.003 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-30 17:18:03.003 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-30 17:18:03.003 +03:00 [INF] {"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1KGIIKHO1V:00000163","TimeStamp":"2020-07-30T14:18:03.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-30 17:18:03.009 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-30 17:18:03.016 +03:00 [DBG] spa found in database: true
2020-07-30 17:18:03.016 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:18:03.016 +03:00 [DBG] No client back-channel logout URLs
2020-07-30 17:18:21.090 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:0000016D","TimeStamp":"2020-07-30T14:18:21.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-30 17:18:21.092 +03:00 [DBG] Augmenting SignInContext
2020-07-30 17:18:21.092 +03:00 [DBG] Adding idp claim with value: local
2020-07-30 17:18:21.092 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-30 17:18:21.092 +03:00 [DBG] Adding auth_time claim with value: 1596118701
2020-07-30 17:18:21.093 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 17:18:31.146 +03:00 [INF] Removing 0 grants
2020-07-30 17:18:31.153 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:18:46.516 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 17:18:46.524 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 17:18:46.525 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 17:18:46.526 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 17:18:46.526 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 17:18:46.527 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 17:18:46.527 +03:00 [DBG] Start discovery request
2020-07-30 17:18:46.545 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 17:18:46.565 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-07-30 17:18:46.567 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-07-30 17:18:46.567 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-07-30 17:18:46.568 +03:00 [DBG] Start authorize request
2020-07-30 17:18:46.568 +03:00 [DBG] User in authorize request: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 17:18:46.569 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 17:18:46.593 +03:00 [DBG] spa found in database: true
2020-07-30 17:18:46.593 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:18:46.594 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 17:18:46.597 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:18:46.604 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 17:18:46.607 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 17:18:46.607 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 17:18:46.608 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 17:18:46.608 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html","http://localhost:5006/callback.html"],"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read api.write","State":"da241add721e4b5da34eaf83693a4b52","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":"popup","PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"CDB1E321805737B396F0C1D002285705","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5005/callback.html","response_type":"code","scope":"openid profile email api.read api.write","state":"da241add721e4b5da34eaf83693a4b52","code_challenge":"sYXXQWfyvjkbtKqogdMwnkp3m8n_VQK7-vS_HZ0-Av8","code_challenge_method":"S256","display":"popup"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 17:18:46.612 +03:00 [DBG] Client is configured to not require consent, no consent is required
2020-07-30 17:18:46.613 +03:00 [DBG] Creating Authorization Code Flow response.
2020-07-30 17:18:46.615 +03:00 [DBG] LGyJL6H8XMGexcyo0sysg76QObdV5/PS069va0CZSWQ= not found in database
2020-07-30 17:18:46.618 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","Endpoint":"Authorize","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read api.write","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****2383","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:0000017B","TimeStamp":"2020-07-30T14:18:46.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 17:18:46.619 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ClientId":"spa","RedirectUri":"http://localhost:5005/callback.html","State":"da241add721e4b5da34eaf83693a4b52","Scope":"openid profile email api.read api.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-07-30 17:18:46.620 +03:00 [DBG] Augmenting SignInContext
2020-07-30 17:18:46.620 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 17:18:46.667 +03:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:5005
2020-07-30 17:18:46.671 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 17:18:46.671 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 17:18:46.672 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-07-30 17:18:46.672 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-07-30 17:18:46.672 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-07-30 17:18:46.673 +03:00 [DBG] Start token request.
2020-07-30 17:18:46.673 +03:00 [DBG] Start client validation
2020-07-30 17:18:46.673 +03:00 [DBG] Start parsing Basic Authentication secret
2020-07-30 17:18:46.673 +03:00 [DBG] Start parsing for secret in post body
2020-07-30 17:18:46.674 +03:00 [DBG] client id without secret found
2020-07-30 17:18:46.674 +03:00 [DBG] Parser found secret: PostBodySecretParser
2020-07-30 17:18:46.675 +03:00 [DBG] Secret id found: spa
2020-07-30 17:18:46.684 +03:00 [DBG] spa found in database: true
2020-07-30 17:18:46.684 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:18:46.685 +03:00 [DBG] Public Client - skipping secret validation success
2020-07-30 17:18:46.685 +03:00 [DBG] Client validation success
2020-07-30 17:18:46.686 +03:00 [INF] {"ClientId":"spa","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM1KGIIKHO1U:000000A9","TimeStamp":"2020-07-30T14:18:46.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2020-07-30 17:18:46.687 +03:00 [DBG] Start token request validation
2020-07-30 17:18:46.688 +03:00 [DBG] Start validation of authorization code token request
2020-07-30 17:18:46.690 +03:00 [DBG] LGyJL6H8XMGexcyo0sysg76QObdV5/PS069va0CZSWQ= found in database: true
2020-07-30 17:18:46.694 +03:00 [DBG] removing LGyJL6H8XMGexcyo0sysg76QObdV5/PS069va0CZSWQ= persisted grant from database
2020-07-30 17:18:46.698 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2020-07-30 17:18:46.700 +03:00 [DBG] Validation of authorization code token request success
2020-07-30 17:18:46.703 +03:00 [INF] Token request validation success, {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"F1B94907D141DC6DE8E40B73D17337B36AA7B67323502E1E68F1E61B96FB2383","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"spa","code":"F1B94907D141DC6DE8E40B73D17337B36AA7B67323502E1E68F1E61B96FB2383","redirect_uri":"http://localhost:5005/callback.html","code_verifier":"cba47ba37ae44821b023e2b815a05ae64f0df680b8fd4ee0b8d62f44d486928385cf7dce85544dfa8d435aaddcb98d72","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2020-07-30 17:18:46.716 +03:00 [DBG] spa found in database: true
2020-07-30 17:18:46.716 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:18:46.719 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:18:46.722 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 17:18:46.724 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 17:18:46.725 +03:00 [DBG] Getting claims for access token for client: spa
2020-07-30 17:18:46.725 +03:00 [DBG] Getting claims for access token for subject: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 17:18:46.740 +03:00 [DBG] spa found in database: true
2020-07-30 17:18:46.741 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:18:46.744 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:18:46.746 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 17:18:46.747 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 17:18:46.747 +03:00 [DBG] Getting claims for identity token for subject: 65886359-073C-434B-AD2D-A3932222DABE and client: spa
2020-07-30 17:18:46.747 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-07-30 17:18:46.749 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":null,"Endpoint":"Token","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read api.write","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****z6hw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****WNZw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1U:000000A9","TimeStamp":"2020-07-30T14:18:46.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 17:18:46.750 +03:00 [DBG] Token request success.
2020-07-30 17:18:46.760 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:5005
2020-07-30 17:18:46.761 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 17:18:46.762 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 17:18:46.762 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-07-30 17:18:46.762 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-07-30 17:18:46.762 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-07-30 17:18:46.762 +03:00 [DBG] Start userinfo request
2020-07-30 17:18:46.763 +03:00 [DBG] Bearer token found in header
2020-07-30 17:18:46.771 +03:00 [DBG] spa found in database: true
2020-07-30 17:18:46.771 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:18:46.777 +03:00 [DBG] spa found in database: true
2020-07-30 17:18:46.778 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:18:46.779 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 17:18:46.779 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"B9C1D76889490013053CBCD766BCA43B","Claims":{"nbf":1596118726,"exp":1596122326,"iss":"https://localhost:5000","aud":["api","https://localhost:5000/resources"],"client_id":"spa","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596118701,"idp":"local","role":"student","jti":"B9C1D76889490013053CBCD766BCA43B","sid":"CDB1E321805737B396F0C1D002285705","iat":1596118726,"scope":["openid","profile","email","api.read","api.write"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 17:18:46.781 +03:00 [DBG] Creating userinfo response
2020-07-30 17:18:46.781 +03:00 [DBG] Scopes in access token: openid profile email api.read api.write
2020-07-30 17:18:46.782 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:18:46.783 +03:00 [DBG] Requested claim types: updated_at name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale sub email email_verified
2020-07-30 17:18:46.786 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2020-07-30 17:18:46.788 +03:00 [DBG] End userinfo request
2020-07-30 17:18:46.803 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 17:18:46.803 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 17:18:46.804 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 17:18:46.805 +03:00 [DBG] Rendering check session result
2020-07-30 17:19:01.170 +03:00 [INF] Removing 0 grants
2020-07-30 17:19:01.171 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:19:09.788 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 17:19:09.792 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 17:19:09.793 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 17:19:09.793 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 17:19:09.793 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 17:19:09.794 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 17:19:09.794 +03:00 [DBG] Start discovery request
2020-07-30 17:19:09.798 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 17:19:23.682 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 17:19:23.683 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 17:19:23.684 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 17:19:23.684 +03:00 [DBG] Rendering check session result
2020-07-30 17:19:31.181 +03:00 [INF] Removing 0 grants
2020-07-30 17:19:31.182 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:19:54.529 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 17:19:54.534 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 17:19:54.535 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 17:19:54.536 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 17:19:54.536 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 17:19:54.536 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 17:19:54.536 +03:00 [DBG] Start discovery request
2020-07-30 17:19:54.548 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 17:20:00.642 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 17:20:00.643 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 17:20:00.644 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 17:20:00.644 +03:00 [DBG] Rendering check session result
2020-07-30 17:20:01.192 +03:00 [INF] Removing 0 grants
2020-07-30 17:20:01.193 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:20:08.040 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 17:20:08.042 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 17:20:08.042 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 17:20:08.043 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 17:20:08.043 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 17:20:08.043 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 17:20:08.044 +03:00 [DBG] Start discovery request
2020-07-30 17:20:08.049 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 17:20:10.445 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 17:20:10.445 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 17:20:10.446 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 17:20:10.446 +03:00 [DBG] Rendering check session result
2020-07-30 17:20:13.698 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-07-30 17:20:13.700 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-07-30 17:20:13.700 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-07-30 17:20:13.701 +03:00 [DBG] Processing signout request for 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 17:20:13.701 +03:00 [DBG] Start end session request validation
2020-07-30 17:20:13.702 +03:00 [DBG] Start identity token validation
2020-07-30 17:20:13.727 +03:00 [DBG] spa found in database: true
2020-07-30 17:20:13.727 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:20:13.728 +03:00 [DBG] Client found: spa / Example Client Application Single Page Javascript App
2020-07-30 17:20:13.729 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 17:20:13.729 +03:00 [DBG] Token validation success
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1596118726,"exp":1596119026,"iss":"https://localhost:5000","aud":"spa","iat":1596118726,"at_hash":"TDcAtZvtM5fT_b1UemkAuQ","s_hash":"367yeiPBWXKF2i9P_0rW7A","sid":"CDB1E321805737B396F0C1D002285705","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596118701,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 17:20:13.730 +03:00 [WRN] Invalid PostLogoutRedirectUri: http://localhost:5005/loggedOut.html
2020-07-30 17:20:13.731 +03:00 [INF] End session request validation success
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","PostLogOutUri":null,"State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:5005/loggedOut.html","state":"300d403c2fcd447084ec46583060fa3b"},"$type":"EndSessionRequestValidationLog"}
2020-07-30 17:20:13.732 +03:00 [DBG] Success validating end session request from spa
2020-07-30 17:20:13.736 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-30 17:20:13.740 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-30 17:20:13.740 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-30 17:20:13.741 +03:00 [INF] {"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1KGIIKHO1V:00000187","TimeStamp":"2020-07-30T14:20:13.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-30 17:20:13.743 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-30 17:20:13.760 +03:00 [DBG] spa found in database: true
2020-07-30 17:20:13.760 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:20:13.760 +03:00 [DBG] No client back-channel logout URLs
2020-07-30 17:20:31.508 +03:00 [INF] Removing 0 grants
2020-07-30 17:20:31.514 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:20:31.519 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:00000191","TimeStamp":"2020-07-30T14:20:31.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-30 17:20:31.521 +03:00 [DBG] Augmenting SignInContext
2020-07-30 17:20:31.521 +03:00 [DBG] Adding idp claim with value: local
2020-07-30 17:20:31.522 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-30 17:20:31.522 +03:00 [DBG] Adding auth_time claim with value: 1596118831
2020-07-30 17:20:31.522 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 17:20:42.296 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 17:20:42.302 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 17:20:42.302 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 17:20:42.303 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 17:20:42.304 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 17:20:42.304 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 17:20:42.305 +03:00 [DBG] Start discovery request
2020-07-30 17:20:42.321 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 17:20:42.337 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-07-30 17:20:42.338 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-07-30 17:20:42.338 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-07-30 17:20:42.338 +03:00 [DBG] Start authorize request
2020-07-30 17:20:42.338 +03:00 [DBG] User in authorize request: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 17:20:42.339 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 17:20:42.359 +03:00 [DBG] spa found in database: true
2020-07-30 17:20:42.359 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:20:42.360 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 17:20:42.364 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:20:42.371 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 17:20:42.373 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 17:20:42.374 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 17:20:42.374 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 17:20:42.374 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html","http://localhost:5006/callback.html"],"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read api.write","State":"d5a192c70d7f4a94b47737f529200005","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":"popup","PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"0945BD5B47A4A94867A9894CA739CBC4","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5005/callback.html","response_type":"code","scope":"openid profile email api.read api.write","state":"d5a192c70d7f4a94b47737f529200005","code_challenge":"YHNt9_djShDgjrLtKrI7MQG86aduNIE7TMhHM1OsGGQ","code_challenge_method":"S256","display":"popup"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 17:20:42.379 +03:00 [DBG] Client is configured to not require consent, no consent is required
2020-07-30 17:20:42.381 +03:00 [DBG] Creating Authorization Code Flow response.
2020-07-30 17:20:42.383 +03:00 [DBG] 6HzPzDLoIp5kT2s/G48DJI01peXco/JtU3zKvXktW8k= not found in database
2020-07-30 17:20:42.386 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","Endpoint":"Authorize","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read api.write","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****DE50","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:0000019F","TimeStamp":"2020-07-30T14:20:42.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 17:20:42.387 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ClientId":"spa","RedirectUri":"http://localhost:5005/callback.html","State":"d5a192c70d7f4a94b47737f529200005","Scope":"openid profile email api.read api.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-07-30 17:20:42.388 +03:00 [DBG] Augmenting SignInContext
2020-07-30 17:20:42.388 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 17:20:42.460 +03:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:5005
2020-07-30 17:20:42.465 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 17:20:42.465 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 17:20:42.465 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-07-30 17:20:42.466 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-07-30 17:20:42.466 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-07-30 17:20:42.466 +03:00 [DBG] Start token request.
2020-07-30 17:20:42.466 +03:00 [DBG] Start client validation
2020-07-30 17:20:42.467 +03:00 [DBG] Start parsing Basic Authentication secret
2020-07-30 17:20:42.467 +03:00 [DBG] Start parsing for secret in post body
2020-07-30 17:20:42.467 +03:00 [DBG] client id without secret found
2020-07-30 17:20:42.468 +03:00 [DBG] Parser found secret: PostBodySecretParser
2020-07-30 17:20:42.468 +03:00 [DBG] Secret id found: spa
2020-07-30 17:20:42.478 +03:00 [DBG] spa found in database: true
2020-07-30 17:20:42.479 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:20:42.479 +03:00 [DBG] Public Client - skipping secret validation success
2020-07-30 17:20:42.480 +03:00 [DBG] Client validation success
2020-07-30 17:20:42.480 +03:00 [INF] {"ClientId":"spa","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM1KGIIKHO1U:000000B7","TimeStamp":"2020-07-30T14:20:42.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2020-07-30 17:20:42.482 +03:00 [DBG] Start token request validation
2020-07-30 17:20:42.482 +03:00 [DBG] Start validation of authorization code token request
2020-07-30 17:20:42.484 +03:00 [DBG] 6HzPzDLoIp5kT2s/G48DJI01peXco/JtU3zKvXktW8k= found in database: true
2020-07-30 17:20:42.488 +03:00 [DBG] removing 6HzPzDLoIp5kT2s/G48DJI01peXco/JtU3zKvXktW8k= persisted grant from database
2020-07-30 17:20:42.492 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2020-07-30 17:20:42.495 +03:00 [DBG] Validation of authorization code token request success
2020-07-30 17:20:42.497 +03:00 [INF] Token request validation success, {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"663CB4752B16D8ACF2ABB22ECA936CDE427E7E46CECCAFB84013F98A7452DE50","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"spa","code":"663CB4752B16D8ACF2ABB22ECA936CDE427E7E46CECCAFB84013F98A7452DE50","redirect_uri":"http://localhost:5005/callback.html","code_verifier":"f3dc6faeb8864f0c836c36a160fe652227b9232d7d494cf792f6e670ef21c7b101efcb51f2084b3bbf64011c2ac29786","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2020-07-30 17:20:42.506 +03:00 [DBG] spa found in database: true
2020-07-30 17:20:42.506 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:20:42.507 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:20:42.509 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 17:20:42.510 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 17:20:42.511 +03:00 [DBG] Getting claims for access token for client: spa
2020-07-30 17:20:42.511 +03:00 [DBG] Getting claims for access token for subject: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 17:20:42.528 +03:00 [DBG] spa found in database: true
2020-07-30 17:20:42.528 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:20:42.531 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:20:42.534 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 17:20:42.536 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 17:20:42.536 +03:00 [DBG] Getting claims for identity token for subject: 65886359-073C-434B-AD2D-A3932222DABE and client: spa
2020-07-30 17:20:42.537 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-07-30 17:20:42.538 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":null,"Endpoint":"Token","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read api.write","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****xMGg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****A9lA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1U:000000B7","TimeStamp":"2020-07-30T14:20:42.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 17:20:42.541 +03:00 [DBG] Token request success.
2020-07-30 17:20:42.551 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:5005
2020-07-30 17:20:42.553 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 17:20:42.553 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 17:20:42.554 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-07-30 17:20:42.554 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-07-30 17:20:42.555 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-07-30 17:20:42.555 +03:00 [DBG] Start userinfo request
2020-07-30 17:20:42.555 +03:00 [DBG] Bearer token found in header
2020-07-30 17:20:42.567 +03:00 [DBG] spa found in database: true
2020-07-30 17:20:42.568 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:20:42.575 +03:00 [DBG] spa found in database: true
2020-07-30 17:20:42.575 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:20:42.577 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 17:20:42.577 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"9C738095B7EAC3BD95808B7C89F8D7C7","Claims":{"nbf":1596118842,"exp":1596122442,"iss":"https://localhost:5000","aud":["api","https://localhost:5000/resources"],"client_id":"spa","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596118831,"idp":"local","role":"student","jti":"9C738095B7EAC3BD95808B7C89F8D7C7","sid":"0945BD5B47A4A94867A9894CA739CBC4","iat":1596118842,"scope":["openid","profile","email","api.read","api.write"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 17:20:42.579 +03:00 [DBG] Creating userinfo response
2020-07-30 17:20:42.579 +03:00 [DBG] Scopes in access token: openid profile email api.read api.write
2020-07-30 17:20:42.581 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:20:42.582 +03:00 [DBG] Requested claim types: updated_at name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale sub email email_verified
2020-07-30 17:20:42.585 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2020-07-30 17:20:42.585 +03:00 [DBG] End userinfo request
2020-07-30 17:20:42.603 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 17:20:42.605 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 17:20:42.605 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 17:20:42.605 +03:00 [DBG] Rendering check session result
2020-07-30 17:21:01.524 +03:00 [INF] Removing 0 grants
2020-07-30 17:21:01.527 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:21:31.533 +03:00 [INF] Removing 0 grants
2020-07-30 17:21:31.534 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:21:32.719 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 17:21:32.723 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 17:21:32.723 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 17:21:32.723 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 17:21:32.724 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 17:21:32.724 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 17:21:32.724 +03:00 [DBG] Start discovery request
2020-07-30 17:21:32.727 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 17:22:01.544 +03:00 [INF] Removing 0 grants
2020-07-30 17:22:01.547 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:22:30.320 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 17:22:30.321 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 17:22:30.321 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 17:22:30.321 +03:00 [DBG] Rendering check session result
2020-07-30 17:22:31.550 +03:00 [INF] Removing 0 grants
2020-07-30 17:22:31.551 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:22:32.096 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 17:22:32.107 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 17:22:32.107 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 17:22:32.108 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 17:22:32.108 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 17:22:32.108 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 17:22:32.109 +03:00 [DBG] Start discovery request
2020-07-30 17:22:32.122 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 17:22:33.812 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 17:22:33.813 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 17:22:33.813 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 17:22:33.813 +03:00 [DBG] Rendering check session result
2020-07-30 17:23:01.583 +03:00 [INF] Removing 0 grants
2020-07-30 17:23:01.585 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:23:07.396 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-07-30 17:23:07.396 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-07-30 17:23:07.397 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-07-30 17:23:07.398 +03:00 [DBG] Processing signout request for 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 17:23:07.398 +03:00 [DBG] Start end session request validation
2020-07-30 17:23:07.398 +03:00 [DBG] Start identity token validation
2020-07-30 17:23:07.429 +03:00 [DBG] spa found in database: true
2020-07-30 17:23:07.429 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:23:07.430 +03:00 [DBG] Client found: spa / Example Client Application Single Page Javascript App
2020-07-30 17:23:07.431 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 17:23:07.431 +03:00 [DBG] Token validation success
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1596117538,"exp":1596117838,"iss":"https://localhost:5000","aud":"spa","iat":1596117538,"at_hash":"3kSleJCzdqgVpOytzH1KaA","s_hash":"XsUUS9bVdw0ur6vjIxvjdQ","sid":"20C5590A817532923EEB34F49243AA0F","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596117538,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 17:23:07.432 +03:00 [INF] End session request validation success
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","PostLogOutUri":"http://localhost:5006/index.html","State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:5006/index.html"},"$type":"EndSessionRequestValidationLog"}
2020-07-30 17:23:07.433 +03:00 [DBG] Success validating end session request from spa
2020-07-30 17:23:07.438 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-30 17:23:07.438 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-30 17:23:07.438 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-30 17:23:07.443 +03:00 [INF] {"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1KGIIKHO1V:000001A9","TimeStamp":"2020-07-30T14:23:07.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-30 17:23:07.444 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-30 17:23:07.451 +03:00 [DBG] spa found in database: true
2020-07-30 17:23:07.451 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:23:07.453 +03:00 [DBG] No client back-channel logout URLs
2020-07-30 17:23:10.586 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 17:23:10.589 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 17:23:10.589 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 17:23:10.589 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 17:23:10.590 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 17:23:10.590 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 17:23:10.590 +03:00 [DBG] Start discovery request
2020-07-30 17:23:10.603 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 17:23:10.618 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-07-30 17:23:10.619 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-07-30 17:23:10.620 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-07-30 17:23:10.620 +03:00 [DBG] Start authorize request
2020-07-30 17:23:10.620 +03:00 [DBG] No user present in authorize request
2020-07-30 17:23:10.620 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 17:23:10.627 +03:00 [DBG] spa found in database: true
2020-07-30 17:23:10.627 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:23:10.627 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 17:23:10.630 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:23:10.637 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 17:23:10.640 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 17:23:10.641 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 17:23:10.641 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5006/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html","http://localhost:5006/callback.html"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read","State":"dc0a33228022424cb49eacb80b26f5df","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5006/callback.html","response_type":"code","scope":"openid profile email api.read","state":"dc0a33228022424cb49eacb80b26f5df","code_challenge":"77QINRQXgF51nxh5CUpMtfe8HNZ4V5zV7gtFGBxp8S0","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 17:23:10.644 +03:00 [INF] Showing login: User is not authenticated
2020-07-30 17:23:10.648 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 17:23:10.656 +03:00 [DBG] spa found in database: true
2020-07-30 17:23:10.656 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:23:10.656 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 17:23:10.658 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:23:10.659 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 17:23:10.660 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 17:23:10.662 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 17:23:10.667 +03:00 [DBG] spa found in database: true
2020-07-30 17:23:10.667 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:23:31.603 +03:00 [INF] Removing 0 grants
2020-07-30 17:23:31.604 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:23:35.952 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 17:23:35.960 +03:00 [DBG] spa found in database: true
2020-07-30 17:23:35.960 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:23:35.960 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 17:23:35.962 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:23:35.964 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 17:23:35.965 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 17:23:35.965 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 17:23:35.973 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":"spa","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:000001BF","TimeStamp":"2020-07-30T14:23:35.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-30 17:23:35.975 +03:00 [DBG] Augmenting SignInContext
2020-07-30 17:23:35.975 +03:00 [DBG] Adding idp claim with value: local
2020-07-30 17:23:35.975 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-30 17:23:35.976 +03:00 [DBG] Adding auth_time claim with value: 1596119015
2020-07-30 17:23:35.976 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 17:23:35.983 +03:00 [DBG] spa found in database: true
2020-07-30 17:23:35.984 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:23:35.989 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2020-07-30 17:23:35.989 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2020-07-30 17:23:35.989 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2020-07-30 17:23:35.990 +03:00 [DBG] Start authorize callback request
2020-07-30 17:23:35.990 +03:00 [DBG] User in authorize request: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 17:23:35.990 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 17:23:35.997 +03:00 [DBG] spa found in database: true
2020-07-30 17:23:35.997 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:23:35.998 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 17:23:35.999 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:23:36.000 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 17:23:36.001 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 17:23:36.001 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 17:23:36.001 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5006/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html","http://localhost:5006/callback.html"],"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read","State":"dc0a33228022424cb49eacb80b26f5df","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"1D4E198433BA9CD8C46A226DFBF23DE4","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5006/callback.html","response_type":"code","scope":"openid profile email api.read","state":"dc0a33228022424cb49eacb80b26f5df","code_challenge":"77QINRQXgF51nxh5CUpMtfe8HNZ4V5zV7gtFGBxp8S0","code_challenge_method":"S256"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 17:23:36.004 +03:00 [DBG] Client is configured to not require consent, no consent is required
2020-07-30 17:23:36.006 +03:00 [DBG] Creating Authorization Code Flow response.
2020-07-30 17:23:36.008 +03:00 [DBG] zBz5qOwPMan1G5CHq1ena21IXkeICUuBrr4RiWjssxM= not found in database
2020-07-30 17:23:36.011 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5006/callback.html","Endpoint":"Authorize","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****B61F","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:000001C1","TimeStamp":"2020-07-30T14:23:36.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 17:23:36.012 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ClientId":"spa","RedirectUri":"http://localhost:5006/callback.html","State":"dc0a33228022424cb49eacb80b26f5df","Scope":"openid profile email api.read","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-07-30 17:23:36.013 +03:00 [DBG] Augmenting SignInContext
2020-07-30 17:23:36.013 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 17:23:36.104 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 17:23:36.107 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 17:23:36.107 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 17:23:36.108 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 17:23:36.108 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 17:23:36.108 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 17:23:36.109 +03:00 [DBG] Start discovery request
2020-07-30 17:23:36.113 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 17:23:36.122 +03:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:5006
2020-07-30 17:23:36.124 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 17:23:36.124 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 17:23:36.124 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-07-30 17:23:36.125 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-07-30 17:23:36.125 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-07-30 17:23:36.125 +03:00 [DBG] Start token request.
2020-07-30 17:23:36.129 +03:00 [DBG] Start client validation
2020-07-30 17:23:36.129 +03:00 [DBG] Start parsing Basic Authentication secret
2020-07-30 17:23:36.129 +03:00 [DBG] Start parsing for secret in post body
2020-07-30 17:23:36.130 +03:00 [DBG] client id without secret found
2020-07-30 17:23:36.130 +03:00 [DBG] Parser found secret: PostBodySecretParser
2020-07-30 17:23:36.130 +03:00 [DBG] Secret id found: spa
2020-07-30 17:23:36.139 +03:00 [DBG] spa found in database: true
2020-07-30 17:23:36.139 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:23:36.139 +03:00 [DBG] Public Client - skipping secret validation success
2020-07-30 17:23:36.140 +03:00 [DBG] Client validation success
2020-07-30 17:23:36.140 +03:00 [INF] {"ClientId":"spa","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM1KGIIKHO1U:000000C5","TimeStamp":"2020-07-30T14:23:36.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2020-07-30 17:23:36.141 +03:00 [DBG] Start token request validation
2020-07-30 17:23:36.141 +03:00 [DBG] Start validation of authorization code token request
2020-07-30 17:23:36.143 +03:00 [DBG] zBz5qOwPMan1G5CHq1ena21IXkeICUuBrr4RiWjssxM= found in database: true
2020-07-30 17:23:36.145 +03:00 [DBG] removing zBz5qOwPMan1G5CHq1ena21IXkeICUuBrr4RiWjssxM= persisted grant from database
2020-07-30 17:23:36.148 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2020-07-30 17:23:36.152 +03:00 [DBG] Validation of authorization code token request success
2020-07-30 17:23:36.153 +03:00 [INF] Token request validation success, {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"5E697D65A2FD769A75B038771A67B8B7E415E60AD8A425F4792E113B7973B61F","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"spa","code":"5E697D65A2FD769A75B038771A67B8B7E415E60AD8A425F4792E113B7973B61F","redirect_uri":"http://localhost:5006/callback.html","code_verifier":"8aaf504906da405aa3c9993b9421732b25f95e395e91414ba3ac46393b5fd482d4febe96200040898c928bdaf0987001","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2020-07-30 17:23:36.160 +03:00 [DBG] spa found in database: true
2020-07-30 17:23:36.161 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:23:36.163 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:23:36.164 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 17:23:36.165 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 17:23:36.165 +03:00 [DBG] Getting claims for access token for client: spa
2020-07-30 17:23:36.165 +03:00 [DBG] Getting claims for access token for subject: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 17:23:36.175 +03:00 [DBG] spa found in database: true
2020-07-30 17:23:36.175 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:23:36.177 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:23:36.178 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 17:23:36.179 +03:00 [DBG] Found ["api.read"] scopes in database
2020-07-30 17:23:36.179 +03:00 [DBG] Getting claims for identity token for subject: 65886359-073C-434B-AD2D-A3932222DABE and client: spa
2020-07-30 17:23:36.179 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-07-30 17:23:36.180 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":null,"Endpoint":"Token","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****rTWg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****b5Yg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1U:000000C5","TimeStamp":"2020-07-30T14:23:36.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 17:23:36.183 +03:00 [DBG] Token request success.
2020-07-30 17:23:36.190 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:5006
2020-07-30 17:23:36.193 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 17:23:36.193 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 17:23:36.193 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-07-30 17:23:36.194 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-07-30 17:23:36.194 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-07-30 17:23:36.194 +03:00 [DBG] Start userinfo request
2020-07-30 17:23:36.194 +03:00 [DBG] Bearer token found in header
2020-07-30 17:23:36.200 +03:00 [DBG] spa found in database: true
2020-07-30 17:23:36.202 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:23:36.207 +03:00 [DBG] spa found in database: true
2020-07-30 17:23:36.207 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:23:36.209 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 17:23:36.209 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"D9F64E15DBF0EC63E0767ACD0A0E0D74","Claims":{"nbf":1596119016,"exp":1596122616,"iss":"https://localhost:5000","aud":["api","https://localhost:5000/resources"],"client_id":"spa","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596119015,"idp":"local","role":"student","jti":"D9F64E15DBF0EC63E0767ACD0A0E0D74","sid":"1D4E198433BA9CD8C46A226DFBF23DE4","iat":1596119016,"scope":["openid","profile","email","api.read"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 17:23:36.212 +03:00 [DBG] Creating userinfo response
2020-07-30 17:23:36.212 +03:00 [DBG] Scopes in access token: openid profile email api.read
2020-07-30 17:23:36.214 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:23:36.214 +03:00 [DBG] Requested claim types: updated_at name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale sub email email_verified
2020-07-30 17:23:36.216 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2020-07-30 17:23:36.216 +03:00 [DBG] End userinfo request
2020-07-30 17:23:36.228 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 17:23:36.228 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 17:23:36.229 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 17:23:36.229 +03:00 [DBG] Rendering check session result
2020-07-30 17:23:36.319 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5006
2020-07-30 17:23:36.322 +03:00 [DBG] Origin http://localhost:5006 is allowed: false
2020-07-30 17:23:36.322 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5006
2020-07-30 17:23:36.322 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 17:23:36.323 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 17:23:36.323 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 17:23:36.323 +03:00 [DBG] Start discovery request
2020-07-30 17:23:36.329 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 17:23:36.354 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 17:23:36.356 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 17:23:36.357 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 17:23:36.357 +03:00 [DBG] Rendering check session result
2020-07-30 17:23:48.165 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2020-07-30 17:23:48.167 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2020-07-30 17:23:48.167 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2020-07-30 17:23:48.167 +03:00 [DBG] Processing signout request for 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 17:23:48.168 +03:00 [DBG] Start end session request validation
2020-07-30 17:23:48.168 +03:00 [DBG] Start identity token validation
2020-07-30 17:23:48.855 +03:00 [DBG] spa found in database: true
2020-07-30 17:23:48.855 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:23:48.856 +03:00 [DBG] Client found: spa / Example Client Application Single Page Javascript App
2020-07-30 17:23:48.856 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 17:23:48.857 +03:00 [DBG] Token validation success
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1596118842,"exp":1596119142,"iss":"https://localhost:5000","aud":"spa","iat":1596118842,"at_hash":"R3aLnET5NqN_wDimPxVMDw","s_hash":"NmAaJVI9AwsW4snPdLu96w","sid":"0945BD5B47A4A94867A9894CA739CBC4","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596118831,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 17:23:48.858 +03:00 [WRN] Invalid PostLogoutRedirectUri: http://localhost:5005/loggedOut.html
2020-07-30 17:23:48.858 +03:00 [INF] End session request validation success
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","PostLogOutUri":null,"State":null,"Raw":{"id_token_hint":"***REDACTED***","post_logout_redirect_uri":"http://localhost:5005/loggedOut.html","state":"3605924079944bb49ac6db44757c4162"},"$type":"EndSessionRequestValidationLog"}
2020-07-30 17:23:48.859 +03:00 [DBG] Success validating end session request from spa
2020-07-30 17:23:48.863 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-07-30 17:23:48.864 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-07-30 17:23:48.867 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-07-30 17:23:48.867 +03:00 [INF] {"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM1KGIIKHO1V:000001C9","TimeStamp":"2020-07-30T14:23:48.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2020-07-30 17:23:48.870 +03:00 [DBG] SignOutCalled set; processing post-signout session cleanup.
2020-07-30 17:23:49.419 +03:00 [DBG] spa found in database: true
2020-07-30 17:23:49.419 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:23:49.420 +03:00 [DBG] No client back-channel logout URLs
2020-07-30 17:24:01.619 +03:00 [INF] Removing 0 grants
2020-07-30 17:24:01.621 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:24:03.431 +03:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:000001D3","TimeStamp":"2020-07-30T14:24:03.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2020-07-30 17:24:03.433 +03:00 [DBG] Augmenting SignInContext
2020-07-30 17:24:03.433 +03:00 [DBG] Adding idp claim with value: local
2020-07-30 17:24:03.433 +03:00 [DBG] Adding amr claim with value: pwd
2020-07-30 17:24:03.434 +03:00 [DBG] Adding auth_time claim with value: 1596119043
2020-07-30 17:24:03.434 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 17:24:11.571 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:5005
2020-07-30 17:24:11.579 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 17:24:11.579 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 17:24:11.580 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2020-07-30 17:24:11.580 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2020-07-30 17:24:11.580 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2020-07-30 17:24:11.581 +03:00 [DBG] Start discovery request
2020-07-30 17:24:11.598 +03:00 [DBG] Found ["profile","openid","email","role","api.write","api.read"] as all scopes, and ["api"] as API resources
2020-07-30 17:24:11.616 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2020-07-30 17:24:11.616 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2020-07-30 17:24:11.617 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2020-07-30 17:24:11.617 +03:00 [DBG] Start authorize request
2020-07-30 17:24:11.617 +03:00 [DBG] User in authorize request: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 17:24:11.618 +03:00 [DBG] Start authorize request protocol validation
2020-07-30 17:24:11.637 +03:00 [DBG] spa found in database: true
2020-07-30 17:24:11.637 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:24:11.638 +03:00 [DBG] Checking for PKCE parameters
2020-07-30 17:24:11.640 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:24:11.648 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 17:24:11.651 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 17:24:11.653 +03:00 [DBG] Unsupported display mode - ignored: popup
2020-07-30 17:24:11.653 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2020-07-30 17:24:11.653 +03:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","AllowedRedirectUris":["http://localhost:5005/callback.html","http://localhost:5006/callback.html"],"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile email api.read api.write","State":"09402a24c7614b8d856e4e1e631e929d","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":"popup","PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":"CB914408B66C6D1D8490C38BE4E2A56E","Raw":{"client_id":"spa","redirect_uri":"http://localhost:5005/callback.html","response_type":"code","scope":"openid profile email api.read api.write","state":"09402a24c7614b8d856e4e1e631e929d","code_challenge":"co7CFiFK00IiePfeN3shpVv1htP9NdAIXuoQ9wNwIiY","code_challenge_method":"S256","display":"popup"},"$type":"AuthorizeRequestValidationLog"}
2020-07-30 17:24:11.657 +03:00 [DBG] Client is configured to not require consent, no consent is required
2020-07-30 17:24:11.659 +03:00 [DBG] Creating Authorization Code Flow response.
2020-07-30 17:24:11.663 +03:00 [DBG] 43CwOwDlTGelJR/w7WXH8JWAWYnbptpUWk8OmVmWKek= not found in database
2020-07-30 17:24:11.666 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":"http://localhost:5005/callback.html","Endpoint":"Authorize","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read api.write","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****7A0C","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1V:000001DB","TimeStamp":"2020-07-30T14:24:11.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 17:24:11.667 +03:00 [DBG] Authorize endpoint response
{"SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","ClientId":"spa","RedirectUri":"http://localhost:5005/callback.html","State":"09402a24c7614b8d856e4e1e631e929d","Scope":"openid profile email api.read api.write","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2020-07-30 17:24:11.669 +03:00 [DBG] Augmenting SignInContext
2020-07-30 17:24:11.670 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-07-30 17:24:11.747 +03:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:5005
2020-07-30 17:24:11.751 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 17:24:11.751 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 17:24:11.751 +03:00 [DBG] Request path /connect/token matched to endpoint type Token
2020-07-30 17:24:11.752 +03:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2020-07-30 17:24:11.752 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2020-07-30 17:24:11.752 +03:00 [DBG] Start token request.
2020-07-30 17:24:11.753 +03:00 [DBG] Start client validation
2020-07-30 17:24:11.753 +03:00 [DBG] Start parsing Basic Authentication secret
2020-07-30 17:24:11.753 +03:00 [DBG] Start parsing for secret in post body
2020-07-30 17:24:11.754 +03:00 [DBG] client id without secret found
2020-07-30 17:24:11.754 +03:00 [DBG] Parser found secret: PostBodySecretParser
2020-07-30 17:24:11.755 +03:00 [DBG] Secret id found: spa
2020-07-30 17:24:11.766 +03:00 [DBG] spa found in database: true
2020-07-30 17:24:11.767 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:24:11.767 +03:00 [DBG] Public Client - skipping secret validation success
2020-07-30 17:24:11.768 +03:00 [DBG] Client validation success
2020-07-30 17:24:11.768 +03:00 [INF] {"ClientId":"spa","AuthenticationMethod":"NoSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM1KGIIKHO1U:000000CF","TimeStamp":"2020-07-30T14:24:11.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2020-07-30 17:24:11.772 +03:00 [DBG] Start token request validation
2020-07-30 17:24:11.772 +03:00 [DBG] Start validation of authorization code token request
2020-07-30 17:24:11.774 +03:00 [DBG] 43CwOwDlTGelJR/w7WXH8JWAWYnbptpUWk8OmVmWKek= found in database: true
2020-07-30 17:24:11.782 +03:00 [DBG] removing 43CwOwDlTGelJR/w7WXH8JWAWYnbptpUWk8OmVmWKek= persisted grant from database
2020-07-30 17:24:11.786 +03:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2020-07-30 17:24:11.788 +03:00 [DBG] Validation of authorization code token request success
2020-07-30 17:24:11.788 +03:00 [INF] Token request validation success, {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"5C7EA432E8061DD87B79AF751A6C4BA216E365FB0FEFD6ED9D9DC930CF467A0C","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"spa","code":"5C7EA432E8061DD87B79AF751A6C4BA216E365FB0FEFD6ED9D9DC930CF467A0C","redirect_uri":"http://localhost:5005/callback.html","code_verifier":"df7e5fc448a341618d91516f6ead36be24870e27a13c42bab638707095d44c4073671ffbbebc4cb8aeb8f54d3a1dff49","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2020-07-30 17:24:11.802 +03:00 [DBG] spa found in database: true
2020-07-30 17:24:11.802 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:24:11.804 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:24:11.805 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 17:24:11.807 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 17:24:11.807 +03:00 [DBG] Getting claims for access token for client: spa
2020-07-30 17:24:11.807 +03:00 [DBG] Getting claims for access token for subject: 65886359-073C-434B-AD2D-A3932222DABE
2020-07-30 17:24:11.824 +03:00 [DBG] spa found in database: true
2020-07-30 17:24:11.824 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:24:11.826 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:24:11.828 +03:00 [DBG] Found ["api"] API resources in database
2020-07-30 17:24:11.829 +03:00 [DBG] Found ["api.write","api.read"] scopes in database
2020-07-30 17:24:11.830 +03:00 [DBG] Getting claims for identity token for subject: 65886359-073C-434B-AD2D-A3932222DABE and client: spa
2020-07-30 17:24:11.830 +03:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2020-07-30 17:24:11.831 +03:00 [INF] {"ClientId":"spa","ClientName":"Example Client Application Single Page Javascript App","RedirectUri":null,"Endpoint":"Token","SubjectId":"65886359-073C-434B-AD2D-A3932222DABE","Scopes":"openid profile email api.read api.write","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****1ciA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****TBog","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM1KGIIKHO1U:000000CF","TimeStamp":"2020-07-30T14:24:11.0000000Z","ProcessId":2920,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2020-07-30 17:24:11.833 +03:00 [DBG] Token request success.
2020-07-30 17:24:11.844 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:5005
2020-07-30 17:24:11.846 +03:00 [DBG] Origin http://localhost:5005 is allowed: false
2020-07-30 17:24:11.847 +03:00 [WRN] CorsPolicyService did not allow origin: http://localhost:5005
2020-07-30 17:24:11.847 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2020-07-30 17:24:11.847 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2020-07-30 17:24:11.847 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2020-07-30 17:24:11.848 +03:00 [DBG] Start userinfo request
2020-07-30 17:24:11.848 +03:00 [DBG] Bearer token found in header
2020-07-30 17:24:11.855 +03:00 [DBG] spa found in database: true
2020-07-30 17:24:11.857 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:24:11.864 +03:00 [DBG] spa found in database: true
2020-07-30 17:24:11.864 +03:00 [DBG] client configuration validation for client spa succeeded.
2020-07-30 17:24:11.867 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2020-07-30 17:24:11.867 +03:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":"6E967039B9EB5140EDC75BD3EEB4F9DF","Claims":{"nbf":1596119051,"exp":1596122651,"iss":"https://localhost:5000","aud":["api","https://localhost:5000/resources"],"client_id":"spa","sub":"65886359-073C-434B-AD2D-A3932222DABE","auth_time":1596119043,"idp":"local","role":"student","jti":"6E967039B9EB5140EDC75BD3EEB4F9DF","sid":"CB914408B66C6D1D8490C38BE4E2A56E","iat":1596119051,"scope":["openid","profile","email","api.read","api.write"],"amr":"pwd"},"$type":"TokenValidationLog"}
2020-07-30 17:24:11.869 +03:00 [DBG] Creating userinfo response
2020-07-30 17:24:11.869 +03:00 [DBG] Scopes in access token: openid profile email api.read api.write
2020-07-30 17:24:11.871 +03:00 [DBG] Found ["profile","openid","email"] identity scopes in database
2020-07-30 17:24:11.871 +03:00 [DBG] Requested claim types: updated_at name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale sub email email_verified
2020-07-30 17:24:11.873 +03:00 [INF] Profile service returned the following claim types: sub name email preferred_username email email_verified
2020-07-30 17:24:11.874 +03:00 [DBG] End userinfo request
2020-07-30 17:24:11.887 +03:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2020-07-30 17:24:11.888 +03:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2020-07-30 17:24:11.890 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2020-07-30 17:24:11.892 +03:00 [DBG] Rendering check session result
2020-07-30 17:24:31.628 +03:00 [INF] Removing 0 grants
2020-07-30 17:24:31.629 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:25:01.635 +03:00 [INF] Removing 0 grants
2020-07-30 17:25:01.636 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:25:31.651 +03:00 [INF] Removing 0 grants
2020-07-30 17:25:31.652 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:26:01.928 +03:00 [INF] Removing 0 grants
2020-07-30 17:26:01.942 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:26:31.954 +03:00 [INF] Removing 0 grants
2020-07-30 17:26:31.962 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:27:01.971 +03:00 [INF] Removing 0 grants
2020-07-30 17:27:01.972 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:27:31.988 +03:00 [INF] Removing 0 grants
2020-07-30 17:27:31.991 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:28:02.002 +03:00 [INF] Removing 0 grants
2020-07-30 17:28:02.006 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:28:32.012 +03:00 [INF] Removing 0 grants
2020-07-30 17:28:32.014 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:29:02.024 +03:00 [INF] Removing 0 grants
2020-07-30 17:29:02.025 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:29:32.032 +03:00 [INF] Removing 0 grants
2020-07-30 17:29:32.034 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:30:02.035 +03:00 [INF] Removing 0 grants
2020-07-30 17:30:02.037 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:30:32.064 +03:00 [INF] Removing 0 grants
2020-07-30 17:30:32.070 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:31:02.074 +03:00 [INF] Removing 0 grants
2020-07-30 17:31:02.074 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:31:32.298 +03:00 [INF] Removing 0 grants
2020-07-30 17:31:32.300 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:32:02.308 +03:00 [INF] Removing 0 grants
2020-07-30 17:32:02.309 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:32:32.310 +03:00 [INF] Removing 0 grants
2020-07-30 17:32:32.311 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:33:02.323 +03:00 [INF] Removing 0 grants
2020-07-30 17:33:02.324 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:33:32.331 +03:00 [INF] Removing 0 grants
2020-07-30 17:33:32.333 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:34:02.344 +03:00 [INF] Removing 0 grants
2020-07-30 17:34:02.345 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:34:32.354 +03:00 [INF] Removing 0 grants
2020-07-30 17:34:32.355 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:35:02.370 +03:00 [INF] Removing 0 grants
2020-07-30 17:35:02.372 +03:00 [INF] Removing 0 device flow codes
2020-07-30 17:35:32.377 +03:00 [INF] Removing 0 grants
2020-07-30 17:35:32.378 +03:00 [INF] Removing 0 device flow codes
